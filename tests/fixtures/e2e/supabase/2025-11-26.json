{
	"date": "2025-11-26",
	"commits": [
		{
			"sha": "9ae0cbff87d161848cc8b3e6e18068b57c15024d",
			"message": "fix: entitlement check for self-hosted (#40835)\n\n* fix: entitlement check for self-hosted\n\n* fix: update entitlement access logic for platform check",
			"user": "ignaciodob",
			"timestamp": "2025-11-26T14:46:35Z",
			"author": {
				"name": "Ignacio Dobronich",
				"email": "ignacio@dobronich.com",
				"username": "ignaciodob"
			},
			"files": {
				"added": [],
				"modified": ["apps/studio/hooks/misc/useCheckEntitlements.ts"],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/hooks/misc/useCheckEntitlements.ts b/apps/studio/hooks/misc/useCheckEntitlements.ts\nindex e82dbe0573c60..bcb7f9da6a947 100644\n--- a/apps/studio/hooks/misc/useCheckEntitlements.ts\n+++ b/apps/studio/hooks/misc/useCheckEntitlements.ts\n@@ -6,6 +6,7 @@ import type {\n   EntitlementConfig,\n   EntitlementType,\n } from 'data/entitlements/entitlements-query'\n+import { IS_PLATFORM } from 'lib/constants'\n \n function isNumericConfig(\n   config: EntitlementConfig,\n@@ -71,7 +72,7 @@ export function useCheckEntitlements(\n   })\n \n   const finalOrgSlug = organizationSlug || selectedOrg?.slug\n-  const enabled = options?.enabled !== false && !!finalOrgSlug\n+  const enabled = IS_PLATFORM ? options?.enabled !== false && !!finalOrgSlug : false\n \n   const {\n     data: entitlementsData,\n@@ -100,7 +101,7 @@ export function useCheckEntitlements(\n     : isSuccessEntitlements\n \n   return {\n-    hasAccess: entitlement?.hasAccess ?? false,\n+    hasAccess: IS_PLATFORM ? entitlement?.hasAccess ?? false : true,\n     isLoading,\n     isSuccess,\n     getEntitlementNumericValue: () => getEntitlementNumericValue(entitlement),\n",
			"diffSize": 1130,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "39cb6c5f197165f2895f6137599fef06ec362eb3",
			"message": "feat(oauthserver): update docs link and wording (#40833)\n\n* feat(oauthserver): update docs link and wording\n\n* fix: format",
			"user": "cemalkilic",
			"timestamp": "2025-11-26T14:32:06Z",
			"author": {
				"name": "Cemal Kılıç",
				"email": "cemalkilic@users.noreply.github.com",
				"username": "cemalkilic"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx b/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx\nindex 491804aff1207..611eeef749a1c 100644\n--- a/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx\n@@ -321,7 +321,7 @@ export const OAuthServerSettingsForm = () => {\n                                 Enable dynamic OAuth app registration. Apps can be registered\n                                 programmatically via APIs.{' '}\n                                 <Link\n-                                  href=\"https://supabase.com/docs/guides/auth/oauth-server/mcp-authentication#dynamic-client-registration\"\n+                                  href=\"https://supabase.com/docs/guides/auth/oauth-server/mcp-authentication#oauth-client-setup\"\n                                   target=\"_blank\"\n                                   rel=\"noreferrer\"\n                                   className=\"text-foreground-light underline hover:text-foreground transition\"\n@@ -369,31 +369,27 @@ export const OAuthServerSettingsForm = () => {\n         variant=\"warning\"\n         visible={showDynamicAppsConfirmation}\n         size=\"large\"\n-        title=\"Enable dynamic client registration\"\n-        confirmLabel=\"Enable dynamic registration\"\n+        title=\"Enable dynamic OAuth app registration\"\n+        confirmLabel=\"Enable dynamic app registration\"\n         onConfirm={confirmDynamicApps}\n         onCancel={cancelDynamicApps}\n         alert={{\n           title:\n-            'By confirming, you acknowledge the risks and would like to move forward with enabling dynamic client registration.',\n+            'By confirming, you acknowledge the risks and would like to move forward with enabling dynamic OAuth app registration.',\n         }}\n       >\n         <p className=\"text-sm text-foreground-lighter pb-4\">\n-          Enabling dynamic client registration will open up a public API endpoint that anyone can\n-          use to register OAuth applications with your app. This can be a security concern, as\n-          attackers could register OAuth applications with legitimate-sounding names and send them\n-          to your users for approval.\n+          Dynamic OAuth apps (also known as dynamic client registration) exposes a public endpoint\n+          allowing anyone to register OAuth clients. Bad actors could create malicious apps with\n+          legitimate-sounding names to phish your users for authorization.\n         </p>\n         <p className=\"text-sm text-foreground-lighter pb-4\">\n-          If your users don't look carefully and accept, the attacker could potentially take over\n-          the user's account. Attackers can also flood your application with thousands of OAuth\n-          applications that cannot be attributed to anyone (as it's a public endpoint), and make it\n-          difficult for you to find and shut them down, or even find legitimate ones.\n+          You may also see spam registrations that are difficult to trace or moderate, making it\n+          harder to identify trustworthy applications in your OAuth apps list.\n         </p>\n         <p className=\"text-sm text-foreground-lighter pb-4\">\n-          If dynamic client registration is enabled, the consent screen is forced to be enabled for\n-          all OAuth flows and can no longer be disabled. Disabling the consent screen opens up a\n-          CSRF vulnerability in your app.\n+          Only enable this if you have a specific use case requiring programmatic client\n+          registration and understand the security implications.\n         </p>\n       </ConfirmationModal>\n \n",
			"diffSize": 3735,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "e44c0975ee16687cf9452cb1a75bd26e2e34fcd8",
			"message": "fix(studio): assistant undefined connection string on self-hosted (#40830)",
			"user": "alaister",
			"timestamp": "2025-11-26T14:21:29Z",
			"author": {
				"name": "Alaister Young",
				"email": "alaister@users.noreply.github.com",
				"username": "alaister"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx b/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx\nindex 3f353fb3712a6..6f0eb73e1af81 100644\n--- a/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx\n+++ b/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx\n@@ -129,7 +129,7 @@ export const AIAssistant = ({ className }: AIAssistantProps) => {\n     state.setContext({\n       projectRef: project?.ref,\n       orgSlug: selectedOrganizationRef.current?.slug,\n-      connectionString: project?.connectionString || undefined,\n+      connectionString: project?.connectionString ?? '',\n     })\n   }, [project?.ref, project?.connectionString, selectedOrganizationRef.current?.slug, state])\n \n",
			"diffSize": 731,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "a0e62693aa98cf196a7908aec95bb6dec822ff0e",
			"message": "docs: update js client libraries (patch) (#40779)\n\n* docs: update js client libraries (patch)\n\n* docs(storage): update sections and navmenu\n\n* docs: fix broken links in runtime\n\n* docs: update examples\n\n* docs: update snapshot\n\n* docs: fix type return\n\n* docs: updated return and snaps\n\n* docs: fix some rendering reference issues\n\n* docs: surface types\n\n* docs: update examples\n\n* docs: update snapshot\n\n* docs: remove script for gaps analysis\n\n---------\n\nCo-authored-by: mandarini <6603745+mandarini@users.noreply.github.com>\nCo-authored-by: Katerina Skroumpelou <sk.katherine@gmail.com>",
			"user": "github-actions[bot]",
			"timestamp": "2025-11-26T13:51:02Z",
			"author": {
				"name": "github-actions[bot]",
				"email": "41898282+github-actions[bot]@users.noreply.github.com",
				"username": "github-actions[bot]"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/docs/features/docs/Reference.generated.singleton.ts",
					"apps/docs/features/docs/Reference.typeSpec.ts",
					"apps/docs/features/docs/__snapshots__/Reference.typeSpec.test.ts.snap",
					"apps/docs/spec/api_v1_openapi.json",
					"apps/docs/spec/cli_v1_commands.yaml",
					"apps/docs/spec/common-api-sections.json",
					"apps/docs/spec/common-client-libs-sections.json",
					"apps/docs/spec/enrichments/tsdoc_v2/combined.json",
					"apps/docs/spec/enrichments/tsdoc_v2/functions.json",
					"apps/docs/spec/enrichments/tsdoc_v2/functions_dereferenced.json",
					"apps/docs/spec/enrichments/tsdoc_v2/gotrue.json",
					"apps/docs/spec/enrichments/tsdoc_v2/gotrue_dereferenced.json",
					"apps/docs/spec/enrichments/tsdoc_v2/postgrest.json",
					"apps/docs/spec/enrichments/tsdoc_v2/postgrest_dereferenced.json",
					"apps/docs/spec/enrichments/tsdoc_v2/realtime.json",
					"apps/docs/spec/enrichments/tsdoc_v2/realtime_dereferenced.json",
					"apps/docs/spec/enrichments/tsdoc_v2/storage.json",
					"apps/docs/spec/enrichments/tsdoc_v2/storage_dereferenced.json",
					"apps/docs/spec/enrichments/tsdoc_v2/supabase.json",
					"apps/docs/spec/enrichments/tsdoc_v2/supabase_dereferenced.json",
					"apps/docs/spec/supabase_js_v2.yml",
					"apps/docs/spec/transforms/api_v1_openapi_deparsed.json"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/docs/features/docs/Reference.generated.singleton.ts b/apps/docs/features/docs/Reference.generated.singleton.ts\nindex 578742a2b9078..64ca53a3f635c 100644\n--- a/apps/docs/features/docs/Reference.generated.singleton.ts\n+++ b/apps/docs/features/docs/Reference.generated.singleton.ts\n@@ -27,14 +27,19 @@ async function _typeSpecSingleton() {\n   return typeSpec\n }\n \n+function normalizeRefPath(path: string) {\n+  return path.replace(/\\.index(?=\\.|$)/g, '').replace(/\\.+/g, '.')\n+}\n+\n export async function getTypeSpec(ref: string) {\n   const modules = await _typeSpecSingleton()\n \n-  const delimiter = ref.indexOf('.')\n-  const refMod = ref.substring(0, delimiter)\n+  const normalizedRef = normalizeRefPath(ref)\n+  const delimiter = normalizedRef.indexOf('.')\n+  const refMod = normalizedRef.substring(0, delimiter)\n \n   const mod = modules.find((mod) => mod.name === refMod)\n-  return mod?.methods.get(ref)\n+  return mod?.methods.get(normalizedRef)\n }\n \n let cliSpec: Json\ndiff --git a/apps/docs/features/docs/Reference.typeSpec.ts b/apps/docs/features/docs/Reference.typeSpec.ts\nindex 13c122bfb73c8..d70939be4343b 100644\n--- a/apps/docs/features/docs/Reference.typeSpec.ts\n+++ b/apps/docs/features/docs/Reference.typeSpec.ts\n@@ -574,10 +574,10 @@ function parseType(type: any, map: Map<number, any>, typeArguments?: any, debug\n   switch (type.kindString) {\n     case 'Type alias':\n       if (typeof type.type === 'object') {\n-        return parseType(type.type, map)\n+        return parseType(type.type, map, typeArguments)\n       }\n     case 'Interface':\n-      return parseInterface(type, map)\n+      return parseInterface(type, map, typeArguments)\n     default:\n       break\n   }\n@@ -599,10 +599,16 @@ function delegateParsing(\n   const dereferencedType = parseType(referenced, map, typeArguments)\n \n   if (dereferencedType) {\n-    dereferencedType.name = nameOrAnonymous([original, dereferencedType])\n+    // When resolving a type parameter (e.g., T -> { vectorBucket: VectorBucket }),\n+    // don't override the name or comment - let the resolved type speak for itself\n+    const isTypeParameterResolution = original.refersToTypeParameter === true\n+\n+    if (!isTypeParameterResolution) {\n+      dereferencedType.name = nameOrAnonymous([original, dereferencedType])\n+    }\n   }\n \n-  if (original.comment) {\n+  if (original.comment && !original.refersToTypeParameter) {\n     dereferencedType.comment = {\n       ...normalizeComment(dereferencedType.comment),\n       ...normalizeComment(original.comment),\n@@ -696,14 +702,14 @@ function parseReferenceType(type: any, map: Map<number, any>, typeArguments?: an\n             type,\n             referenced.type,\n             map,\n-            type.typeArguments\n+            typeArguments ?? type.typeArguments\n           )\n-        : delegateParsing(type, referenced, map, type.typeArguments)\n+        : delegateParsing(type, referenced, map, typeArguments ?? type.typeArguments)\n \n     if (maybeType) {\n       return maybeType\n     } else if (isNewTypedoc(referenced) && referenced.kind === KIND_INTERFACE) {\n-      return parseInterface(referenced, map)\n+      return parseInterface(referenced, map, typeArguments ?? type.typeArguments)\n     } else if (isNewTypedoc(referenced) && referenced.kind === KIND_CLASS) {\n       // Class is too complicated to display here, just return its name\n       return {\n@@ -919,9 +925,9 @@ function parseTypeOperatorType(\n   }\n }\n \n-function parseInterface(type: any, map: Map<number, any>): CustomObjectType {\n+function parseInterface(type: any, map: Map<number, any>, typeArguments?: any): CustomObjectType {\n   const properties = (type.children ?? [])\n-    .map((child) => parseTypeInternals(child, map))\n+    .map((child) => parseTypeInternals(child, map, typeArguments))\n     .filter(Boolean)\n \n   return {\ndiff --git a/apps/docs/features/docs/__snapshots__/Reference.typeSpec.test.ts.snap b/apps/docs/features/docs/__snapshots__/Reference.typeSpec.test.ts.snap\nindex 4428b7093c4fd..ec7ab804cfca5 100644\n--- a/apps/docs/features/docs/__snapshots__/Reference.typeSpec.test.ts.snap\n+++ b/apps/docs/features/docs/__snapshots__/Reference.typeSpec.test.ts.snap\n@@ -739,7 +739,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -824,7 +823,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -1043,7 +1041,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"OAuthClient\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -1339,7 +1337,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"OAuthClient\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -1676,7 +1674,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"OAuthClient\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -2003,7 +2001,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"OAuthClient\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -2384,7 +2382,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -2519,7 +2516,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -2564,7 +2560,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -2608,7 +2603,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -2653,7 +2647,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -2959,7 +2952,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -3094,7 +3086,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -3139,7 +3130,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -3183,7 +3173,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -3228,7 +3217,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -3662,7 +3650,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -3882,7 +3869,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -3927,7 +3913,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -3971,7 +3956,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -4016,7 +4000,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -4318,7 +4301,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -4453,7 +4435,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -4498,7 +4479,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -4542,7 +4522,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -4587,7 +4566,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -4916,7 +4894,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -5051,7 +5028,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -5096,7 +5072,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -5140,7 +5115,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -5185,7 +5159,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -5789,7 +5762,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -5924,7 +5896,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -5969,7 +5940,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -6013,7 +5983,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -6058,7 +6027,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -7065,7 +7033,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                               \"name\": \"data\",\n                               \"type\": {\n                                 \"type\": \"nameOnly\",\n-                                \"name\": \"T\"\n+                                \"name\": \"Prettify\"\n                               }\n                             },\n                             {\n@@ -7105,7 +7073,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                               \"name\": \"data\",\n                               \"type\": {\n                                 \"type\": \"nameOnly\",\n-                                \"name\": \"T\"\n+                                \"name\": \"Prettify\"\n                               }\n                             },\n                             {\n@@ -7145,7 +7113,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                               \"name\": \"data\",\n                               \"type\": {\n                                 \"type\": \"nameOnly\",\n-                                \"name\": \"T\"\n+                                \"name\": \"Prettify\"\n                               }\n                             },\n                             {\n@@ -7227,7 +7195,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"AuthMFAVerifyResponseData\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -7402,7 +7370,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -7447,7 +7414,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -7491,7 +7457,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -7536,7 +7501,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -7853,7 +7817,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                       \"name\": \"data\",\n                       \"type\": {\n                         \"type\": \"nameOnly\",\n-                        \"name\": \"T\"\n+                        \"name\": \"Prettify\"\n                       }\n                     },\n                     {\n@@ -7945,7 +7909,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                           \"name\": \"data\",\n                           \"type\": {\n                             \"type\": \"nameOnly\",\n-                            \"name\": \"T\"\n+                            \"name\": \"Prettify\"\n                           }\n                         },\n                         {\n@@ -8024,7 +7988,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                           \"name\": \"data\",\n                           \"type\": {\n                             \"type\": \"nameOnly\",\n-                            \"name\": \"T\"\n+                            \"name\": \"Prettify\"\n                           }\n                         },\n                         {\n@@ -8099,7 +8063,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                               \"name\": \"data\",\n                               \"type\": {\n                                 \"type\": \"nameOnly\",\n-                                \"name\": \"T\"\n+                                \"name\": \"Prettify\"\n                               }\n                             },\n                             {\n@@ -8139,7 +8103,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                               \"name\": \"data\",\n                               \"type\": {\n                                 \"type\": \"nameOnly\",\n-                                \"name\": \"T\"\n+                                \"name\": \"Prettify\"\n                               }\n                             },\n                             {\n@@ -8179,7 +8143,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                               \"name\": \"data\",\n                               \"type\": {\n                                 \"type\": \"nameOnly\",\n-                                \"name\": \"T\"\n+                                \"name\": \"Prettify\"\n                               }\n                             },\n                             {\n@@ -8232,7 +8196,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -8456,7 +8419,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -8560,7 +8522,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"AuthMFAVerifyResponseData\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -8735,7 +8697,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -8780,7 +8741,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -8824,7 +8784,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -8869,7 +8828,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -9182,7 +9140,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                         {\n                           \"name\": \"data\",\n                           \"type\": {\n-                            \"name\": \"T\",\n+                            \"name\": \"AuthMFAVerifyResponseData\",\n                             \"type\": \"object\",\n                             \"properties\": [\n                               {\n@@ -9357,7 +9315,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -9402,7 +9359,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -9446,7 +9402,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -9491,7 +9446,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -9794,7 +9748,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                         {\n                           \"name\": \"data\",\n                           \"type\": {\n-                            \"name\": \"T\",\n+                            \"name\": \"AuthMFAVerifyResponseData\",\n                             \"type\": \"object\",\n                             \"properties\": [\n                               {\n@@ -9969,7 +9923,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10014,7 +9967,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10058,7 +10010,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10103,7 +10054,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10396,7 +10346,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                         {\n                           \"name\": \"data\",\n                           \"type\": {\n-                            \"name\": \"T\",\n+                            \"name\": \"AuthMFAVerifyResponseData\",\n                             \"type\": \"object\",\n                             \"properties\": [\n                               {\n@@ -10571,7 +10521,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10616,7 +10565,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10660,7 +10608,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -10705,7 +10652,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -11010,7 +10956,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -11106,7 +11051,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -11182,7 +11126,7 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n+                        \"name\": \"OAuthAuthorizationDetails\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -11352,7 +11296,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                       \"name\": \"data\",\n                       \"type\": {\n                         \"type\": \"array\",\n-                        \"name\": \"T\",\n                         \"elemType\": {\n                           \"name\": \"OAuthGrant\",\n                           \"type\": \"object\",\n@@ -11573,7 +11516,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -11805,7 +11747,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -11850,7 +11791,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -11894,7 +11834,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -11939,7 +11878,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -12306,7 +12244,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -12351,7 +12288,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -12395,7 +12331,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -12440,7 +12375,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -12757,7 +12691,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -12989,7 +12922,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -13034,7 +12966,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -13078,7 +13009,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -13123,7 +13053,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -13490,7 +13419,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -13535,7 +13463,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -13579,7 +13506,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -13624,7 +13550,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -14065,7 +13990,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -14200,7 +14124,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -14245,7 +14168,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -14289,7 +14211,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -14334,7 +14255,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -14623,7 +14543,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -14852,7 +14771,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"factor_type\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Type\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -14897,7 +14815,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"status\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Status\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -14941,7 +14858,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"factor_type\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Type\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -14986,7 +14902,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"status\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Status\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -15344,7 +15259,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -15389,7 +15303,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -15433,7 +15346,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -15478,7 +15390,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -16508,7 +16419,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"factor_type\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Type\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -16553,7 +16463,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"status\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Status\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -16597,7 +16506,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"factor_type\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Type\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -16642,7 +16550,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"status\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Status\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -16971,7 +16878,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -17106,7 +17012,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -17151,7 +17056,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -17195,7 +17099,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -17240,7 +17143,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -18238,7 +18140,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                         {\n                           \"name\": \"data\",\n                           \"type\": {\n-                            \"name\": \"T\",\n                             \"type\": \"object\",\n                             \"properties\": [\n                               {\n@@ -18467,7 +18368,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -18512,7 +18412,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -18556,7 +18455,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -18601,7 +18499,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -18959,7 +18856,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -19004,7 +18900,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -19048,7 +18943,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -19093,7 +18987,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -19648,7 +19541,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -19693,7 +19585,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -19737,7 +19628,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -19782,7 +19672,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -20314,7 +20203,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                               \"name\": \"factor_type\",\n                                                               \"type\": {\n                                                                 \"type\": \"union\",\n-                                                                \"name\": \"Type\",\n                                                                 \"subTypes\": [\n                                                                   {\n                                                                     \"type\": \"literal\",\n@@ -20359,7 +20247,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                               \"name\": \"status\",\n                                                               \"type\": {\n                                                                 \"type\": \"union\",\n-                                                                \"name\": \"Status\",\n                                                                 \"subTypes\": [\n                                                                   {\n                                                                     \"type\": \"literal\",\n@@ -20403,7 +20290,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                               \"name\": \"factor_type\",\n                                                               \"type\": {\n                                                                 \"type\": \"union\",\n-                                                                \"name\": \"Type\",\n                                                                 \"subTypes\": [\n                                                                   {\n                                                                     \"type\": \"literal\",\n@@ -20448,7 +20334,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                               \"name\": \"status\",\n                                                               \"type\": {\n                                                                 \"type\": \"union\",\n-                                                                \"name\": \"Status\",\n                                                                 \"subTypes\": [\n                                                                   {\n                                                                     \"type\": \"literal\",\n@@ -21014,7 +20899,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -21059,7 +20943,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -21103,7 +20986,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -21148,7 +21030,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -21684,7 +21565,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                                   \"name\": \"factor_type\",\n                                                                   \"type\": {\n                                                                     \"type\": \"union\",\n-                                                                    \"name\": \"Type\",\n                                                                     \"subTypes\": [\n                                                                       {\n                                                                         \"type\": \"literal\",\n@@ -21729,7 +21609,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                                   \"name\": \"status\",\n                                                                   \"type\": {\n                                                                     \"type\": \"union\",\n-                                                                    \"name\": \"Status\",\n                                                                     \"subTypes\": [\n                                                                       {\n                                                                         \"type\": \"literal\",\n@@ -21773,7 +21652,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                                   \"name\": \"factor_type\",\n                                                                   \"type\": {\n                                                                     \"type\": \"union\",\n-                                                                    \"name\": \"Type\",\n                                                                     \"subTypes\": [\n                                                                       {\n                                                                         \"type\": \"literal\",\n@@ -21818,7 +21696,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                                   \"name\": \"status\",\n                                                                   \"type\": {\n                                                                     \"type\": \"union\",\n-                                                                    \"name\": \"Status\",\n                                                                     \"subTypes\": [\n                                                                       {\n                                                                         \"type\": \"literal\",\n@@ -22125,7 +22002,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -22357,7 +22233,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -22402,7 +22277,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -22446,7 +22320,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -22491,7 +22364,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -22858,7 +22730,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -22903,7 +22774,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -22947,7 +22817,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -22992,7 +22861,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -23309,7 +23177,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -23541,7 +23408,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -23586,7 +23452,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -23630,7 +23495,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -23675,7 +23539,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -24042,7 +23905,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -24087,7 +23949,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -24131,7 +23992,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -24176,7 +24036,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -24590,7 +24449,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -24822,7 +24680,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -25054,7 +24911,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -25099,7 +24955,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -25143,7 +24998,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -25188,7 +25042,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -25555,7 +25408,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -25600,7 +25452,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -25644,7 +25495,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -25689,7 +25539,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -26028,7 +25877,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -26260,7 +26108,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -26305,7 +26152,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -26349,7 +26195,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"factor_type\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Type\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -26394,7 +26239,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                         \"name\": \"status\",\n                                                         \"type\": {\n                                                           \"type\": \"union\",\n-                                                          \"name\": \"Status\",\n                                                           \"subTypes\": [\n                                                             {\n                                                               \"type\": \"literal\",\n@@ -26761,7 +26605,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -26806,7 +26649,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -26850,7 +26692,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"factor_type\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Type\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -26895,7 +26736,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                   \"name\": \"status\",\n                                                   \"type\": {\n                                                     \"type\": \"union\",\n-                                                    \"name\": \"Status\",\n                                                     \"subTypes\": [\n                                                       {\n                                                         \"type\": \"literal\",\n@@ -27286,7 +27126,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                     {\n                       \"name\": \"data\",\n                       \"type\": {\n-                        \"name\": \"T\",\n                         \"type\": \"object\",\n                         \"properties\": [\n                           {\n@@ -27515,7 +27354,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"factor_type\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Type\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -27560,7 +27398,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"status\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Status\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -27604,7 +27441,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"factor_type\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Type\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -27649,7 +27485,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                                     \"name\": \"status\",\n                                                     \"type\": {\n                                                       \"type\": \"union\",\n-                                                      \"name\": \"Status\",\n                                                       \"subTypes\": [\n                                                         {\n                                                           \"type\": \"literal\",\n@@ -28007,7 +27842,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -28052,7 +27886,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -28096,7 +27929,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"factor_type\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Type\",\n                                                 \"subTypes\": [\n                                                   {\n                                                     \"type\": \"literal\",\n@@ -28141,7 +27973,6 @@ exports[`TS type spec parsing > matches snapshot 1`] = `\n                                               \"name\": \"status\",\n                                               \"type\": {\n                                                 \"type\": \"union\",\n-                                                \"name\": \"Status\",\n      ",
			"diffSize": 8006989,
			"diffTruncated": true,
			"filterResult": {
				"included": false,
				"excludeReason": "bot"
			}
		},
		{
			"sha": "c86ff5bd3adec556edc06ee770d02d5a45314b1c",
			"message": "feat: update Figma auth docs (#39328)\n\n* feat: update Figma auth docs\n\n* Update Figma OAuth app setup instructions\n\n* Prettier\n\n* Update spelling\n\n* Revert \"Update spelling\"\n\nThis reverts commit 894d0a505065c72196fcf869aafd1b9480edc4fe.\n\n---------\n\nCo-authored-by: Chris Chinchilla <chris.ward@supabase.io>\nCo-authored-by: Chris Chinchilla <chris@chrischinchilla.com>",
			"user": "cemalkilic",
			"timestamp": "2025-11-26T13:01:18Z",
			"author": {
				"name": "Cemal Kılıç",
				"email": "cemalkilic@users.noreply.github.com",
				"username": "cemalkilic"
			},
			"files": {
				"added": [
					"apps/docs/public/img/guides/auth-figma/figma_app_redirect_uri.png",
					"apps/docs/public/img/guides/auth-figma/figma_app_scopes.png"
				],
				"modified": [
					"apps/docs/content/guides/auth/social-login/auth-figma.mdx",
					"apps/docs/public/img/guides/auth-figma/figma_app_credentials.png"
				],
				"removed": [
					"apps/docs/public/img/guides/auth-figma/figma_create_app.png",
					"apps/docs/public/img/guides/auth-figma/figma_developers_page.png"
				]
			},
			"diff": "diff --git a/apps/docs/content/guides/auth/social-login/auth-figma.mdx b/apps/docs/content/guides/auth/social-login/auth-figma.mdx\nindex f934234e9c814..79eb179aefd52 100644\n--- a/apps/docs/content/guides/auth/social-login/auth-figma.mdx\n+++ b/apps/docs/content/guides/auth/social-login/auth-figma.mdx\n@@ -10,35 +10,35 @@ To enable Figma Auth for your project, you need to set up a Figma OAuth applicat\n \n Setting up Figma logins for your application consists of 3 parts:\n \n-- Create and configure a Figma App on the [Figma Developers page](https://www.figma.com/developers).\n+- Create and configure a Figma App on the [Figma Developers page](https://www.figma.com/developers/app).\n - Add your Figma `client_id` and `client_secret` to your [Supabase Project](https://app.supabase.com).\n - Add the login code to your [Supabase JS Client App](https://github.com/supabase/supabase-js).\n \n ## Access the Figma Developers page\n \n-- Go to the [Figma Developers page](https://www.figma.com/developers)\n-- Click on `My apps` at the top right\n+- Go to the [Figma Developers page](https://www.figma.com/developers/app)\n - Log in (if necessary)\n \n-![Figma Developers page](/docs/img/guides/auth-figma/figma_developers_page.png)\n-\n ## Find your callback URL\n \n <$Partial path=\"social_provider_setup.mdx\" variables={{ \"provider\": \"Figma\" }} />\n \n ## Create a Figma OAuth app\n \n-- Enter your `App name`, `Website URL` and upload your app logo\n-- Click on `Add callback`\n-- Add your `Callback URL`\n-- Click on `Save`\n+1. Enter your `App name`, select the owner for the app and click `Create app` button\n+\n+   ![Create Figma app](/docs/img/guides/auth-figma/figma_app_credentials.png)\n+\n+2. Copy and save your newly-generated `Client ID`\n+3. Copy and save your newly-generated `Client Secret`\n+4. Then, go to `OAuth credentials` and click on `Add a redirect URL` button\n \n-![Create Figma app](/docs/img/guides/auth-figma/figma_create_app.png)\n+   ![Add redirect URL](/docs/img/guides/auth-figma/figma_app_redirect_uri.png)\n \n-- Copy and save your newly-generated `Client ID`\n-- Copy and save your newly-generated `Client Secret`\n+5. Add your URL from the previous step (callback URL on Supabase) and click on `Add` button\n+6. Go to `OAuth scopes` and select `current_user:read` under `Users`.\n \n-![Get Figma app credentials](/docs/img/guides/auth-figma/figma_app_credentials.png)\n+![Select OAuth scopes](/docs/img/guides/auth-figma/figma_app_scopes.png)\n \n ## Enter your Figma credentials into your Supabase project\n \ndiff --git a/apps/docs/public/img/guides/auth-figma/figma_app_credentials.png b/apps/docs/public/img/guides/auth-figma/figma_app_credentials.png\nold mode 100755\nnew mode 100644\nindex e4d582ab9fb30..adb808acd82ed\nBinary files a/apps/docs/public/img/guides/auth-figma/figma_app_credentials.png and b/apps/docs/public/img/guides/auth-figma/figma_app_credentials.png differ\ndiff --git a/apps/docs/public/img/guides/auth-figma/figma_app_redirect_uri.png b/apps/docs/public/img/guides/auth-figma/figma_app_redirect_uri.png\nnew file mode 100644\nindex 0000000000000..d9e2d06123478\nBinary files /dev/null and b/apps/docs/public/img/guides/auth-figma/figma_app_redirect_uri.png differ\ndiff --git a/apps/docs/public/img/guides/auth-figma/figma_app_scopes.png b/apps/docs/public/img/guides/auth-figma/figma_app_scopes.png\nnew file mode 100644\nindex 0000000000000..18ffc112c82ac\nBinary files /dev/null and b/apps/docs/public/img/guides/auth-figma/figma_app_scopes.png differ\ndiff --git a/apps/docs/public/img/guides/auth-figma/figma_create_app.png b/apps/docs/public/img/guides/auth-figma/figma_create_app.png\ndeleted file mode 100755\nindex 7caeb2c0057dc..0000000000000\nBinary files a/apps/docs/public/img/guides/auth-figma/figma_create_app.png and /dev/null differ\ndiff --git a/apps/docs/public/img/guides/auth-figma/figma_developers_page.png b/apps/docs/public/img/guides/auth-figma/figma_developers_page.png\ndeleted file mode 100755\nindex 8ceee422d79bd..0000000000000\nBinary files a/apps/docs/public/img/guides/auth-figma/figma_developers_page.png and /dev/null differ\n",
			"diffSize": 4060,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "93eb6a1c9d1355a73b38f7546d88742aeb1acbe1",
			"message": "feat(docs): add supabase auth oauth2.1 docs (#40340)\n\n* feat(docs): add supabase auth oauth2.1 docs\n\n* fix: fix spelling & heading\n\n* fix: format\n\n* Update linter\n\n* Change inline HTML\n\n* Update apps/docs/content/guides/auth/oauth-server/oauth-flows.mdx\n\n* Update apps/docs/content/guides/auth/oauth-server/oauth-flows.mdx\n\nCo-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\n\n* Update spelling\n\n* fix: rm detailed MCP intro\n\n* fix: auth server discovery url\n\n* feat: simpler mcp auth docs\n\n* feat: add scope related docs\n\n* fix: lint\n\n* fix: format\n\n* feat: tabbed view for dashboard/cli\n\n* fix: lint\n\n* chore: update wording\n\n---------\n\nCo-authored-by: Chris Chinchilla <chris.ward@supabase.io>\nCo-authored-by: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>\nCo-authored-by: Chris Chinchilla <chris@chrischinchilla.com>",
			"user": "cemalkilic",
			"timestamp": "2025-11-26T11:35:48Z",
			"author": {
				"name": "Cemal Kılıç",
				"email": "cemalkilic@users.noreply.github.com",
				"username": "cemalkilic"
			},
			"files": {
				"added": [
					"apps/docs/content/guides/auth/oauth-server.mdx",
					"apps/docs/content/guides/auth/oauth-server/getting-started.mdx",
					"apps/docs/content/guides/auth/oauth-server/mcp-authentication.mdx",
					"apps/docs/content/guides/auth/oauth-server/oauth-flows.mdx",
					"apps/docs/content/guides/auth/oauth-server/token-security.mdx"
				],
				"modified": [
					"apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts",
					"apps/docs/content/guides/auth/auth-hooks/custom-access-token-hook.mdx",
					"apps/docs/content/guides/auth/redirect-urls.mdx",
					"supa-mdx-lint/Rule001HeadingCase.toml",
					"supa-mdx-lint/Rule003Spelling.toml"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts b/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts\nindex fb746a73ba8c1..8391644281578 100644\n--- a/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts\n+++ b/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts\n@@ -800,6 +800,16 @@ export const auth: NavMenuConstant = {\n         },\n       ],\n     },\n+    {\n+      name: 'OAuth 2.1 Server',\n+      items: [\n+        { name: 'Overview', url: '/guides/auth/oauth-server' },\n+        { name: 'Getting Started', url: '/guides/auth/oauth-server/getting-started' },\n+        { name: 'OAuth Flows', url: '/guides/auth/oauth-server/oauth-flows' },\n+        { name: 'MCP Authentication', url: '/guides/auth/oauth-server/mcp-authentication' },\n+        { name: 'Token Security & RLS', url: '/guides/auth/oauth-server/token-security' },\n+      ],\n+    },\n     {\n       name: 'Third-party auth',\n       enabled: allAuthProvidersEnabled,\ndiff --git a/apps/docs/content/guides/auth/auth-hooks/custom-access-token-hook.mdx b/apps/docs/content/guides/auth/auth-hooks/custom-access-token-hook.mdx\nindex 4c0af8c9c46f1..6d93202ef6fb5 100644\n--- a/apps/docs/content/guides/auth/auth-hooks/custom-access-token-hook.mdx\n+++ b/apps/docs/content/guides/auth/auth-hooks/custom-access-token-hook.mdx\n@@ -16,11 +16,11 @@ Optional Claims: `jti`, `nbf`, `app_metadata`, `user_metadata`, `amr`,\n \n **Inputs**\n \n-| Field                   | Type     | Description                                                                                                                                                                                                                           |\n-| ----------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n-| `user_id`               | `string` | Unique identifier for the user attempting to sign in.                                                                                                                                                                                 |\n-| `claims`                | `object` | Claims which are included in the access token.                                                                                                                                                                                        |\n-| `authentication_method` | `string` | The authentication method used to request the access token. Possible values include: `oauth`, `password`, `otp`, `totp`, `recovery`, `invite`, `sso/saml`, `magiclink`, `email/signup`, `email_change`, `token_refresh`, `anonymous`. |\n+| Field                   | Type     | Description                                                                                                                                                                                                                                                                |\n+| ----------------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n+| `user_id`               | `string` | Unique identifier for the user attempting to sign in.                                                                                                                                                                                                                      |\n+| `claims`                | `object` | Claims which are included in the access token.                                                                                                                                                                                                                             |\n+| `authentication_method` | `string` | The authentication method used to request the access token. Possible values include: `oauth`, `password`, `otp`, `totp`, `recovery`, `invite`, `sso/saml`, `magiclink`, `email/signup`, `email_change`, `token_refresh`, `oauth_provider/authorization_code`, `anonymous`. |\n \n <Tabs\n   scrollable\n@@ -45,7 +45,8 @@ Optional Claims: `jti`, `nbf`, `app_metadata`, `user_metadata`, `amr`,\n     \"aal\": \"aal1\",\n     \"amr\": [ { \"method\": \"anonymous\", \"timestamp\": 1715686621 } ],\n     \"session_id\": \"4b938a09-5372-4177-a314-cfa292099ea2\",\n-    \"is_anonymous\": true\n+    \"is_anonymous\": true,\n+    \"client_id\": \"oauth-client-id-if-oauth-flow\"\n   },\n   \"authentication_method\": \"anonymous\"\n }\n@@ -143,6 +144,10 @@ Optional Claims: `jti`, `nbf`, `app_metadata`, `user_metadata`, `amr`,\n         \"is_anonymous\": {\n           \"type\": \"boolean\",\n           \"x-faker\": \"random.boolean\"\n+        },\n+        \"client_id\": {\n+          \"type\": \"string\",\n+          \"x-faker\": \"random.uuid\"\n         }\n       },\n       \"required\": [\n@@ -175,6 +180,7 @@ Optional Claims: `jti`, `nbf`, `app_metadata`, `user_metadata`, `amr`,\n         \"email/signup\",\n         \"email_change\",\n         \"token_refresh\",\n+        \"oauth_provider/authorization_code\",\n         \"anonymous\"\n       ]\n     }\ndiff --git a/apps/docs/content/guides/auth/oauth-server.mdx b/apps/docs/content/guides/auth/oauth-server.mdx\nnew file mode 100644\nindex 0000000000000..1dbb75f127998\n--- /dev/null\n+++ b/apps/docs/content/guides/auth/oauth-server.mdx\n@@ -0,0 +1,91 @@\n+---\n+title: 'OAuth 2.1 Server'\n+description: 'Turn your Supabase project into an OAuth 2.1 and OpenID Connect identity provider'\n+---\n+\n+Supabase Auth can act as an OAuth 2.1 and OpenID Connect (OIDC) identity provider. This allows other applications and services to use your Supabase project as their authentication provider, just like \"Sign in with Google\" or \"Sign in with GitHub\".\n+\n+You can use this to build \"Sign in with [Your App]\" experiences, authenticate AI agents through the Model Context Protocol (MCP), power developer platforms with third-party integrations, or implement standards-compliant enterprise SSO.\n+\n+## Use cases\n+\n+There are several reasons why you might want to enable OAuth 2.1 Server in your Supabase project:\n+\n+- **Developer platforms and marketplaces**: Allow third-party developers to build integrations and apps for your platform. Partners can offer \"Sign in with [Your App]\" to their users, with your control over data access through Row Level Security policies.\n+\n+- **AI agents and automation**: Authenticate AI agents, LLM tools, and MCP servers that need to access user data. The Model Context Protocol provides automatic OAuth discovery and client registration for AI applications.\n+\n+- **Mobile and desktop apps**: Issue OAuth tokens to your own mobile apps, desktop applications, or other first-party clients. All tokens respect your existing Row Level Security policies and work with Custom Access Token Hooks.\n+\n+- **Enterprise SSO**: Provide OpenID Connect (OIDC) authentication for enterprise customers who need standards-compliant identity federation across multiple services.\n+\n+## Overview\n+\n+Supabase Auth implements the OAuth 2.1 authorization code flow with PKCE (Proof Key for Code Exchange). When a third-party application wants to access user data:\n+\n+1. The application redirects the user to your authorization endpoint\n+2. Supabase Auth validates the request and redirects to your custom authorization UI\n+3. The user authenticates (using any of your enabled auth methods) and approves access\n+4. Supabase Auth issues an authorization code\n+5. The application exchanges the code for access and refresh tokens\n+6. The application uses the access token to make authenticated API requests\n+\n+Access tokens are standard Supabase JWTs that include `user_id`, `role`, and `client_id` claims. Your existing Row Level Security policies automatically apply to OAuth tokens, giving you fine-grained control over what each client can access.\n+\n+### Supported standards\n+\n+- **OAuth 2.1**: Latest OAuth specification with mandatory PKCE\n+- **OpenID Connect**: ID tokens (with `openid` scope), UserInfo endpoint, and OIDC discovery\n+- **Standard scopes**: `openid`, `email`, `profile`, and `phone` scopes for controlling data access\n+- **Dynamic client registration**: Automatic registration for MCP-compatible clients\n+- **JWKS endpoint**: Public keys for third parties to validate tokens\n+\n+### Integration with existing auth\n+\n+OAuth 2.1 Server works seamlessly with your existing Supabase Auth configuration:\n+\n+- Users can authenticate using any enabled method (password, magic link, social providers, MFA, phone)\n+- [Custom Access Token Hooks](/guides/auth/auth-hooks/access-token-hook) apply to OAuth tokens, allowing you to customize claims like `audience` or add client-specific permissions\n+- Row Level Security policies control data access using the `client_id` claim in tokens\n+- All standard Supabase features (email templates, hooks, rate limiting) continue to work\n+\n+## Set up OAuth 2.1 server\n+\n+To enable OAuth 2.1 Server in your project, follow these guides:\n+\n+<div className=\"grid md:grid-cols-12 gap-4 not-prose\">\n+  {[\n+    {\n+      name: 'Getting Started',\n+      description:\n+        'Enable OAuth 2.1, configure your authorization endpoint, and register your first client.',\n+      href: '/guides/auth/oauth-server/getting-started',\n+    },\n+    {\n+      name: 'OAuth Flows',\n+      description: 'Detailed walkthrough of authorization code and refresh token flows.',\n+      href: '/guides/auth/oauth-server/oauth-flows',\n+    },\n+    {\n+      name: 'MCP Authentication',\n+      description: 'Authenticate AI agents and LLM tools using Model Context Protocol.',\n+      href: '/guides/auth/oauth-server/mcp-authentication',\n+    },\n+    {\n+      name: 'Token Security & RLS',\n+      description: 'Control data access with Row Level Security policies for OAuth clients.',\n+      href: '/guides/auth/oauth-server/token-security',\n+    },\n+  ].map((x) => (\n+    <div className=\"col-span-6\" key={x.href}>\n+      <Link href={x.href} passHref>\n+        <GlassPanel title={x.name}>{x.description}</GlassPanel>\n+      </Link>\n+    </div>\n+  ))}\n+</div>\n+\n+## Resources\n+\n+- [GitHub Discussion](https://github.com/orgs/supabase/discussions/38022) - Share your use cases and help shape the roadmap\n+- [Discord Community](https://discord.supabase.com/) - Get help and share what you're building\ndiff --git a/apps/docs/content/guides/auth/oauth-server/getting-started.mdx b/apps/docs/content/guides/auth/oauth-server/getting-started.mdx\nnew file mode 100644\nindex 0000000000000..fbcdbcd1694e9\n--- /dev/null\n+++ b/apps/docs/content/guides/auth/oauth-server/getting-started.mdx\n@@ -0,0 +1,614 @@\n+---\n+id: 'oauth-server-getting-started'\n+title: 'Getting Started with OAuth 2.1 Server'\n+description: 'Learn how to enable OAuth 2.1 and register client applications in your Supabase project'\n+---\n+\n+This guide will walk you through setting up your Supabase project as an OAuth 2.1 identity provider, from enabling the feature to registering your first client application.\n+\n+## Prerequisites\n+\n+Before you begin, make sure you have:\n+\n+- A Supabase project (create one at [supabase.com](https://supabase.com))\n+- Admin access to your project\n+- (Optional) [Supabase CLI](/docs/guides/cli) v2.54.11 or higher for local development\n+\n+## Overview\n+\n+Setting up OAuth 2.1 in your Supabase project involves these steps:\n+\n+1. Enable OAuth 2.1 server capabilities in your project\n+2. Configure your authorization path\n+3. Build your authorization UI (frontend)\n+4. Register OAuth client applications\n+\n+<Admonition type=\"note\">\n+\n+Testing OAuth flows is often easier on a Supabase project since it's already accessible on the web, no tunnel or additional configuration needed.\n+\n+</Admonition>\n+\n+## Enable OAuth 2.1 server\n+\n+OAuth 2.1 server is currently in beta and free to use during the beta period on all Supabase plans.\n+\n+<Tabs\n+  scrollable\n+  size=\"small\"\n+  type=\"underlined\"\n+  defaultActiveId=\"dashboard\"\n+  queryGroup=\"oauth-setup\"\n+>\n+<TabPanel id=\"dashboard\" label=\"Cloud\">\n+\n+1. Go to your project dashboard\n+2. Navigate to **Authentication** > **OAuth Server** in the sidebar\n+3. Enable OAuth 2.1 server capabilities\n+\n+</TabPanel>\n+<TabPanel id=\"cli\" label=\"CLI\">\n+\n+Edit your `supabase/config.toml` file and add the OAuth server configuration:\n+\n+```toml\n+[auth.oauth_server]\n+enabled = true\n+authorization_url_path = \"/oauth/consent\"\n+allow_dynamic_registration = false  # Optional: enable dynamic client registration\n+```\n+\n+Start or restart your local Supabase instance:\n+\n+```bash\n+supabase start\n+# or if already running:\n+supabase stop && supabase start\n+```\n+\n+</TabPanel>\n+</Tabs>\n+\n+Once enabled, your project will expose the necessary OAuth endpoints:\n+\n+<Tabs\n+  scrollable\n+  size=\"small\"\n+  type=\"underlined\"\n+  defaultActiveId=\"dashboard\"\n+  queryGroup=\"oauth-setup\"\n+>\n+<TabPanel id=\"dashboard\" label=\"Cloud\">\n+\n+| Endpoint                   | URL                                                                                |\n+| -------------------------- | ---------------------------------------------------------------------------------- |\n+| **Authorization endpoint** | `https://<project-ref>.supabase.co/auth/v1/oauth/authorize`                        |\n+| **Token endpoint**         | `https://<project-ref>.supabase.co/auth/v1/oauth/token`                            |\n+| **JWKS endpoint**          | `https://<project-ref>.supabase.co/auth/v1/.well-known/jwks.json`                  |\n+| **Discovery endpoint**     | `https://<project-ref>.supabase.co/.well-known/oauth-authorization-server/auth/v1` |\n+| **OIDC discovery**         | `https://<project-ref>.supabase.co/auth/v1/.well-known/openid-configuration`       |\n+\n+</TabPanel>\n+<TabPanel id=\"cli\" label=\"CLI\">\n+\n+| Endpoint                   | URL                                                                     |\n+| -------------------------- | ----------------------------------------------------------------------- |\n+| **Authorization endpoint** | `http://localhost:54321/auth/v1/oauth/authorize`                        |\n+| **Token endpoint**         | `http://localhost:54321/auth/v1/oauth/token`                            |\n+| **JWKS endpoint**          | `http://localhost:54321/auth/v1/.well-known/jwks.json`                  |\n+| **Discovery endpoint**     | `http://localhost:54321/.well-known/oauth-authorization-server/auth/v1` |\n+| **OIDC discovery**         | `http://localhost:54321/auth/v1/.well-known/openid-configuration`       |\n+\n+### Expose local instance to the world\n+\n+To test OAuth flows with external applications, you can expose your local Supabase instance using a tunnel solution (such as [ngrok](https://ngrok.com/) or [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/)).\n+\n+When using a tunnel, configure the `jwt_issuer` field in your `supabase/config.toml` to match your tunnel URL:\n+\n+```toml\n+[auth]\n+jwt_issuer = \"https://my-tunnel.url/auth/v1\"\n+```\n+\n+This ensures that JWTs issued by your local instance use the correct issuer claim for token validation, and serves the discovery endpoint at the correct location with accurate discovery information.\n+\n+</TabPanel>\n+</Tabs>\n+\n+<Admonition type=\"tip\">\n+\n+**Use asymmetric JWT signing keys for better security**\n+\n+By default, Supabase uses HS256 (symmetric) for signing JWTs. For OAuth use cases, we recommend migrating to asymmetric algorithms like RS256 or ES256. Asymmetric keys are more scalable and secure because:\n+\n+- OAuth clients can validate JWTs using the public key from your JWKS endpoint\n+- No need to share your JWT secret with third-party applications\n+- More resilient architecture for distributed systems\n+\n+Learn more about [configuring JWT signing keys](/docs/guides/auth/signing-keys).\n+\n+**Note:** If you plan to use OpenID Connect ID tokens (by requesting the `openid` scope), asymmetric signing algorithms are **required**. ID token generation will fail with HS256.\n+\n+</Admonition>\n+\n+## Configure your authorization path\n+\n+Before registering clients, you need to configure where your authorization UI will live.\n+\n+1. In your project dashboard, navigate to **Authentication** > **OAuth Server**\n+2. Set the **Authorization Path** (e.g., `/oauth/consent`)\n+\n+<Admonition type=\"note\">\n+\n+The authorization path is combined with your Site URL (configured in **Authentication** > **URL Configuration**) to create the full authorization endpoint URL.\n+\n+</Admonition>\n+\n+Your authorization UI will be at the combined Site URL + Authorization Path. For example:\n+\n+- Site URL: `https://example.com` (from **Authentication** > **URL Configuration**)\n+- Authorization Path: `/oauth/consent` (from **OAuth Server** settings)\n+- Your authorization UI: `https://example.com/oauth/consent`\n+\n+When OAuth clients initiate the authorization flow, Supabase Auth will redirect users to this URL with an `authorization_id` query parameter. You'll use [Supabase JavaScript library OAuth methods](https://github.com/supabase/supabase-js/blob/master/packages/core/auth-js/src/GoTrueClient.ts#L2159-L2163) to handle the authorization:\n+\n+- `supabase.auth.oauth.getAuthorizationDetails(authorization_id)` - Retrieve client and authorization details\n+- `supabase.auth.oauth.approveAuthorization(authorization_id)` - Approve the authorization request\n+- `supabase.auth.oauth.denyAuthorization(authorization_id)` - Deny the authorization request\n+\n+## Build your authorization UI\n+\n+This is where you build the **frontend** for your authorization flow. When third-party apps initiate OAuth, users will be redirected to your authorization path (configured in the previous step) with an `authorization_id` query parameter.\n+\n+Your authorization UI should:\n+\n+1. **Extract authorization_id** - Get the `authorization_id` from the URL query parameters\n+2. **Authenticate the user** - If not already logged in, redirect to your login page (preserving the authorization_id)\n+3. **Retrieve authorization details** - Use `supabase.auth.oauth.getAuthorizationDetails(authorization_id)` to get client information including requested scopes\n+4. **Display consent screen** - Show the user what app is requesting access and what scopes/permissions are being requested\n+5. **Handle user decision** - Call either `approveAuthorization(authorization_id)` or `denyAuthorization(authorization_id)` based on user choice\n+\n+The authorization details include a `scopes` field that contains the scopes requested by the client (e.g., `[\"openid\", \"email\", \"profile\"]`). You should display these scopes to the user so they understand what information will be shared.\n+\n+<Admonition type=\"note\">\n+\n+This is a **frontend implementation**. You're building the UI that displays the consent screen and handles user interactions. The actual OAuth token generation is handled by Supabase Auth after you call the approve/deny methods.\n+\n+</Admonition>\n+\n+### Example authorization UI\n+\n+Here's how to build a minimal authorization page at your configured path (e.g., `/oauth/consent`):\n+\n+<Tabs\n+  scrollable\n+  size=\"small\"\n+  type=\"underlined\"\n+  defaultActiveId=\"nextjs\"\n+  queryGroup=\"framework\"\n+>\n+<TabPanel id=\"nextjs\" label=\"Next.js\">\n+\n+```tsx\n+// app/oauth/consent/page.tsx\n+import { createServerClient } from '@supabase/ssr'\n+import { cookies } from 'next/headers'\n+import { redirect } from 'next/navigation'\n+\n+export default async function ConsentPage({\n+  searchParams,\n+}: {\n+  searchParams: { authorization_id?: string }\n+}) {\n+  const authorizationId = searchParams.authorization_id\n+\n+  if (!authorizationId) {\n+    return <div>Error: Missing authorization_id</div>\n+  }\n+\n+  const supabase = createServerClient(\n+    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n+    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n+    {\n+      cookies: {\n+        getAll: async () => (await cookies()).getAll(),\n+        setAll: async (cookiesToSet) => {\n+          const cookieStore = await cookies()\n+          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n+        },\n+      },\n+    }\n+  )\n+\n+  // Check if user is authenticated\n+  const {\n+    data: { user },\n+  } = await supabase.auth.getUser()\n+\n+  if (!user) {\n+    // Redirect to login, preserving authorization_id\n+    redirect(`/login?redirect=/oauth/consent?authorization_id=${authorizationId}`)\n+  }\n+\n+  // Get authorization details using the authorization_id\n+  const { data: authDetails, error } =\n+    await supabase.auth.oauth.getAuthorizationDetails(authorizationId)\n+\n+  if (error || !authDetails) {\n+    return <div>Error: {error?.message || 'Invalid authorization request'}</div>\n+  }\n+\n+  return (\n+    <div>\n+      <h1>Authorize {authDetails.client.name}</h1>\n+      <p>This application wants to access your account.</p>\n+\n+      <div>\n+        <p>\n+          <strong>Client:</strong> {authDetails.client.name}\n+        </p>\n+        <p>\n+          <strong>Redirect URI:</strong> {authDetails.redirect_uri}\n+        </p>\n+        {authDetails.scopes && authDetails.scopes.length > 0 && (\n+          <div>\n+            <strong>Requested permissions:</strong>\n+            <ul>\n+              {authDetails.scopes.map((scope) => (\n+                <li key={scope}>{scope}</li>\n+              ))}\n+            </ul>\n+          </div>\n+        )}\n+      </div>\n+\n+      <form action=\"/api/oauth/decision\" method=\"POST\">\n+        <input type=\"hidden\" name=\"authorization_id\" value={authorizationId} />\n+        <button type=\"submit\" name=\"decision\" value=\"approve\">\n+          Approve\n+        </button>\n+        <button type=\"submit\" name=\"decision\" value=\"deny\">\n+          Deny\n+        </button>\n+      </form>\n+    </div>\n+  )\n+}\n+```\n+\n+```typescript\n+// app/api/oauth/decision/route.ts\n+import { createServerClient } from '@supabase/ssr'\n+import { cookies } from 'next/headers'\n+import { NextResponse } from 'next/server'\n+\n+export async function POST(request: Request) {\n+  const formData = await request.formData()\n+  const decision = formData.get('decision')\n+  const authorizationId = formData.get('authorization_id') as string\n+\n+  if (!authorizationId) {\n+    return NextResponse.json({ error: 'Missing authorization_id' }, { status: 400 })\n+  }\n+\n+  const supabase = createServerClient(\n+    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n+    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n+    {\n+      cookies: {\n+        getAll: async () => (await cookies()).getAll(),\n+        setAll: async (cookiesToSet) => {\n+          const cookieStore = await cookies()\n+          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n+        },\n+      },\n+    }\n+  )\n+\n+  if (decision === 'approve') {\n+    const { data, error } = await supabase.auth.oauth.approveAuthorization(authorizationId)\n+\n+    if (error) {\n+      return NextResponse.json({ error: error.message }, { status: 400 })\n+    }\n+\n+    // Redirect back to the client with authorization code\n+    return NextResponse.redirect(data.redirect_to)\n+  } else {\n+    const { data, error } = await supabase.auth.oauth.denyAuthorization(authorizationId)\n+\n+    if (error) {\n+      return NextResponse.json({ error: error.message }, { status: 400 })\n+    }\n+\n+    // Redirect back to the client with error\n+    return NextResponse.redirect(data.redirect_to)\n+  }\n+}\n+```\n+\n+</TabPanel>\n+<TabPanel id=\"react\" label=\"React (SPA)\">\n+\n+```tsx\n+// src/pages/OAuthConsent.tsx\n+import { useEffect, useState } from 'react'\n+import { useNavigate, useSearchParams } from 'react-router-dom'\n+import { supabase } from './supabaseClient'\n+\n+export function OAuthConsent() {\n+  const navigate = useNavigate()\n+  const [searchParams] = useSearchParams()\n+  const authorizationId = searchParams.get('authorization_id')\n+\n+  const [authDetails, setAuthDetails] = useState<any>(null)\n+  const [loading, setLoading] = useState(true)\n+  const [error, setError] = useState<string | null>(null)\n+\n+  useEffect(() => {\n+    async function loadAuthDetails() {\n+      if (!authorizationId) {\n+        setError('Missing authorization_id')\n+        setLoading(false)\n+        return\n+      }\n+\n+      // Check if user is authenticated\n+      const {\n+        data: { user },\n+      } = await supabase.auth.getUser()\n+\n+      if (!user) {\n+        navigate(`/login?redirect=/oauth/consent?authorization_id=${authorizationId}`)\n+        return\n+      }\n+\n+      // Get authorization details using the authorization_id\n+      const { data, error } = await supabase.auth.oauth.getAuthorizationDetails(authorizationId)\n+\n+      if (error) {\n+        setError(error.message)\n+      } else {\n+        setAuthDetails(data)\n+      }\n+\n+      setLoading(false)\n+    }\n+\n+    loadAuthDetails()\n+  }, [authorizationId, navigate])\n+\n+  async function handleApprove() {\n+    if (!authorizationId) return\n+\n+    const { data, error } = await supabase.auth.oauth.approveAuthorization(authorizationId)\n+\n+    if (error) {\n+      setError(error.message)\n+    } else {\n+      // Redirect to client app\n+      window.location.href = data.redirect_to\n+    }\n+  }\n+\n+  async function handleDeny() {\n+    if (!authorizationId) return\n+\n+    const { data, error } = await supabase.auth.oauth.denyAuthorization(authorizationId)\n+\n+    if (error) {\n+      setError(error.message)\n+    } else {\n+      // Redirect to client app with error\n+      window.location.href = data.redirect_to\n+    }\n+  }\n+\n+  if (loading) return <div>Loading...</div>\n+  if (error) return <div>Error: {error}</div>\n+  if (!authDetails) return <div>No authorization request found</div>\n+\n+  return (\n+    <div>\n+      <h1>Authorize {authDetails.client.name}</h1>\n+      <p>This application wants to access your account.</p>\n+\n+      <div>\n+        <p>\n+          <strong>Client:</strong> {authDetails.client.name}\n+        </p>\n+        <p>\n+          <strong>Redirect URI:</strong> {authDetails.redirect_uri}\n+        </p>\n+        {authDetails.scopes && authDetails.scopes.length > 0 && (\n+          <div>\n+            <strong>Requested permissions:</strong>\n+            <ul>\n+              {authDetails.scopes.map((scope) => (\n+                <li key={scope}>{scope}</li>\n+              ))}\n+            </ul>\n+          </div>\n+        )}\n+      </div>\n+\n+      <div>\n+        <button onClick={handleApprove}>Approve</button>\n+        <button onClick={handleDeny}>Deny</button>\n+      </div>\n+    </div>\n+  )\n+}\n+```\n+\n+</TabPanel>\n+</Tabs>\n+\n+### How it works\n+\n+1. **User navigates to your authorization path** - When a third-party app initiates OAuth, Supabase Auth redirects the user to your configured authorization path (e.g., `https://example.com/oauth/consent?authorization_id=<id>`)\n+2. **Extract authorization_id** - Your page extracts the `authorization_id` from the URL query parameters\n+3. **Check authentication** - Your page checks if the user is logged in, redirecting to login if not (preserving the authorization_id)\n+4. **Retrieve details** - Call `supabase.auth.oauth.getAuthorizationDetails(authorization_id)` to get information about the requesting client\n+5. **Show consent screen** - Display a UI asking the user to approve or deny access\n+6. **Handle decision** - When the user clicks approve/deny:\n+   - Call `supabase.auth.oauth.approveAuthorization(authorization_id)` or `denyAuthorization(authorization_id)`\n+   - These methods handle all OAuth logic internally (generating authorization codes, etc.)\n+   - They return a `redirect_to` URL\n+7. **Redirect back** - Redirect the user to the `redirect_to` URL, which sends them back to the third-party app with either an authorization code (approved) or error (denied)\n+\n+## Register an OAuth client\n+\n+Before third-party applications can use your project as an identity provider, you need to register them as OAuth clients.\n+\n+<Tabs\n+  scrollable\n+  size=\"small\"\n+  type=\"underlined\"\n+  defaultActiveId=\"dashboard\"\n+  queryGroup=\"oauth-setup\"\n+>\n+<TabPanel id=\"dashboard\" label=\"Dashboard\">\n+\n+1. Go to **Authentication** > **OAuth Apps** (under the **Manage** section)\n+2. Click **Add a new client**\n+3. Enter the client details:\n+   - **Client name**: A friendly name for your application\n+   - **Redirect URIs**: One or more URLs where users will be redirected after authorization\n+   - **Client type**: Choose between:\n+     - **Public** - For mobile and single-page apps (no client secret)\n+     - **Confidential** - For server-side apps (includes client secret)\n+4. Click **Create**\n+\n+You'll receive:\n+\n+- **Client ID**: A unique identifier for the client\n+- **Client Secret** (for confidential clients): A secret key for authenticating the client\n+\n+<Admonition type=\"caution\">\n+\n+Store the client secret securely. It will only be shown once. If you lose it, you can regenerate a new one from the **OAuth Apps** page.\n+\n+</Admonition>\n+\n+</TabPanel>\n+<TabPanel id=\"programmatically\" label=\"Programmatically\">\n+\n+You can register clients programmatically by calling your project's auth server admin endpoint with a secret key:\n+\n+**Production:**\n+\n+```bash\n+curl -X POST 'https://<project-ref>.supabase.co/auth/v1/admin/oauth/clients' \\\n+  -H \"Authorization: Bearer ${SUPABASE_SECRET_KEY}\" \\\n+  -H \"Content-Type: application/json\" \\\n+  -d '{\n+    \"name\": \"My Third-Party App\",\n+    \"redirect_uris\": [\n+      \"https://my-app.com/auth/callback\",\n+      \"https://my-app.com/auth/silent-callback\"\n+    ],\n+    \"client_type\": \"confidential\"\n+  }'\n+```\n+\n+**Local development:**\n+\n+```bash\n+curl -X POST 'http://localhost:54321/auth/v1/admin/oauth/clients' \\\n+  -H \"Authorization: Bearer ${SUPABASE_SECRET_KEY}\" \\\n+  -H \"Content-Type: application/json\" \\\n+  -d '{\n+    \"name\": \"Local Dev App\",\n+    \"redirect_uris\": [\"http://localhost:3000/auth/callback\"],\n+    \"client_type\": \"confidential\"\n+  }'\n+```\n+\n+Response:\n+\n+```json\n+{\n+  \"client_id\": \"9a8b7c6d-5e4f-3a2b-1c0d-9e8f7a6b5c4d\",\n+  \"client_secret\": \"verysecret-1234567890abcdef...\",\n+  \"name\": \"My Third-Party App\",\n+  \"redirect_uris\": [\"https://my-app.com/auth/callback\", \"https://my-app.com/auth/silent-callback\"],\n+  \"client_type\": \"confidential\",\n+  \"created_at\": \"2025-01-15T10:30:00.000Z\"\n+}\n+```\n+\n+<Admonition type=\"note\">\n+\n+For complete API documentation, see the [OAuth Admin API reference](/todo).\n+\n+</Admonition>\n+\n+### List OAuth clients\n+\n+To view all registered OAuth clients:\n+\n+**Production:**\n+\n+```bash\n+curl 'https://<project-ref>.supabase.co/auth/v1/admin/oauth/clients' \\\n+  -H \"Authorization: Bearer ${SUPABASE_SECRET_KEY}\"\n+```\n+\n+**Local development:**\n+\n+```bash\n+curl 'http://localhost:54321/auth/v1/admin/oauth/clients' \\\n+  -H \"Authorization: Bearer ${SUPABASE_SECRET_KEY}\"\n+```\n+\n+</TabPanel>\n+</Tabs>\n+\n+## Customizing tokens (optional)\n+\n+By default, OAuth access tokens include standard claims like `user_id`, `role`, and `client_id`. If you need to customize tokens—for example, to set a specific `audience` claim for third-party validation or add client-specific metadata—use [Custom Access Token Hooks](/docs/guides/auth/auth-hooks/access-token-hook).\n+\n+Custom Access Token Hooks are triggered for all token issuance, including OAuth flows. You can use the `client_id` parameter to customize tokens based on which OAuth client is requesting them.\n+\n+### Common use cases\n+\n+- **Customize `audience` claim**: Set the `aud` claim to the third-party API endpoint for proper JWT validation\n+- **Add client-specific permissions**: Include custom claims based on which OAuth client is requesting access\n+- **Implement dynamic scopes**: Add metadata that RLS policies can use for fine-grained access control\n+\n+For more examples, see [Token Security & RLS](/docs/guides/auth/oauth-server/token-security#custom-access-token-hooks).\n+\n+## Redirect URI configuration\n+\n+Redirect URIs are critical for OAuth security. Supabase Auth will only redirect to URIs that are explicitly registered with the client.\n+\n+<Admonition type=\"note\">\n+\n+**Not to be confused with general redirect URLs**\n+\n+This section is about **OAuth client redirect URIs** - where to send users after they authorize third-party apps to access your Supabase project. This is different from the general [Redirect URLs](/docs/guides/auth/redirect-urls) setting, which controls where to send users after they sign in TO your app using social providers.\n+\n+</Admonition>\n+\n+<Admonition type=\"caution\">\n+\n+**Exact matches only - No wildcards or patterns**\n+\n+OAuth client redirect URIs require exact, complete URL matches. Unlike general redirect URLs (which support wildcards), OAuth client redirect URIs do NOT support wildcards, patterns, or partial URLs. You must register the full, exact callback URL.\n+\n+</Admonition>\n+\n+### Best practices\n+\n+- **Use HTTPS in production** - Always use HTTPS for redirect URIs in production\n+- **Register exact, complete URLs** - Each redirect URI must be the full URL including protocol, domain, path, and port if needed\n+- **Use separate OAuth clients per environment** - Create separate OAuth clients for development, staging, and production. This provides better security isolation, allows independent secret rotation, and improves auditability. If you need to use the same client across environments, you can register multiple redirect URIs, but separate clients are recommended.\n+\n+## Next steps\n+\n+Now that you've registered your first OAuth client, you're ready to:\n+\n+- [Understand OAuth flows](/docs/guides/auth/oauth-server/oauth-flows) - Learn how the authorization code and refresh token flows work\n+- [Implement MCP authentication](/docs/guides/auth/oauth-server/mcp-authentication) - Enable AI agent authentication\n+- [Secure with RLS](/docs/guides/auth/oauth-server/token-security) - Control data access for OAuth clients\ndiff --git a/apps/docs/content/guides/auth/oauth-server/mcp-authentication.mdx b/apps/docs/content/guides/auth/oauth-server/mcp-authentication.mdx\nnew file mode 100644\nindex 0000000000000..4e5406357f750\n--- /dev/null\n+++ b/apps/docs/content/guides/auth/oauth-server/mcp-authentication.mdx\n@@ -0,0 +1,156 @@\n+---\n+id: 'oauth-server-mcp'\n+title: 'Model Context Protocol (MCP) Authentication'\n+description: 'Integrate Supabase Auth with MCP servers to authenticate AI agents using your existing user base'\n+---\n+\n+The Model Context Protocol (MCP) is an open standard for connecting AI agents and LLM tools to data sources and services. While Supabase doesn't provide MCP server functionality, you can build your own MCP servers that connect to your Supabase project and leverage Supabase Auth's OAuth 2.1 capabilities to authenticate AI agents using your existing user base.\n+\n+## Why use Supabase Auth for MCP?\n+\n+When building MCP servers that connect to your Supabase project, you can leverage your existing Supabase Auth infrastructure to authenticate AI agents:\n+\n+- **Use your existing user base** - No need to create separate authentication systems; AI agents authenticate as your existing users\n+- **Standards-compliant OAuth 2.1** - Full implementation with PKCE that MCP clients expect\n+- **Automatic discovery** - MCP clients auto-configure using Supabase's discovery endpoints\n+- **Dynamic client registration** - MCP clients can register themselves automatically with your project\n+- **Row Level Security** - Your existing RLS policies automatically apply to MCP clients\n+- **User authorization** - Users explicitly approve AI agent access through your authorization flow\n+- **Token management** - Automatic refresh token rotation and expiration handled by Supabase\n+\n+## How MCP authentication works\n+\n+When you build an MCP server that connects to your Supabase project, authentication flows through Supabase Auth:\n+\n+1. **Discovery**: The MCP client fetches your OAuth configuration from Supabase's discovery endpoint\n+2. **Registration** (optional): The client registers itself as an OAuth client in your Supabase project\n+3. **Authorization**: User is redirected to your authorization endpoint to approve the AI tool's access\n+4. **Token exchange**: Supabase issues access and refresh tokens for the authenticated user\n+5. **Authenticated access**: The MCP server can now make requests to your Supabase APIs on behalf of the user\n+\n+By leveraging Supabase Auth, your MCP server can authenticate AI agents using your existing user accounts without building a separate authentication system.\n+\n+## Prerequisites\n+\n+Before setting up MCP authentication:\n+\n+- [Enable OAuth 2.1 server](/docs/guides/auth/oauth-server/getting-started) in your Supabase project\n+- Build an [authorization endpoint](/docs/guides/auth/oauth-server/getting-started#build-your-authorization-endpoint)\n+- (Optional) Enable dynamic client registration\n+\n+## Setting up your MCP server\n+\n+Configure your MCP server to use your Supabase Auth server:\n+\n+```\n+https://<project-ref>.supabase.co/auth/v1\n+```\n+\n+Replace `<project-ref>` with your project reference ID from the Supabase dashboard.\n+\n+MCP clients will automatically discover your OAuth configuration from:\n+\n+```\n+https://<project-ref>.supabase.co/.well-known/oauth-authorization-server/auth/v1\n+```\n+\n+### OAuth client setup\n+\n+Depending on your MCP server implementation, you have two options:\n+\n+- **Pre-register an OAuth client** - Manually register your client by following the [Register an OAuth client](/docs/guides/auth/oauth-server/getting-started#register-an-oauth-client) guide and use the client credentials in your MCP server\n+- **Dynamic client registration** - Enable this in **Authentication** > **OAuth Server** in your Supabase dashboard to allow MCP clients to register themselves automatically without manual intervention\n+\n+<Admonition type=\"caution\">\n+\n+Dynamic registration allows any MCP client to register with your project. Consider:\n+\n+- Requiring user approval for all clients\n+- Monitoring registered clients regularly\n+- Validating redirect URIs are from trusted domains\n+\n+</Admonition>\n+\n+## Building an MCP server with Supabase Auth\n+\n+When building your own MCP server, integrate with Supabase Auth to authenticate AI agents as your existing users and leverage your RLS policies.\n+\n+<Admonition type=\"tip\">\n+\n+**Looking for an easier way to build MCP servers?**\n+\n+[FastMCP](https://gofastmcp.com) provides a streamlined way to build MCP servers with built-in Supabase Auth integration. FastMCP handles OAuth configuration, token management, and authentication flows automatically, letting you focus on building your AI agent's functionality. Check out their [Supabase integration guide](https://gofastmcp.com/todo) to get started quickly.\n+\n+</Admonition>\n+\n+## Handling MCP tokens in your application\n+\n+When your MCP server makes requests to your Supabase APIs on behalf of authenticated users, it will send access tokens issued by Supabase Auth, just like any other OAuth client.\n+\n+### Validating MCP tokens\n+\n+Use the same token validation as other OAuth clients.\n+\n+See [Token Security & RLS](/docs/guides/auth/oauth-server/token-security) for more examples.\n+\n+## Security considerations\n+\n+### User approval\n+\n+Always require explicit user approval for MCP clients:\n+\n+- Show clear information about what the AI agent can access\n+- Display the client name and description\n+- List the scopes being requested\n+- Provide an option to deny access\n+- Allow users to revoke access later\n+\n+## Troubleshooting\n+\n+### MCP client can't discover OAuth configuration\n+\n+**Problem**: Client shows \"OAuth discovery failed\" or similar error.\n+\n+**Solutions**:\n+\n+- Verify OAuth 2.1 is enabled in your project\n+- Check that `/.well-known/oauth-authorization-server` returns valid JSON\n+- Ensure your project URL is accessible\n+\n+### Dynamic registration fails\n+\n+**Problem**: Client receives 403 or 404 on registration endpoint.\n+\n+**Solutions**:\n+\n+- Enable dynamic client registration in project settings\n+- Verify redirect URIs are valid, complete URLs (protocol, domain, path, and port)\n+- Check for rate limiting on registration endpoint\n+\n+### Token exchange fails\n+\n+**Problem**: Client receives \"invalid_grant\" error.\n+\n+**Solutions**:\n+\n+- Verify authorization code hasn't expired (10 minutes)\n+- Ensure code verifier matches code challenge\n+- Check that redirect URI exactly matches registration\n+- Confirm client_id is correct\n+\n+### RLS policies block MCP access\n+\n+**Problem**: MCP client can't access data despite valid token.\n+\n+**Solutions**:\n+\n+- Check RLS policies include the MCP client's `client_id`\n+- Verify user has necessary permissions\n+- Test with service role key to isolate RLS issues\n+- Review [Token Security guide](/docs/guides/auth/oauth-server/token-security)\n+\n+## Next steps\n+\n+- [Secure with RLS](/docs/guides/auth/oauth-server/token-security) - Create granular policies for MCP clients\n+- [OAuth flows](/docs/guides/auth/oauth-server/oauth-flows) - Deep dive into OAuth implementation\n+- [MCP Specification](https://modelcontextprotocol.io/docs) - Official MCP documentation\ndiff --git a/apps/docs/content/guides/auth/oauth-server/oauth-flows.mdx b/apps/docs/content/guides/auth/oauth-server/oauth-flows.mdx\nnew file mode 100644\nindex 0000000000000..028634e88c7dc\n--- /dev/null\n+++ b/apps/docs/content/guides/auth/oauth-server/oauth-flows.mdx\n@@ -0,0 +1,767 @@\n+---\n+id: 'oauth-server-flows'\n+title: 'OAuth 2.1 Flows'\n+description: 'Understanding the authorization code and refresh token flows with OpenID Connect'\n+---\n+\n+Supabase Auth implements OAuth 2.1 with OpenID Connect (OIDC), supporting the authorization code flow with PKCE and refresh token flow. This guide explains how these flows work in detail.\n+\n+<Admonition type=\"note\">\n+\n+This guide explains the OAuth 2.1 flows for **third-party client applications** that authenticate with your Supabase project. These flows require custom implementation and are not available in the `@supabase/supabase-js` library. The `supabase-js` library is for authenticating **with** Supabase Auth as an identity provider, not for building your own OAuth server.\n+\n+</Admonition>\n+\n+## Supported grant types\n+\n+Supabase Auth supports two OAuth 2.1 grant types:\n+\n+1. **Authorization Code with PKCE** (`authorization_code`) - For obtaining initial access tokens\n+2. **Refresh Token** (`refresh_token`) - For obtaining new access tokens without re-authentication\n+\n+<Admonition type=\"note\">\n+\n+Other grant types like `client_credentials` or `password` are not supported.\n+\n+</Admonition>\n+\n+## Authorization code flow with PKCE\n+\n+The authorization code flow with PKCE (Proof Key for Code Exchange) is the recommended flow for all OAuth clients, including single-page applications, mobile apps, and server-side applications.\n+\n+### How it works\n+\n+The flow consists of several steps:\n+\n+1. **Client initiates authorization** - Third-party app redirects user to Supabase Auth's authorize endpoint\n+2. **Supabase validates and redirects** - Supabase Auth validates OAuth parameters and redirects user to your configured authorization URL\n+3. **User authenticates and authorizes** - Your frontend checks if user is logged in, shows consent screen, and handles approval/denial\n+4. **Authorization code issued** - Supabase Auth generates a short-lived authorization code and redirects back to client\n+5. **Code exchange** - Client exchanges the code for tokens\n+6. **Access granted** - Client receives access token, refresh token, and ID token\n+\n+### Flow diagram\n+\n+Here's a visual representation of the complete authorization code flow:\n+\n+```\n+┌─────────────┐              ┌──────────────────┐              ┌──────────────────┐\n+│             │              │                  │              │                  │\n+│   Client    │              │   Your Auth UI   │              │  Supabase Auth   │\n+│     App     │              │   (Frontend)     │              │                  │\n+│             │              │                  │              │                  │\n+└──────┬──────┘              └────────┬─────────┘              └────────┬─────────┘\n+       │                              │                                 │\n+       │  1. Generate PKCE params                                       │\n+       │     (code_verifier, code_challenge)                            │\n+       │                              │                                 │\n+       │  2. Redirect to /oauth/authorize with code_challenge           │\n+       ├────────────────────────────────────────────────────────────────>│\n+       │                              │                                 │\n+       │                              │  3. Validate params & redirect  │\n+       │                              │     to authorization_path       │\n+       │                              │<────────────────────────────────┤\n+       │                              │                                 │\n+       │                              │  4. getAuthorizationDetails()   │\n+       │                              ├────────────────────────────────>│\n+       │                              │  Return client info             │\n+       │                              │<────────────────────────────────┤\n+       │                              │                                 │\n+       │                              │  5. User login & consent        │\n+       │                              │                                 │\n+       │                              │  6. approveAuthorization()      │\n+       │                              ├────────────────────────────────>│\n+       │                              │  Return redirect_to with code   │\n+       │                              │<────────────────────────────────┤\n+       │                              │                                 │\n+       │  7. Redirect to client callback with code                      │\n+       │<───────────────────────────────────────────────────────────────┤\n+       │                              │                                 │\n+       │  8. Exchange code for tokens (POST /oauth/token)               │\n+       │     with code_verifier                                         │\n+       ├────────────────────────────────────────────────────────────────>│\n+       │                              │                                 │\n+       │  9. Return tokens (access, refresh, ID)                        │\n+       │<────────────────────────────────────────────────────────────────┤\n+       │                              │                                 │\n+       │  10. Access resources with access_token                        │\n+       │                              │                                 │\n+       │  11. Refresh tokens (POST /oauth/token with refresh_token)     │\n+       ├────────────────────────────────────────────────────────────────>│\n+       │                              │                                 │\n+       │  12. Return new tokens                                         │\n+       │<────────────────────────────────────────────────────────────────┤\n+       │                              │                                 │\n+```\n+\n+**Key points:**\n+\n+- Third-party client redirects user to **Supabase Auth's authorize endpoint** (not directly to your UI)\n+- Supabase Auth validates OAuth parameters and redirects to **your authorization path**\n+- Your frontend UI handles authentication and consent using `supabase-js` OAuth methods\n+- Supabase Auth handles all backend OAuth logic (code generation, token issuance)\n+\n+### Step 1: Generate PKCE parameters\n+\n+Before initiating the flow, the client must generate PKCE parameters:\n+\n+```javascript\n+// Generate a random code verifier (43-128 characters)\n+function generateCodeVerifier() {\n+  const array = new Uint8Array(32)\n+  crypto.getRandomValues(array)\n+  return base64URLEncode(array)\n+}\n+\n+// Create code challenge from verifier\n+async function generateCodeChallenge(verifier) {\n+  const encoder = new TextEncoder()\n+  const data = encoder.encode(verifier)\n+  const hash = await crypto.subtle.digest('SHA-256', data)\n+  return base64URLEncode(new Uint8Array(hash))\n+}\n+\n+function base64URLEncode(buffer) {\n+  return btoa(String.fromCharCode(...buffer))\n+    .replace(/\\+/g, '-')\n+    .replace(/\\//g, '_')\n+    .replace(/=/g, '')\n+}\n+\n+// Generate and store verifier (you'll need it later)\n+const codeVerifier = generateCodeVerifier()\n+sessionStorage.setItem('code_verifier', codeVerifier)\n+\n+// Generate challenge to send in authorization request\n+const codeChallenge = await generateCodeChallenge(codeVerifier)\n+```\n+\n+### Step 2: Authorization request\n+\n+The client redirects the user to your authorization endpoint with the following parameters:\n+\n+```\n+https://<project-ref>.supabase.co/auth/v1/oauth/authorize?\n+  response_type=code\n+  &client_id=<client-id>\n+  &redirect_uri=<configured-redirect-uri>\n+  &state=<random-state>\n+  &code_challenge=<code-challenge>\n+  &code_challenge_method=S256\n+```\n+\n+#### Required parameters\n+\n+| Parameter               | Description                                  |\n+| ----------------------- | -------------------------------------------- |\n+| `response_type`         | Must be `code` for authorization code flow   |\n+| `client_id`             | The client ID from registration              |\n+| `redirect_uri`          | Must exactly match a registered redirect URI |\n+| `code_challenge`        | The generated code challenge                 |\n+| `code_challenge_method` | Must be `S256` (SHA-256)                     |\n+\n+#### Optional parameters\n+\n+| Parameter | Description                                                                                                                                                                                                                                                                                                                  |\n+| --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n+| `state`   | Random string to prevent CSRF attacks (highly recommended)                                                                                                                                                                                                                                                                   |\n+| `scope`   | Space-separated list of scopes (e.g., `openid email profile phone`). Requested scopes will be included in the access token and control what information is returned by the UserInfo endpoint. Default scope when none provided is `email`. If the `openid` scope is requested, an ID token will be included in the response. |\n+| `nonce`   | Random string for replay attack protection. If provided, will be included in the ID token.                                                                                                                                                                                                                                   |\n+\n+<Admonition type=\"caution\">\n+\n+Always include a `state` parameter to protect against CSRF attacks. Generate a random string, store it in session storage, and verify it matches when the user returns.\n+\n+</Admonition>\n+\n+### Step 3: User authentication and consent\n+\n+After receiving the authorization request, Supabase Auth validates the OAuth parameters (client_id, redirect_uri, PKCE, etc.) and then redirects the user to your configured **authorization path** (e.g., `https://example.com/oauth/consent?authorization_id=<id>`).\n+\n+The URL will contain an `authorization_id` query parameter that identifies this authorization request.\n+\n+Your frontend application at the authorization path should:\n+\n+1. **Extract authorization_id** - Get the `authorization_id` from the URL query parameters\n+2. **Fetch authorization details** - Call `supabase.auth.oauth.getAuthorizationDetails(authorization_id)` to retrieve information about the OAuth client and request parameters\n+3. **Check user authentication** - Verify if the user is logged in; if not, redirect to your login page (preserving the full authorization path including the `authorization_id`). After successful login, redirect the user back to the authorization path with the same `authorization_id` query parameter\n+4. **Display consent screen** - Show the user information about the requesting client (name, redirect URI, scopes)\n+5. **Handle user decision** - When the user approves or denies:\n+   - Call `supabase.auth.oauth.approveAuthorization(authorization_id)` to approve\n+   - Call `supabase.auth.oauth.denyAuthorization(authorization_id)` to deny\n+   - Redirect user to the returned `redirect_to` URL\n+\n+This is a **frontend implementation** using `supabase-js`. Supabase Auth handles all the backend OAuth logic (generating authorization codes, validating requests, etc.) after you call the approve/deny methods.\n+\n+See the [Getting Started guide](/docs/guides/auth/oauth-server/getting-started#example-authorization-ui) for complete implementation examples.\n+\n+### Step 4: Authorization code issued\n+\n+If the user approves access, Supabase Auth redirects back to the client's redirect URI with an authorization code:\n+\n+```\n+https://client-app.com/callback?\n+  code=<authorization-code>\n+  &state=<state-from-request>\n+```\n+\n+The authorization code is:\n+\n+- **Short-lived** - Valid for 10 minutes\n+- **Single-use** - Can only be exchanged once\n+- **Bound to PKCE** - Can only be exchanged with the correct code verifier\n+\n+If the user denies access, Supabase Auth redirects with error information in query parameters:\n+\n+```\n+https://client-app.com/callback?\n+  error=access_denied\n+  &error_description=The+user+denied+the+authorization+request\n+  &state=<state-from-request>\n+```\n+\n+The error parameters allow clients to display relevant error messages to users:\n+\n+| Parameter           | Description                                                           |\n+| ------------------- | --------------------------------------------------------------------- |\n+| `error`             | Error code (e.g., `access_denied`, `invalid_request`, `server_error`) |\n+| `error_description` | Human-readable error description explaining what went wrong           |\n+| `state`             | The state parameter from the original request (for CSRF protection)   |\n+\n+### Step 5: Token exchange\n+\n+The client exchanges the authorization code for tokens by making a POST request to the token endpoint:\n+\n+```bash\n+curl -X POST 'https://<project-ref>.supabase.co/auth/v1/oauth/token' \\\n+  -H 'Content-Type: application/x-www-form-urlencoded' \\\n+  -d 'grant_type=authorization_code' \\\n+  -d 'code=<authorization-code>' \\\n+  -d 'client_id=<client-id>' \\\n+  -d 'redirect_uri=<redirect-uri>' \\\n+  -d 'code_verifier=<code-verifier>'\n+```\n+\n+For confidential clients (with client secret):\n+\n+```bash\n+curl -X POST 'https://<project-ref>.supabase.co/auth/v1/oauth/token' \\\n+  -H 'Content-Type: application/x-www-form-urlencoded' \\\n+  -d 'grant_type=authorization_code' \\\n+  -d 'code=<authorization-code>' \\\n+  -d 'client_id=<client-id>' \\\n+  -d 'client_secret=<client-secret>' \\\n+  -d 'redirect_uri=<redirect-uri>' \\\n+  -d 'code_verifier=<code-verifier>'\n+```\n+\n+#### Example in JavaScript\n+\n+```javascript\n+// Retrieve the code verifier from storage\n+const codeVerifier = sessionStorage.getItem('code_verifier')\n+\n+// Exchange code for tokens\n+const response = await fetch(`https://<project-ref>.supabase.co/auth/v1/oauth/token`, {\n+  method: 'POST',\n+  headers: {\n+    'Content-Type': 'application/x-www-form-urlencoded',\n+  },\n+  body: new URLSearchParams({\n+    grant_type: 'authorization_code',\n+    code: authorizationCode,\n+    client_id: '<client-id>',\n+    redirect_uri: '<redirect-uri>',\n+    code_verifier: codeVerifier,\n+  }),\n+})\n+\n+const tokens = await response.json()\n+```\n+\n+### Step 6: Token response\n+\n+On success, Supabase Auth returns a JSON response with tokens:\n+\n+```json\n+{\n+  \"access_token\": \"eyJhbGc...\",\n+  \"token_type\": \"bearer\",\n+  \"expires_in\": 3600,\n+  \"refresh_token\": \"MXff...\",\n+  \"scope\": \"openid email profile\",\n+  \"id_token\": \"eyJhbGc...\"\n+}\n+```\n+\n+| Field           | Description                                                                                          |\n+| --------------- | ---------------------------------------------------------------------------------------------------- |\n+| `access_token`  | JWT access token for accessing resources                                                             |\n+| `token_type`    | Always `bearer`                                                                                      |\n+| `expires_in`    | Token lifetime in seconds (default: 3600)                                                            |\n+| `refresh_token` | Token for obtaining new access tokens                                                                |\n+| `scope`         | Granted scopes from the authorization request                                                        |\n+| `id_token`      | OpenID Connect ID token (included only if `openid` scope was requested in the authorization request) |\n+\n+## Access token structure\n+\n+Access tokens are JWTs containing standard Supabase claims plus OAuth-specific claims:\n+\n+```json\n+{\n+  \"aud\": \"authenticated\",\n+  \"exp\": 1735819200,\n+  \"iat\": 1735815600,\n+  \"iss\": \"https://<project-ref>.supabase.co/auth/v1\",\n+  \"sub\": \"user-uuid\",\n+  \"email\": \"user@example.com\",\n+  \"phone\": \"\",\n+  \"app_metadata\": {\n+    \"provider\": \"email\",\n+    \"providers\": [\"email\"]\n+  },\n+  \"user_metadata\": {},\n+  \"role\": \"authenticated\",\n+  \"aal\": \"aal1\",\n+  \"amr\": [\n+    {\n+      \"method\": \"password\",\n+      \"timestamp\": 1735815600\n+    }\n+  ],\n+  \"session_id\": \"session-uuid\",\n+  \"client_id\": \"9a8b7c6d-5e4f-3a2b-1c0d-9e8f7a6b5c4d\"\n+}\n+```\n+\n+### OAuth-specific claims\n+\n+| Claim       | Description                                  |\n+| ----------- | -------------------------------------------- |\n+| `client_id` | The OAuth client ID that obtained this token |\n+\n+All other claims follow the standard [Supabase JWT structure](/docs/guides/auth/jwts).\n+\n+### Available scopes\n+\n+The following scopes are currently supported:\n+\n+| Scope     | Description                                                                           |\n+| --------- | ------------------------------------------------------------------------------------- |\n+| `openid`  | Enables OpenID Connect. When requested, an ID token will be included in the response. |\n+| `email`   | Grants access to email and email_verified claims                                      |\n+| `profile` | Grants access to profile information (name, picture, etc.)                            |\n+| `phone`   | Grants access to phone_number and phone_number_verified claims                        |\n+\n+**Default scope:** When no scope is specified in the authorization request, the default scope is `email`.\n+\n+Scopes affect what information is included in ID tokens and returned by the UserInfo endpoint. All OAuth access tokens have full access to user data (same as regular session tokens), with the addition of the `client_id` claim. Use Row Level Security policies with the `client_id` claim to control which data each OAuth client can access.\n+\n+<Admonition type=\"note\">\n+\n+**Custom scopes are not currently supported.** Only the standard scopes listed above are available. Support for custom scopes is planned for a future release, which will allow you to define application-specific permissions and fine-grained access control.\n+\n+</Admonition>\n+\n+## Refresh token flow\n+\n+Refresh tokens allow clients to obtain new access tokens without requiring the user to re-authenticate.\n+\n+### When to refresh\n+\n+Clients should refresh access tokens when:\n+\n+- The access token is expired (check the `exp` claim)\n+- The access token is about to expire (proactive refresh)\n+- An API call returns a 401 Unauthorized error\n+\n+### Refresh request\n+\n+Make a POST request to the token endpoint with the refresh token:\n+\n+```bash\n+curl -X POST 'https://<project-ref>.supabase.co/auth/v1/oauth/token' \\\n+  -H 'Content-Type: application/x-www-form-urlencoded' \\\n+  -d 'grant_type=refresh_token' \\\n+  -d 'refresh_token=<refresh-token>' \\\n+  -d 'client_id=<client-id>'\n+```\n+\n+For confidential clients:\n+\n+```bash\n+curl -X POST 'https://<project-ref>.supabase.co/auth/v1/oauth/token' \\\n+  -H 'Content-Type: application/x-www-form-urlencoded' \\\n+  -d 'grant_type=refresh_token' \\\n+  -d 'refresh_token=<refresh-token>' \\\n+  -d 'client_id=<client-id>' \\\n+  -d 'client_secret=<client-secret>'\n+```\n+\n+#### Example in JavaScript\n+\n+```javascript\n+async function refreshAccessToken(refreshToken) {\n+  const response = await fetch(`https://<project-ref>.supabase.co/auth/v1/oauth/token`, {\n+    method: 'POST',\n+    headers: {\n+      'Content-Type': 'application/x-www-form-urlencoded',\n+    },\n+    body: new URLSearchParams({\n+      grant_type: 'refresh_token',\n+      refresh_token: refreshToken,\n+      client_id: '<client-id>',\n+    }),\n+  })\n+\n+  if (!response.ok) {\n+    throw new Error('Failed to refresh token')\n+  }\n+\n+  return await response.json()\n+}\n+```\n+\n+### Refresh response\n+\n+The response contains a new access token and optionally a new refresh token:\n+\n+```json\n+{\n+  \"access_token\": \"eyJhbGc...\",\n+  \"token_type\": \"bearer\",\n+  \"expires_in\": 3600,\n+  \"refresh_token\": \"v1.MXff...\",\n+  \"scope\": \"openid email profile\"\n+}\n+```\n+\n+<Admonition type=\"note\">\n+\n+Refresh tokens may be rotated (a new refresh token is issued). Always update your stored refresh token when a new one is provided.\n+\n+</Admonition>\n+\n+## OpenID Connect (OIDC)\n+\n+Supabase Auth supports OpenID Connect, an identity layer on top of OAuth 2.1.\n+\n+<Admonition type=\"note\">\n+\n+**ID tokens are only included when the `openid` scope is requested.** To receive an ID token, include `openid` in the space-separated list of scopes in your authorization request. ID tokens are valid for 1 hour.\n+\n+</Admonition>\n+\n+### ID tokens\n+\n+ID tokens are JWTs that contain user identity information. They are signed by Supabase Auth and can be verified by clients.\n+\n+The claims included in the ID token depend on the scopes requested during authorization. For example, requesting `openid email profile` will include email and profile-related claims, while requesting only `openid email` will include only email-related claims.\n+\n+#### Example ID token\n+\n+```json\n+{\n+  \"iss\": \"https://<project-ref>.supabase.co/auth/v1\",\n+  \"sub\": \"user-uuid\",\n+  \"aud\": \"client-id\",\n+  \"exp\": 1735819200,\n+  \"iat\": 1735815600,\n+  \"auth_time\": 1735815600,\n+  \"nonce\": \"random-nonce-from-request\",\n+  \"email\": \"user@example.com\",\n+  \"email_verified\": true,\n+  \"phone_number\": \"+1234567890\",\n+  \"phone_number_verified\": false,\n+  \"name\": \"John Doe\",\n+  \"picture\": \"https://example.com/avatar.jpg\"\n+}\n+```\n+\n+#### Standard OIDC claims\n+\n+| Claim                   | Description                                                  |\n+| ----------------------- | ------------------------------------------------------------ |\n+| `sub`                   | Subject (user ID)                                            |\n+| `nonce`                 | The nonce value from the authorization request (if provided) |\n+| `email`                 | User's email address                                         |\n+| `email_verified`        | Whether the email is verified                                |\n+| `phone_number`          | User's phone number                                          |\n+| `phone_number_verified` | Whether the phone is verified                                |\n+| `name`                  | User's full name                                             |\n+| `picture`               | User's profile picture URL                                   |\n+\n+### UserInfo endpoint\n+\n+Clients can retrieve user information by calling the UserInfo endpoint with an access token:\n+\n+```bash\n+curl 'https://<project-ref>.supabase.co/auth/v1/oauth/userinfo' \\\n+  -H 'Authorization: Bearer <access-token>'\n+```\n+\n+The information returned depends on the scopes granted in the access token. For example:\n+\n+**With `email` scope:**\n+\n+```json\n+{\n+  \"sub\": \"user-uuid\",\n+  \"email\": \"user@example.com\",\n+  \"email_verified\": true\n+}\n+```\n+\n+**With `email profile phone` scopes:**\n+\n+```json\n+{\n+  \"sub\": \"user-uuid\",\n+  \"email\": \"user@example.com\",\n+  \"email_verified\": true,\n+  \"phone_number\": \"+1234567890\",\n+  \"phone_number_verified\": false,\n+  \"name\": \"John Doe\",\n+  \"picture\": \"https://example.com/avatar.jpg\"\n+}\n+```\n+\n+### OIDC discovery\n+\n+Supabase Auth exposes OpenID Connect and OAuth 2.1 discovery endpoints that describe its capabilities:\n+\n+```\n+https://<project-ref>.supabase.co/auth/v1/.well-known/openid-configuration\n+https://<project-ref>.supabase.co/auth/v1/.well-known/oauth-authorization-server\n+```\n+\n+<Admonition type=\"note\">\n+\n+Both endpoints return the same metadata and can be used interchangeably. They are provided for compatibility with different OAuth and OIDC clients that may expect one or the other.\n+\n+</Admonition>\n+\n+These endpoints return metadata about:\n+\n+- Available endpoints (authorization, token, userinfo, JWKS)\n+- Supported grant types and response types\n+- Supported scopes and claims\n+- Token signing algorithms\n+\n+This enables automatic integration with OIDC-compliant libraries and tools.\n+\n+## Token validation\n+\n+Third-party clients should validate access tokens to ensure they're authentic and not tampered with.\n+\n+<Admonition type=\"tip\">\n+\n+**Recommended: Use asymmetric JWT signing keys**\n+\n+For OAuth implementations, we strongly recommend using asymmetric signing algorithms (RS256 or ES256) instead of the default HS256. With asymmetric keys, third-party clients can validate JWTs using the public key from your JWKS endpoint without needing access to your JWT secret. This is more secure, scalable, and follows OAuth best practices.\n+\n+Learn how to [configure asymmetric JWT signing keys](/docs/guides/auth/signing-keys) in your project.\n+\n+</Admonition>\n+\n+<Admonition type=\"caution\">\n+\n+**ID tokens require asymmetric signing algorithms**\n+\n+If you request the `openid` scope to receive ID tokens, your project must be configured to use asymmetric signing algorithms (RS256 or ES256). ID token generation will fail with an error if your project is still using the default HS256 symmetric algorithm. This is a security requirement of the OpenID Connect specification.\n+\n+</Admonition>\n+\n+### JWKS endpoint\n+\n+Supabase Auth exposes a JSON Web Key Set (JWKS) endpoint containing public keys for token verification:\n+\n+```\n+https://<project-ref>.supabase.co/auth/v1/.well-known/jwks.json\n+```\n+\n+Example response:\n+\n+```json\n+{\n+  \"keys\": [\n+    {\n+      \"kty\": \"RSA\",\n+      \"kid\": \"key-id\",\n+      \"use\": \"sig\",\n+      \"alg\": \"RS256\",\n+      \"n\": \"...\",\n+      \"e\": \"AQAB\"\n+    }\n+  ]\n+}\n+```\n+\n+### Validating tokens\n+\n+Use a JWT library to verify tokens:\n+\n+<Tabs\n+  scrollable\n+  size=\"small\"\n+  type=\"underlined\"\n+  defaultActiveId=\"node\"\n+  queryGroup=\"language\"\n+>\n+<TabPanel id=\"node\" label=\"Node.js\">\n+\n+```javascript\n+import { createRemoteJWKSet, jwtVerify } from 'jose'\n+\n+const JWKS = createRemoteJWKSet(\n+  new URL('https://<project-ref>.supabase.co/auth/v1/.well-known/jwks.json')\n+)\n+\n+async function verifyAccessToken(token) {\n+  try {\n+    const { payload } = await jwtVerify(token, JWKS, {\n+      issuer: 'https://<project-ref>.supabase.co/auth/v1',\n+      audience: 'authenticated',\n+    })\n+    return payload\n+  } catch (error) {\n+    console.error('Token verification failed:', error)\n+    return null\n+  }\n+}\n+```\n+\n+</TabPanel>\n+<TabPanel id=\"python\" label=\"Python\">\n+\n+```python\n+from jose import jwt\n+from jose.backends import RSAKey\n+import requests\n+\n+# Fetch JWKS\n+jwks = requests.get('https://<project-ref>.supabase.co/auth/v1/.well-known/jwks.json').json()\n+\n+def verify_access_token(token):\n+    try:\n+        payload = jwt.decode(\n+            token,\n+            jwks,\n+            algorithms=['RS256'],\n+            issuer='https://<project-ref>.supabase.co/auth/v1',\n+            audience='authenticated'\n+        )\n+        return payload\n+    except jwt.JWTError as e:\n+        print(f'Token verification failed: {e}')\n+        return None\n+```\n+\n+</TabPanel>\n+<TabPanel id=\"go\" label=\"Go\">\n+\n+```go\n+package main\n+\n+import (\n+    \"context\"\n+    \"github.com/coreos/go-oidc/v3/oidc\"\n+)\n+\n+func verifyAccessToken(ctx context.Context, token string) (*oidc.IDToken, error) {\n+    provider, err := oidc.NewProvider(\n+        ctx,\n+        \"https://<project-ref>.supabase.co/auth/v1\",\n+    )\n+    if err != nil {\n+        return nil, err\n+    }\n+\n+    verifier := provider.Verifier(&oidc.Config{\n+        ClientID: \"authenticated\",\n+    })\n+\n+    return verifier.Verify(ctx, token)\n+}\n+```\n+\n+</TabPanel>\n+</Tabs>\n+\n+### What to validate\n+\n+Always verify:\n+\n+1. **Signature** - Token is signed by Supabase Auth\n+2. **Issuer** (`iss`) - Matches your project URL\n+3. **Audience** (`aud`) - Is `authenticated`\n+4. **Expiration** (`exp`) - Token is not expired\n+5. **Client ID** (`client_id`) - Matches your client (if applicable)\n+\n+## Managing user grants\n+\n+Users can view and manage the OAuth applications they've authorized to access their account. This is important for transparency and security, allowing users to audit and revoke access when needed.\n+\n+### Viewing authorized applications\n+\n+Users can retrieve a list of all OAuth clients they've authorized:\n+\n+```javascript\n+const { data: grants, error } = await supabase.auth.oauth.getUserGrants()\n+\n+if (error) {\n+  console.error('Error fetching grants:', error)\n+} else {\n+  console.log('Authorized applications:', grants)\n+}\n+```\n+\n+The response includes details about each authorized OAuth client:\n+\n+```json\n+[\n+  {\n+    \"id\": \"grant-uuid\",\n+    \"client_id\": \"9a8b7c6d-5e4f-3a2b-1c0d-9e8f7a6b5c4d\",\n+    \"client_name\": \"My Third-Party App\",\n+    \"scopes\": [\"email\", \"profile\"],\n+    \"created_at\": \"2025-01-15T10:30:00.000Z\",\n+    \"updated_at\": \"2025-01-15T10:30:00.000Z\"\n+  }\n+]\n+```\n+\n+### Revoking access\n+\n+Users can revoke access for a specific OAuth client at any time. When access is revoked, all active sessions and refresh tokens for that client are immediately invalidated:\n+\n+```javascript\n+const { error } = await supabase.auth.oauth.revokeGrant(clientId)\n+\n+if (error) {\n+  console.error('Error revoking access:', error)\n+} else {\n+  console.log('Access revoked successfully')\n+}\n+```\n+\n+After revoking access:\n+\n+- All refresh tokens for that client are deleted\n+- The user will need to re-authorize the application to grant access again\n+\n+<Admonition type=\"tip\">\n+\n+**Build a settings page for your users**\n+\n+It's a good practice to provide a settings page where users can view all authorized applications and revoke access to any they no longer trust or use. This increases transparency and gives users control over their data.\n+\n+</Admonition>\n+\n+For complete API reference, see the [OAuth methods in supabase-js](/docs/reference/javascript/auth-oauth).\n+\n+## Next steps\n+\n+- [Implement MCP authentication](/docs/guides/auth/oauth-server/mcp-authentication) - Enable AI agent authentication\n+- [Secure with RLS](/docs/guides/auth/oauth-server/token-security) - Control data access for OAuth clients\n+- [Learn about JWTs](/docs/guides/auth/jwts) - Understand Supabase token structure\ndiff --git a/apps/docs/content/guides/auth/oauth-server/token-security.mdx b/apps/docs/content/guides/auth/oauth-server/token-security.mdx\nnew file mode 100644\nindex 0000000000000..e5ca8da24ea41\n--- /dev/null\n+++ b/apps/docs/content/guides/auth/oauth-server/token-security.mdx\n@@ -0,0 +1,446 @@\n+---\n+id: 'oauth-server-token-security'\n+title: 'Token Security and Row Level Security'\n+description: 'Secure your data with Row Level Security policies for OAuth clients'\n+---\n+\n+When you enable OAuth 2.1 in your Supabase project, third-party applications can access user data on their behalf. Row Level Security (RLS) policies are crucial for controlling exactly what data each OAuth client can access.\n+\n+<Admonition type=\"caution\">\n+\n+**Scopes control OIDC data, not database access**\n+\n+The OAuth scopes (`openid`, `email`, `profile`, `phone`) control what user information is included in ID tokens and returned by the UserInfo endpoint. They do **not** control access to your database tables or API endpoints.\n+\n+Use RLS to define which OAuth clients can access which data, regardless of the scopes they requested.\n+\n+</Admonition>\n+\n+## How OAuth tokens work with RLS\n+\n+OAuth access tokens issued by Supabase Auth are JWTs that include all standard Supabase claims plus OAuth-specific claims. This means your existing RLS policies continue to work, and you can add OAuth-specific logic to create granular access controls.\n+\n+### Token structure\n+\n+Every OAuth access token includes:\n+\n+```json\n+{\n+  \"sub\": \"user-uuid\",\n+  \"role\": \"authenticated\",\n+  \"aud\": \"authenticated\",\n+  \"user_id\": \"user-uuid\",\n+  \"email\": \"user@example.com\",\n+  \"client_id\": \"9a8b7c6d-5e4f-3a2b-1c0d-9e8f7a6b5c4d\",\n+  \"aal\": \"aal1\",\n+  \"amr\": [{ \"method\": \"password\", \"timestamp\": 1735815600 }],\n+  \"session_id\": \"session-uuid\",\n+  \"iss\": \"https://<project-ref>.supabase.co/auth/v1\",\n+  \"iat\": 1735815600,\n+  \"exp\": 1735819200\n+}\n+```\n+\n+The key OAuth-specific claim is:\n+\n+| Claim       | Description                                                    |\n+| ----------- | -------------------------------------------------------------- |\n+| `client_id` | Unique identifier of the OAuth client that obtained this token |\n+\n+You can use this claim in RLS policies to grant different permissions to different clients.\n+\n+## Extracting OAuth claims in RLS\n+\n+Use the `auth.jwt()` function to access token claims in your policies:\n+\n+```sql\n+-- Get the client ID from the token\n+(auth.jwt() ->> 'client_id')\n+\n+-- Check if the token is from an OAuth client\n+(auth.jwt() ->> 'client_id') IS NOT NULL\n+\n+-- Check if the token is from a specific client\n+(auth.jwt() ->> 'client_id') = 'mobile-app-client-id'\n+```\n+\n+## Common RLS patterns for OAuth\n+\n+### Pattern 1: Grant specific client full access\n+\n+Allow a specific OAuth client to access all user data:\n+\n+```sql\n+CREATE POLICY \"Mobile app can access user data\"\n+ON user_data FOR ALL\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') = 'mobile-app-client-id'\n+);\n+```\n+\n+### Pattern 2: Grant multiple clients read-only access\n+\n+Allow several OAuth clients to read data, but not modify it:\n+\n+```sql\n+CREATE POLICY \"Third-party apps can read profiles\"\n+ON profiles FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') IN (\n+    'analytics-client-id',\n+    'reporting-client-id',\n+    'dashboard-client-id'\n+  )\n+);\n+```\n+\n+### Pattern 3: Restrict sensitive data from OAuth clients\n+\n+Prevent OAuth clients from accessing sensitive data:\n+\n+```sql\n+CREATE POLICY \"OAuth clients cannot access payment info\"\n+ON payment_methods FOR ALL\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') IS NULL  -- Only direct user sessions\n+);\n+```\n+\n+### Pattern 4: Client-specific data access\n+\n+Different clients access different subsets of data:\n+\n+```sql\n+-- Analytics client can only read aggregated data\n+CREATE POLICY \"Analytics client reads summaries\"\n+ON user_metrics FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') = 'analytics-client-id'\n+);\n+\n+-- Admin client can read and modify all data\n+CREATE POLICY \"Admin client full access\"\n+ON user_data FOR ALL\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') = 'admin-client-id'\n+);\n+```\n+\n+## Real-world examples\n+\n+### Example 1: Multi-platform application\n+\n+You have a web app, mobile app, and third-party integrations:\n+\n+```sql\n+-- Web app: Full access\n+CREATE POLICY \"Web app full access\"\n+ON profiles FOR ALL\n+USING (\n+  auth.uid() = user_id AND\n+  (\n+    (auth.jwt() ->> 'client_id') = 'web-app-client-id'\n+    OR (auth.jwt() ->> 'client_id') IS NULL  -- Direct user sessions\n+  )\n+);\n+\n+-- Mobile app: Read-only access to profiles\n+CREATE POLICY \"Mobile app reads profiles\"\n+ON profiles FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') = 'mobile-app-client-id'\n+);\n+\n+-- Third-party integration: Limited data access\n+CREATE POLICY \"Integration reads public data\"\n+ON profiles FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') = 'integration-client-id' AND\n+  is_public = true\n+);\n+```\n+\n+## Custom access token hooks\n+\n+[Custom Access Token Hooks](/docs/guides/auth/auth-hooks/custom-access-token-hook) work with OAuth tokens, allowing you to inject custom claims based on the OAuth client. This is particularly useful for customizing standard JWT claims like `audience` (`aud`) or adding client-specific metadata.\n+\n+<Admonition type=\"note\">\n+\n+Custom Access Token Hooks are triggered for **all** token issuance. Use `client_id` or `authentication_method` (`oauth_provider/authorization_code` for OAuth flows) to differentiate OAuth from regular authentication.\n+\n+</Admonition>\n+\n+### Customizing the audience claim\n+\n+A common use case is customizing the `audience` claim for different OAuth clients. This allows third-party services to validate that tokens were issued specifically for them:\n+\n+```typescript\n+import { serve } from 'https://deno.land/std@0.168.0/http/server.ts'\n+\n+serve(async (req) => {\n+  const { user, claims, client_id } = await req.json()\n+\n+  // Customize audience based on OAuth client\n+  if (client_id === 'mobile-app-client-id') {\n+    return new Response(\n+      JSON.stringify({\n+        claims: {\n+          aud: 'https://api.myapp.com',\n+          app_version: '2.0.0',\n+        },\n+      }),\n+      { headers: { 'Content-Type': 'application/json' } }\n+    )\n+  }\n+\n+  if (client_id === 'analytics-partner-id') {\n+    return new Response(\n+      JSON.stringify({\n+        claims: {\n+          aud: 'https://analytics.partner.com',\n+          access_level: 'read-only',\n+        },\n+      }),\n+      { headers: { 'Content-Type': 'application/json' } }\n+    )\n+  }\n+\n+  // Default audience for non-OAuth flows\n+  return new Response(JSON.stringify({ claims: {} }), {\n+    headers: { 'Content-Type': 'application/json' },\n+  })\n+})\n+```\n+\n+The `audience` claim is especially important for:\n+\n+- **JWT validation by third parties**: Services can verify tokens were issued for their specific API\n+- **Multi-tenant applications**: Different audiences for different client applications\n+- **Compliance**: Meeting security requirements that mandate audience validation\n+\n+### Adding client-specific claims\n+\n+You can also add custom claims and metadata based on the OAuth client:\n+\n+```typescript\n+import { serve } from 'https://deno.land/std@0.168.0/http/server.ts'\n+import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'\n+\n+serve(async (req) => {\n+  const { user, claims, client_id } = await req.json()\n+\n+  const supabase = createClient(Deno.env.get('SUPABASE_URL')!, Deno.env.get('SUPABASE_SECRET_KEY')!)\n+\n+  // Add custom claims based on OAuth client\n+  let customClaims = {}\n+\n+  if (client_id === 'mobile-app-client-id') {\n+    customClaims.aud = 'https://mobile.myapp.com'\n+    customClaims.app_version = '2.0.0'\n+    customClaims.platform = 'mobile'\n+  } else if (client_id === 'analytics-client-id') {\n+    customClaims.aud = 'https://analytics.myapp.com'\n+    customClaims.read_only = true\n+    customClaims.data_retention_days = 90\n+  } else if (client_id?.startsWith('mcp-')) {\n+    // MCP AI agents\n+    const { data: agent } = await supabase\n+      .from('approved_ai_agents')\n+      .select('name, max_data_retention_days')\n+      .eq('client_id', client_id)\n+      .single()\n+\n+    customClaims.aud = `https://mcp.myapp.com/${client_id}`\n+    customClaims.ai_agent = true\n+    customClaims.agent_name = agent?.name\n+    customClaims.max_retention = agent?.max_data_retention_days\n+  }\n+\n+  return new Response(JSON.stringify({ claims: customClaims }), {\n+    headers: { 'Content-Type': 'application/json' },\n+  })\n+})\n+```\n+\n+Use these custom claims in RLS:\n+\n+```sql\n+-- Policy based on custom claims\n+CREATE POLICY \"Read-only clients cannot modify\"\n+ON user_data FOR UPDATE\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() -> 'user_metadata' ->> 'read_only')::boolean IS NOT TRUE\n+);\n+\n+-- Policy based on audience claim\n+CREATE POLICY \"Only specific audience can access\"\n+ON api_data FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'aud') IN (\n+    'https://api.myapp.com',\n+    'https://mobile.myapp.com'\n+  )\n+);\n+```\n+\n+## Security best practices\n+\n+### 1. Principle of least privilege\n+\n+Grant OAuth clients only the minimum permissions they need:\n+\n+```sql\n+-- Bad: Grant all access by default\n+CREATE POLICY \"OAuth clients full access\"\n+ON user_data FOR ALL\n+USING (auth.uid() = user_id);\n+\n+-- Good: Grant specific access per client\n+CREATE POLICY \"Specific client specific access\"\n+ON user_data FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') = 'trusted-client-id'\n+);\n+```\n+\n+### 2. Separate policies for OAuth clients\n+\n+Create dedicated policies for OAuth clients rather than mixing them with user policies:\n+\n+```sql\n+-- User access\n+CREATE POLICY \"Users access their own data\"\n+ON user_data FOR ALL\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') IS NULL\n+);\n+\n+-- OAuth client access (separate policy)\n+CREATE POLICY \"OAuth clients limited access\"\n+ON user_data FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') IN ('client-1', 'client-2')\n+);\n+```\n+\n+### 3. Regularly audit OAuth clients\n+\n+Track and review which clients have access:\n+\n+```sql\n+-- View all active OAuth clients\n+SELECT\n+  oc.client_id,\n+  oc.name,\n+  oc.created_at,\n+  COUNT(DISTINCT s.user_id) as active_users\n+FROM auth.oauth_clients oc\n+LEFT JOIN auth.sessions s ON s.client_id = oc.client_id\n+WHERE s.created_at > NOW() - INTERVAL '30 days'\n+GROUP BY oc.client_id, oc.name, oc.created_at;\n+```\n+\n+## Testing your policies\n+\n+Always test your RLS policies before deploying to production:\n+\n+```sql\n+-- Test as a specific OAuth client\n+SET request.jwt.claims = '{\n+  \"sub\": \"test-user-uuid\",\n+  \"role\": \"authenticated\",\n+  \"client_id\": \"test-client-id\"\n+}';\n+\n+-- Test queries\n+SELECT * FROM user_data WHERE user_id = 'test-user-uuid';\n+\n+-- Reset\n+RESET request.jwt.claims;\n+```\n+\n+Or use the Supabase Dashboard's [RLS policy tester](/dashboard/project/_/auth/policies).\n+\n+## Troubleshooting\n+\n+### Policy not working for OAuth client\n+\n+**Problem**: OAuth client can't access data despite having a valid token.\n+\n+**Check**:\n+\n+1. Verify the policy includes the client's `client_id`\n+2. Ensure RLS is enabled on the table\n+3. Check for conflicting restrictive policies\n+4. Test with service role key to isolate RLS issues\n+\n+```sql\n+-- Debug: See what client_id is in the token\n+SELECT auth.jwt() ->> 'client_id';\n+\n+-- Debug: Test without RLS\n+SET LOCAL role = service_role;\n+SELECT * FROM your_table;\n+```\n+\n+### Policy too permissive\n+\n+**Problem**: OAuth client has access to data it shouldn't.\n+\n+**Solution**: Use `AS RESTRICTIVE` policies to add additional constraints:\n+\n+```sql\n+-- This policy runs in addition to permissive policies\n+CREATE POLICY \"Restrict OAuth clients\"\n+ON sensitive_data\n+AS RESTRICTIVE\n+FOR ALL\n+TO authenticated\n+USING (\n+  -- OAuth clients cannot access this table at all\n+  (auth.jwt() ->> 'client_id') IS NULL\n+);\n+```\n+\n+### Can't differentiate between users and OAuth clients\n+\n+**Problem**: Need to apply different logic for direct user sessions vs OAuth.\n+\n+**Solution**: Check if `client_id` is present:\n+\n+```sql\n+-- Direct user sessions (no OAuth)\n+CREATE POLICY \"Direct users full access\"\n+ON user_data FOR ALL\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') IS NULL\n+);\n+\n+-- OAuth clients (limited access)\n+CREATE POLICY \"OAuth clients read only\"\n+ON user_data FOR SELECT\n+USING (\n+  auth.uid() = user_id AND\n+  (auth.jwt() ->> 'client_id') IS NOT NULL\n+);\n+```\n+\n+## Next steps\n+\n+- [Learn about JWTs](/docs/guides/auth/jwts) - Deep dive into Supabase token structure\n+- [Row Level Security](/docs/guides/auth/row-level-security) - Complete RLS guide\n+- [Custom Access Token Hooks](/docs/guides/auth/auth-hooks/custom-access-token-hook) - Inject custom claims\n+- [OAuth flows](/docs/guides/auth/oauth-server/oauth-flows) - Understand token issuance\ndiff --git a/apps/docs/content/guides/auth/redirect-urls.mdx b/apps/docs/content/guides/auth/redirect-urls.mdx\nindex fb9d07676cbac..1175fd86dd6a4 100644\n--- a/apps/docs/content/guides/auth/redirect-urls.mdx\n+++ b/apps/docs/content/guides/auth/redirect-urls.mdx\n@@ -9,6 +9,14 @@ subtitle: 'Set up redirect urls with Supabase Auth.'\n \n Supabase Auth allows you to control how the [user sessions](/docs/guides/auth/sessions) are handled by your application.\n \n+<Admonition type=\"note\">\n+\n+**Looking for OAuth client redirect URIs?**\n+\n+This guide covers redirect URLs for users signing **into** your application (using social providers like Google, GitHub, etc.). If you're setting up your Supabase project as an **OAuth 2.1 provider** for third-party applications, see the [OAuth Server Redirect URI configuration](/docs/guides/auth/oauth-server/getting-started#redirect-uri-configuration) instead.\n+\n+</Admonition>\n+\n When using [passwordless sign-ins](/docs/reference/javascript/auth-signinwithotp) or [third-party providers](/docs/reference/javascript/auth-signinwithoauth#sign-in-using-a-third-party-provider-with-redirect), the Supabase client library provides a `redirectTo` parameter to specify where to redirect the user after authentication. The URL in `redirectTo` should match the [Redirect URLs](/dashboard/project/_/auth/url-configuration) list configuration.\n \n To configure allowed redirect URLs, go to the [URL Configuration](/dashboard/project/_/auth/url-configuration) page. Once you've added necessary URLs, you can use the URL you want the user to be redirected to in the `redirectTo` parameter.\ndiff --git a/supa-mdx-lint/Rule001HeadingCase.toml b/supa-mdx-lint/Rule001HeadingCase.toml\nindex 5e559e3a6529f..e046d71d57f2e 100644\n--- a/supa-mdx-lint/Rule001HeadingCase.toml\n+++ b/supa-mdx-lint/Rule001HeadingCase.toml\n@@ -135,6 +135,7 @@ may_uppercase = [\n     \"Marketplace\",\n     \"Mixpeek\",\n     \"Mixpeek Embed\",\n+    \"Model Context Protocol\",\n     \"MySQL\",\n     \"Navigable Small World\",\n     \"Neon\",\n@@ -146,6 +147,7 @@ may_uppercase = [\n     \"Okta\",\n     \"Ollama\",\n     \"OpenAI\",\n+    \"OpenID Connect\",\n     \"Open ID Connect\",\n     \"OrbStack\",\n     \"OrioleDB\",\ndiff --git a/supa-mdx-lint/Rule003Spelling.toml b/supa-mdx-lint/Rule003Spelling.toml\nindex bb972d24e2135..c8d32266ab1ee 100644\n--- a/supa-mdx-lint/Rule003Spelling.toml\n+++ b/supa-mdx-lint/Rule003Spelling.toml\n@@ -22,6 +22,7 @@ allow_list = [\n     \"[A-Za-z0-9_-]+(\\\\.[A-Z-a-z0-9_-]+)+(\\\\/[A-Za-z0-9_-]+)*\",\n     \"[Aa]dd-ons?\",\n     \"[Aa]llowlists?\",\n+    \"[Aa]uditability\",\n     \"[Aa]utomations?\",\n     \"[Aa]utovacuum(s|ing|ed)?\",\n     \"[Bb]ackend\",\n@@ -181,6 +182,7 @@ allow_list = [\n     \"Erlang\",\n     \"ESZip\",\n     \"Ethereum\",\n+    \"FastMCP\",\n     \"Fiberplane\",\n     \"Figma\",\n     \"Firestore\",\n@@ -312,6 +314,7 @@ allow_list = [\n     \"Uppy\",\n     \"Upstash\",\n     \"[Uu]pvote(s|d)?\",\n+    \"userinfo\",\n     \"VSCode\",\n     \"Vecs\",\n     \"Vercel\",\n@@ -396,6 +399,7 @@ allow_list = [\n     \"uBlock Origin\",\n     \"unbilled\",\n     \"untrusted\",\n+    \"UserInfo\",\n     \"vCPUs\",\n     \"vecs\",\n     \"vs\",\n",
			"diffSize": 87894,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "9daecf842a4c860a2d4a410bf54717fe878fffc8",
			"message": "docs(mgmt-api): Rate Limits (#40785)",
			"user": "raulb",
			"timestamp": "2025-11-26T10:16:04Z",
			"author": {
				"name": "Raúl Barroso",
				"email": "code@raulb.dev",
				"username": "raulb"
			},
			"files": {
				"added": ["apps/docs/content/_partials/api_rate_limits.mdx"],
				"modified": ["apps/docs/docs/ref/api/introduction.mdx"],
				"removed": ["apps/docs/docs/ref/api/api.mdx"]
			},
			"diff": "diff --git a/apps/docs/content/_partials/api_rate_limits.mdx b/apps/docs/content/_partials/api_rate_limits.mdx\nnew file mode 100644\nindex 0000000000000..1ff3700088734\n--- /dev/null\n+++ b/apps/docs/content/_partials/api_rate_limits.mdx\n@@ -0,0 +1,65 @@\n+## Rate limits\n+\n+Rate limits are applied to prevent abuse and ensure fair usage of the Management API. Rate limits are based on a per-user, per-scope model, meaning each user gets independent rate limits for each project and organization they interact with.\n+\n+### Standard rate limit\n+\n+| Limit        | Duration | Scope                              |\n+| ------------ | -------- | ---------------------------------- |\n+| 120 requests | 1 minute | Per user, per project/organization |\n+\n+When you exceed this rate limit, all subsequent API calls will return a `429 Too Many Requests` response for the remainder of the minute. Once the time window expires, your request quota resets and you can make requests again.\n+\n+### Rate limit scope\n+\n+Rate limits are applied with per-user + per-scope isolation:\n+\n+- **Project scope**: Rate limits apply independently to each project. Requests to one project do not count toward the limit of another project.\n+- **Organization scope**: Rate limits apply independently to each organization. Requests to one organization do not count toward the limit of another organization.\n+\n+This means you can make 120 requests to Project A and 120 requests to Project B within the same minute without hitting rate limits, as they are tracked separately.\n+\n+### Rate limit response headers\n+\n+Every API response includes rate limit information in the following headers:\n+\n+- `X-RateLimit-Limit` - The maximum number of requests allowed in the current time window\n+- `X-RateLimit-Remaining` - The number of requests remaining before you hit the rate limit\n+- `X-RateLimit-Reset` - The number of milliseconds remaining until your rate limit resets\n+\n+You can use these headers to monitor your usage and implement proactive rate limit handling before receiving a 429 response.\n+\n+### How rate limits are tracked\n+\n+Your requests are identified and tracked using one of the following identifiers, in this order of priority:\n+\n+1. **OAuth App ID** - If your request is authenticated via an OAuth application\n+2. **User ID** - If your request is authenticated with a personal access token\n+3. **IP Address** - If your request is unauthenticated (extracted from request headers)\n+\n+Each identifier is combined with the scope (project or organization) to create a unique tracking key. This ensures that rate limits are isolated per user and per scope, preventing one project or organization from affecting another.\n+\n+### Endpoint exceptions\n+\n+Some endpoints have stricter rate limits than the standard 120 requests per minute to prevent abuse of resource-intensive operations:\n+\n+| Endpoint                                                   | Limit       | Duration | Reason                                              |\n+| ---------------------------------------------------------- | ----------- | -------- | --------------------------------------------------- |\n+| `GET /v1/projects/:ref/endpoints/logs.all`                 | 30 requests | 1 minute | Analytics log queries are computationally expensive |\n+| `GET /v1/projects/:ref/endpoints/usage.api-counts`         | 30 requests | 1 minute | Analytics aggregation is computationally expensive  |\n+| `GET /v1/projects/:ref/endpoints/usage.api-requests-count` | 30 requests | 1 minute | Analytics aggregation is computationally expensive  |\n+| `GET /v1/projects/:ref/database/context`                   | 10 requests | 1 minute | Database context operations are resource-intensive  |\n+| `GET /v1/projects/:ref/database/context`                   | 1 request   | 1 second | Burst limit to prevent rapid successive requests    |\n+| `POST /v1/projects/:ref/config/custom-hostname/initialize` | 10 requests | 1 minute | These operations are expensive                      |\n+| `POST /v1/projects/:ref/config/custom-hostname/reverify`   | 10 requests | 1 minute | These operations are expensive                      |\n+| `DELETE /v1/projects/:ref/config/custom-hostname`          | 10 requests | 1 minute | These operations are expensive                      |\n+| `GET /v1/projects/:ref/config/vanity-subdomain`            | 10 requests | 1 minute | These operations are expensive                      |\n+\n+**Note:** The `GET /v1/projects/:ref/database/context` endpoint has dual rate limiting. You can make up to 10 requests per minute, but also no more than 1 request per second to prevent burst traffic.\n+\n+### Best practices\n+\n+- **Monitor rate limit headers** - Check the `X-RateLimit-Remaining` header to see how many requests you have left. When it approaches 0, slow down your requests to avoid hitting the limit.\n+- **Implement exponential backoff** - When you receive a 429 response, wait before retrying. You can use the `X-RateLimit-Reset` header (milliseconds) to determine exactly how long to wait.\n+- **Batch operations** - Where possible, combine multiple operations into fewer API calls to reduce your request count.\n+- **Be mindful of expensive endpoints** - Analytics, database context, and domain endpoints have stricter limits, so use them judiciously.\ndiff --git a/apps/docs/docs/ref/api/api.mdx b/apps/docs/docs/ref/api/api.mdx\ndeleted file mode 100644\nindex c1764683dd31a..0000000000000\n--- a/apps/docs/docs/ref/api/api.mdx\n+++ /dev/null\n@@ -1,37 +0,0 @@\n----\n-slug: /\n-sidebar_position: 1\n-id: management-api\n-title: Management API\n-sidebar_label: Management API\n----\n-\n-The Management API allows you to manage your projects programmatically.\n-\n-## Authentication\n-\n-All API requests require a Supabase Personal token to be included in the Authorization header: `Authorization: Bearer <supabase_personal_token>`.\n-To generate or manage your API token, visit your [account](https://supabase.com/dashboard/account/tokens) page.\n-Your API tokens carry the same privileges as your user account, so be sure to keep it secret.\n-\n-```bash\n-$ curl https://api.supabase.com/v1/projects \\\n--H \"Authorization: Bearer sbp_bdd0••••••••••••••••••••••••••••••••4f23\"\n-```\n-\n-All API requests must be authenticated and made over HTTPS.\n-\n-## Rate limits\n-\n-The rate limit for Management API is 120 requests per one minute per user, and applies cumulatively across all requests made with your personal access tokens.\n-\n-If you exceed this limit, all Management API calls for the next minute will be blocked, resulting in a HTTP 429 response.\n-\n-The Management API is subject to our fair-use policy.\n-All resources created via the API are subject to the pricing detailed on our [Pricing](https://supabase.com/pricing) pages.\n-\n-## Additional links\n-\n-- [OpenAPI Docs](https://api.supabase.com/api/v1)\n-- [OpenAPI Spec](https://api.supabase.com/api/v1-json)\n-- Reporting bugs and issues: [github.com/supabase/supabase](https://github.com/supabase/supabase)\ndiff --git a/apps/docs/docs/ref/api/introduction.mdx b/apps/docs/docs/ref/api/introduction.mdx\nindex 638f39b6d53f1..d865e2cdca795 100644\n--- a/apps/docs/docs/ref/api/introduction.mdx\n+++ b/apps/docs/docs/ref/api/introduction.mdx\n@@ -36,16 +36,11 @@ hideTitle: true\n         -H \"Authorization: Bearer sbp_bdd0••••••••••••••••••••••••••••••••4f23\"\n       ```\n \n-      All API requests must be authenticated and made over HTTPS.\n+      All API requests must be authenticated and made over HTTPS foo.\n \n-      ## Rate limits\n+      <$Partial path=\"api_rate_limits.mdx\" />\n \n-      The rate limit for Management API is 120 requests per one minute per user, and applies cumulatively across all requests made with your personal access tokens.\n-\n-      If you exceed this limit, all Management API calls for the next minute will be blocked, resulting in a HTTP 429 response.\n-\n-      The Management API is subject to our fair-use policy.\n-      All resources created via the API are subject to the pricing detailed on our [Pricing](https://supabase.com/pricing) pages.\n+      The Management API is subject to our fair-use policy. All resources created via the API are subject to the pricing detailed on our [Pricing](https://supabase.com/pricing) pages.\n \n     </RefSubLayout.Details>\n \n",
			"diffSize": 8265,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "67aeef642046f19db9bc5ca8c91dc0194cda6920",
			"message": "ref(etl): Refine docs (#40823)",
			"user": "iambriccardo",
			"timestamp": "2025-11-26T09:29:19Z",
			"author": {
				"name": "Riccardo Busetti",
				"email": "riccardo.busetti@supabase.io",
				"username": "iambriccardo"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/docs/content/guides/database/replication/replication-monitoring.mdx",
					"apps/docs/content/guides/database/replication/replication-setup.mdx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/docs/content/guides/database/replication/replication-monitoring.mdx b/apps/docs/content/guides/database/replication/replication-monitoring.mdx\nindex 860ab2314b5de..4f6baf0444c51 100644\n--- a/apps/docs/content/guides/database/replication/replication-monitoring.mdx\n+++ b/apps/docs/content/guides/database/replication/replication-monitoring.mdx\n@@ -94,6 +94,12 @@ When a table encounters an error during the copy phase, you can reset the table\n \n Pipeline errors occur during the streaming phase (Live state) and affect the entire pipeline. When streaming data, if an error occurs, the entire pipeline will stop and enter a **Failed** state. This prevents data loss by ensuring no changes are skipped.\n \n+<Admonition type=\"note\">\n+\n+When a pipeline error occurs, you'll receive an email notification immediately. This ensures you're promptly notified of any issues so you can take action to resolve them.\n+\n+</Admonition>\n+\n <Image\n   alt=\"Pipeline Error Details\"\n   src=\"/docs/img/database/replication/replication-pipeline-error.png\"\ndiff --git a/apps/docs/content/guides/database/replication/replication-setup.mdx b/apps/docs/content/guides/database/replication/replication-setup.mdx\nindex 7fd6b5581a763..4ca941730017c 100644\n--- a/apps/docs/content/guides/database/replication/replication-setup.mdx\n+++ b/apps/docs/content/guides/database/replication/replication-setup.mdx\n@@ -40,7 +40,7 @@ create publication pub_users_orders\n for table users, orders;\n ```\n \n-This publication will track all changes (INSERT, UPDATE, DELETE) for both the `users` and `orders` tables.\n+This publication will track all changes (INSERT, UPDATE, DELETE, TRUNCATE) for both the `users` and `orders` tables.\n \n ##### Publication for all tables in a schema\n \n",
			"diffSize": 1755,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "26630dee0e9d68b53d434e8173ceab09ed30f5de",
			"message": "Fix link to Vector docs (#40819)\n\n* Fix link to Vector docs\n\n* Use DOCS_URL",
			"user": "thewheat",
			"timestamp": "2025-11-26T09:11:14Z",
			"author": {
				"name": "Timothy Lim",
				"email": "tim.lim@supabase.io",
				"username": "thewheat"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Storage/Storage.constants.ts",
					"apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Storage/Storage.constants.ts b/apps/studio/components/interfaces/Storage/Storage.constants.ts\nindex ce316ec56a84c..9b03f757cd574 100644\n--- a/apps/studio/components/interfaces/Storage/Storage.constants.ts\n+++ b/apps/studio/components/interfaces/Storage/Storage.constants.ts\n@@ -83,7 +83,7 @@ export const BUCKET_TYPES = {\n     article: 'a',\n     description: 'Purpose-built storage for vector data',\n     valueProp: 'Store, index, and query your vector embeddings at scale',\n-    docsUrl: `${DOCS_URL}/guides/storage/vectors`,\n+    docsUrl: `${DOCS_URL}/guides/storage/vector/introduction`,\n   },\n }\n export const BUCKET_TYPE_KEYS = Object.keys(BUCKET_TYPES) as Array<keyof typeof BUCKET_TYPES>\ndiff --git a/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx b/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx\nindex 56e3982724ed9..eeba3b2f199e8 100644\n--- a/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx\n+++ b/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx\n@@ -6,7 +6,7 @@ import { useEffect } from 'react'\n import { SubmitHandler, useFieldArray, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import z from 'zod'\n-\n+import { DOCS_URL } from 'lib/constants'\n import { ButtonTooltip } from 'components/ui/ButtonTooltip'\n import { DocsButton } from 'components/ui/DocsButton'\n import { useFDWImportForeignSchemaMutation } from 'data/fdw/fdw-import-foreign-schema-mutation'\n@@ -327,9 +327,8 @@ export const CreateVectorTableSheet = ({ bucketName }: CreateVectorTableSheetPro\n             <SheetSection className=\"space-y-4\">\n               <div className=\"flex items-center justify-between\">\n                 <label className=\"text-sm text-foreground\">Metadata keys</label>\n-                <DocsButton href=\"https://supabase.com/docs/guides/storage/vector\" />\n+                <DocsButton href={`${DOCS_URL}/guides/storage/vector/introduction`} />\n               </div>\n-\n               <div className=\"space-y-2\">\n                 {fields.map((field, index) => (\n                   <div key={field.id} className=\"flex items-start gap-2\">\n",
			"diffSize": 2242,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "4448ecd2960cff0f09f5eaf6c5e96c7108452be3",
			"message": "ref(etl): Improve ETL docs (#40782)",
			"user": "iambriccardo",
			"timestamp": "2025-11-26T09:00:37Z",
			"author": {
				"name": "Riccardo Busetti",
				"email": "riccardo.busetti@supabase.io",
				"username": "iambriccardo"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts",
					"apps/docs/content/guides/database/replication.mdx",
					"apps/docs/content/guides/database/replication/manual-replication-faq.mdx",
					"apps/docs/content/guides/database/replication/manual-replication-monitoring.mdx",
					"apps/docs/content/guides/database/replication/manual-replication-setup.mdx",
					"apps/docs/content/guides/database/replication/replication-faq.mdx",
					"apps/docs/content/guides/database/replication/replication-monitoring.mdx",
					"apps/docs/content/guides/database/replication/replication-setup.mdx",
					"apps/docs/content/guides/storage/analytics/replication.mdx",
					"apps/docs/public/img/database/replication/replication-enable-replication.png"
				],
				"removed": [
					"apps/docs/content/guides/database/replication/replication-bigquery.mdx",
					"apps/docs/content/guides/database/replication/replication-destinations.mdx",
					"apps/docs/content/guides/database/replication/replication-iceberg.mdx"
				]
			},
			"diff": "diff --git a/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts b/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts\nindex 15b1f182fe19f..fb746a73ba8c1 100644\n--- a/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts\n+++ b/apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts\n@@ -1154,14 +1154,6 @@ export const database: NavMenuConstant = {\n               name: 'Setting up',\n               url: '/guides/database/replication/replication-setup' as `/${string}`,\n             },\n-            {\n-              name: 'Destinations',\n-              url: '/guides/database/replication/replication-destinations' as `/${string}`,\n-              items: [\n-                { name: 'BigQuery', url: '/guides/database/replication/replication-bigquery' },\n-                { name: 'Iceberg', url: '/guides/database/replication/replication-iceberg' },\n-              ],\n-            },\n             {\n               name: 'Monitoring',\n               url: '/guides/database/replication/replication-monitoring' as `/${string}`,\n@@ -1170,7 +1162,7 @@ export const database: NavMenuConstant = {\n           ],\n         },\n         {\n-          name: 'Manual Replication',\n+          name: 'Manual replication',\n           url: '/guides/database/replication/manual-replication-setup' as `/${string}`,\n           items: [\n             {\ndiff --git a/apps/docs/content/guides/database/replication.mdx b/apps/docs/content/guides/database/replication.mdx\nindex 6cd1f0fdd284d..4a4113d58ca1f 100644\n--- a/apps/docs/content/guides/database/replication.mdx\n+++ b/apps/docs/content/guides/database/replication.mdx\n@@ -1,7 +1,7 @@\n ---\n id: 'replication'\n title: 'Database Replication'\n-description: 'Replicate your database to external destinations using replication powered by Supabase ETL or manual replication.'\n+description: 'Replicate your database to external destinations using Supabase replication or manual replication.'\n subtitle: 'An introduction to database replication and change data capture.'\n sidebar_label: 'Overview'\n ---\ndiff --git a/apps/docs/content/guides/database/replication/manual-replication-faq.mdx b/apps/docs/content/guides/database/replication/manual-replication-faq.mdx\nindex d909e2b629468..2ee5bc876d9fd 100644\n--- a/apps/docs/content/guides/database/replication/manual-replication-faq.mdx\n+++ b/apps/docs/content/guides/database/replication/manual-replication-faq.mdx\n@@ -1,6 +1,6 @@\n ---\n-id: 'replication-faq'\n-title: 'Replication FAQ'\n+id: 'manual-replication-faq'\n+title: 'Manual Replication FAQ'\n description: 'Frequently asked questions about manual database replication.'\n subtitle: 'Common questions and considerations when setting up manual replication.'\n sidebar_label: 'FAQ'\n@@ -30,13 +30,15 @@ You can view [publications](/dashboard/project/default/database/publications) in\n \n ## How to configure database settings for replication?\n \n-Yes. Using the Supabase CLI, you can [configure database settings](/docs/guides/database/custom-postgres-config#cli-configurable-settings) to optimize them for your replication needs. These values can vary depending on the activity of your database size and activity.\n+Using the Supabase CLI, you can [configure database settings](/docs/guides/database/custom-postgres-config#cli-configurable-settings) to optimize them for your replication needs. These values can vary depending on your database size and activity.\n \n ## What are some important configuration options?\n \n Some of the more important options to be aware of are:\n \n-- `max_wal_size`\n-- `max_slot_wal_keep_size`\n-- `wal_keep_size`\n-- `max_wal_senders`\n+- `max_wal_size` - Maximum size the WAL can grow between automatic WAL checkpoints\n+- `max_slot_wal_keep_size` - Maximum size of WAL files that replication slots are allowed to retain\n+- `wal_keep_size` - Minimum number of past WAL files to keep for standby servers\n+- `max_wal_senders` - Maximum number of concurrent connections from standby servers or streaming backup clients\n+\n+These settings help ensure your replication slots don't run out of space and that replicas can reconnect without requiring a full re-sync.\ndiff --git a/apps/docs/content/guides/database/replication/manual-replication-monitoring.mdx b/apps/docs/content/guides/database/replication/manual-replication-monitoring.mdx\nindex 0047bc80136e4..3742b2eaf8cc8 100644\n--- a/apps/docs/content/guides/database/replication/manual-replication-monitoring.mdx\n+++ b/apps/docs/content/guides/database/replication/manual-replication-monitoring.mdx\n@@ -1,6 +1,6 @@\n ---\n-id: 'monitoring-replication'\n-title: 'Monitoring Replication'\n+id: 'manual-replication-monitoring'\n+title: 'Manual Replication Monitoring'\n description: 'Monitor replication lag and status for manual replication setups.'\n subtitle: 'Track replication health and performance.'\n sidebar_label: 'Monitoring'\n@@ -16,7 +16,7 @@ Monitoring replication lag is important and there are 3 ways to do this:\n 3. [Metrics](/docs/guides/telemetry/metrics) - Using the prometheus endpoint for your project\n    - replication_slots_max_lag_bytes - this is the more important one\n    - pg_stat_replication_replay_lag - lag to replay WAL files from the source DB on the target DB (throttled by disk or high activity)\n-   - pg_stat_replication_send_lag - lag in sending WAL files from the source DB (a high lag means that the publisher is not being asked to send new WAL files OR a network issues)\n+   - pg_stat_replication_send_lag - lag in sending WAL files from the source DB (a high lag means that the publisher is not being asked to send new WAL files OR network issues)\n \n ### Primary\n \n@@ -51,7 +51,7 @@ The WAL size can be checked using the `pg_ls_waldir()` function:\n select * from pg_ls_waldir();\n ```\n \n-#### Check LSN\n+#### Check the LSN\n \n ```sql\n select pg_current_wal_lsn();\n@@ -91,7 +91,7 @@ ORDER BY\n     table_name;\n ```\n \n-#### Check LSN\n+#### Check the LSN\n \n ```sql\n select pg_last_wal_replay_lsn();\ndiff --git a/apps/docs/content/guides/database/replication/manual-replication-setup.mdx b/apps/docs/content/guides/database/replication/manual-replication-setup.mdx\nindex f6ddadd5a86a2..4a0fe678ff4b0 100644\n--- a/apps/docs/content/guides/database/replication/manual-replication-setup.mdx\n+++ b/apps/docs/content/guides/database/replication/manual-replication-setup.mdx\n@@ -6,7 +6,7 @@ subtitle: 'Set up replication with Airbyte, Estuary, Fivetran, and other tools.'\n sidebar_label: 'Setting up'\n ---\n \n-This guide covers setting up **manual replication** using external tools. If you prefer a simpler, managed solution, see [replication](/docs/guides/database/replication/replication-setup) instead.\n+This guide covers setting up **manual replication** using external tools. If you prefer a simpler, managed solution, see [Replication](/docs/guides/database/replication/replication-setup) instead.\n \n <Admonition type=\"note\">\n \n@@ -21,7 +21,7 @@ To set up replication, the following is recommended:\n - Instance size of XL or greater\n - [IPv4 add-on](/docs/guides/platform/ipv4-address) enabled\n \n-To create a replication slot, you will need to use the `postgres` user and follow the instructions in our [guide](/docs/guides/database/postgres/setup-replication-external).\n+To create a replication slot, you will need to use the `postgres` user and follow the instructions in the [external replication setup guide](/docs/guides/database/postgres/setup-replication-external).\n \n <Admonition type=\"note\">\n \n@@ -29,7 +29,7 @@ If you are running Postgres 17 or higher, you can create a new user and grant th\n \n </Admonition>\n \n-If you are replicating to an external system and using any of the tools below, check their documentation first and we have added additional information where the setup with Supabase can vary.\n+If you are replicating to an external system and using any of the tools below, check their documentation first. Additional information is provided where the setup with Supabase can vary.\n \n <Tabs\n   scrollable\n@@ -67,7 +67,7 @@ You can follow those steps with the following modifications:\n \n 1. In Step 2, choose `logical replication` as the sync mechanism\n 2. In Step 3, do not create a user and use the existing `postgres` user for replication\n-3. In Step 5, no need to modify any WAL settings as we have done that for you\n+3. In Step 5, no need to modify any WAL settings as this has been configured\n \n </TabPanel>\n \n@@ -77,7 +77,7 @@ Materialize has the following [documentation](https://materialize.com/docs/sql/c\n \n You can follow those steps with the following modifications:\n \n-1. Follow the steps in our [guide](/docs/guides/database/postgres/setup-replication-external) to create a publication slot\n+1. Follow the steps in the [external replication setup guide](/docs/guides/database/postgres/setup-replication-external) to create a publication slot\n \n </TabPanel>\n \ndiff --git a/apps/docs/content/guides/database/replication/replication-bigquery.mdx b/apps/docs/content/guides/database/replication/replication-bigquery.mdx\ndeleted file mode 100644\nindex 82fdc29ddb52d..0000000000000\n--- a/apps/docs/content/guides/database/replication/replication-bigquery.mdx\n+++ /dev/null\n@@ -1,126 +0,0 @@\n----\n-id: 'replication-bigquery'\n-title: 'Replicate to BigQuery'\n-description: 'Replicate your Supabase database to Google BigQuery using replication.'\n-subtitle: 'Stream data changes to BigQuery in real-time.'\n-sidebar_label: 'BigQuery'\n----\n-\n-<Admonition type=\"caution\" label=\"Private Alpha\">\n-\n-Replication is currently in private alpha. Access is limited and features may change.\n-\n-</Admonition>\n-\n-BigQuery is Google's fully managed data warehouse. Replication powered by [Supabase ETL](https://github.com/supabase/etl) allows you to automatically sync your Supabase database tables to BigQuery for analytics and reporting.\n-\n-<Admonition type=\"tip\">\n-\n-This page covers BigQuery-specific configuration. For complete setup instructions including publications, general settings, and pipeline management, see the [Replication Setup guide](/docs/guides/database/replication/replication-setup).\n-\n-</Admonition>\n-\n-### Setup\n-\n-Setting up BigQuery replication requires preparing your GCP resources, then configuring BigQuery as a destination.\n-\n-#### Step 1: Prepare GCP resources\n-\n-Before configuring BigQuery as a destination, set up the following in Google Cloud Platform:\n-\n-1. **Google Cloud Platform (GCP) account**: [Sign up for GCP](https://cloud.google.com/gcp) if you don't have one\n-2. **BigQuery dataset**: Create a [BigQuery dataset](https://cloud.google.com/bigquery/docs/datasets-intro) in your GCP project\n-3. **GCP service account key**: Create a [service account](https://cloud.google.com/iam/docs/keys-create-delete) with the **BigQuery Data Editor** role and download the JSON key file\n-\n-#### Step 2: Add BigQuery as a destination\n-\n-After preparing your GCP resources, configure BigQuery as a destination:\n-\n-1. Navigate to [Database](/dashboard/project/_/database/replication) → **Replication** in your Supabase Dashboard\n-2. Click **Add destination**\n-3. Configure the destination:\n-\n-   <Image\n-     alt=\"BigQuery Configuration Settings\"\n-     src=\"/docs/img/database/replication/replication-bigquery-details.png\"\n-     zoomable\n-   />\n-\n-   - **Destination type**: Select **BigQuery**\n-   - **Project ID**: Your BigQuery project identifier (found in the GCP Console)\n-   - **Dataset ID**: The name of your BigQuery dataset (without the project ID)\n-\n-     <Admonition type=\"note\">\n-\n-     In the GCP Console, the dataset is shown as `project-id.dataset-id`. Enter only the part after the dot. For example, if you see `my-project.my_dataset`, enter `my_dataset`.\n-\n-     </Admonition>\n-\n-   - **Service Account Key**: Your GCP service account key in JSON format. The service account must have the following permissions:\n-     - `bigquery.datasets.get`\n-     - `bigquery.tables.create`\n-     - `bigquery.tables.get`\n-     - `bigquery.tables.getData`\n-     - `bigquery.tables.update`\n-     - `bigquery.tables.updateData`\n-\n-4. Complete the remaining configuration following the [Replication Setup guide](/docs/guides/database/replication/replication-setup)\n-\n-### How it works\n-\n-Once configured, replication to BigQuery:\n-\n-1. Captures changes from your Postgres database (INSERT, UPDATE, DELETE operations)\n-2. Batches changes for optimal performance\n-3. Creates BigQuery tables automatically to match your Postgres schema\n-4. Streams data to BigQuery with CDC metadata\n-\n-<Admonition type=\"note\">\n-\n-Due to ingestion latency in BigQuery's streaming API, there may be a delay (typically seconds to minutes) in data appearing. This is normal and expected for BigQuery's architecture.\n-\n-</Admonition>\n-\n-#### BigQuery CDC format\n-\n-BigQuery tables include additional columns for change tracking:\n-\n-- `_change_type`: The type of change (`INSERT`, `UPDATE`, `DELETE`)\n-- `_commit_timestamp`: When the change was committed in Postgres\n-- `_stream_id`: Internal identifier for the replication stream\n-\n-### Querying replicated data\n-\n-Once replication is running, you can query your data in BigQuery:\n-\n-```sql\n--- Query the replicated table\n-SELECT * FROM `your-project.your_dataset.users`\n-WHERE created_at > TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 7 DAY);\n-\n--- View CDC changes\n-SELECT\n-  _change_type,\n-  _commit_timestamp,\n-  id,\n-  name,\n-  email\n-FROM `your-project.your_dataset.users`\n-ORDER BY _commit_timestamp DESC\n-LIMIT 100;\n-```\n-\n-### Limitations\n-\n-BigQuery-specific limitations:\n-\n-- **Ingestion latency**: BigQuery's streaming API has inherent latency (typically seconds to minutes)\n-- **Row size**: Limited to 10 MB per row due to BigQuery Storage Write API constraints\n-\n-For general replication limitations that apply to all destinations, see the [Replication Setup guide](/docs/guides/database/replication/replication-setup#limitations).\n-\n-### Next steps\n-\n-- [Set up replication](/docs/guides/database/replication/replication-setup)\n-- [Monitor replication](/docs/guides/database/replication/replication-monitoring)\n-- [View replication FAQ](/docs/guides/database/replication/replication-faq)\ndiff --git a/apps/docs/content/guides/database/replication/replication-destinations.mdx b/apps/docs/content/guides/database/replication/replication-destinations.mdx\ndeleted file mode 100644\nindex da20c733d8fd9..0000000000000\n--- a/apps/docs/content/guides/database/replication/replication-destinations.mdx\n+++ /dev/null\n@@ -1,33 +0,0 @@\n----\n-id: 'replication-destinations'\n-title: 'Replication Destinations'\n-description: 'Choose where to replicate your database with Replication.'\n-subtitle: 'Available destinations for Replication.'\n-sidebar_label: 'Destinations'\n----\n-\n-<Admonition type=\"caution\" label=\"Private Alpha\">\n-\n-Replication is currently in private alpha. Access is limited and features may change.\n-\n-</Admonition>\n-\n-Replication powered by [Supabase ETL](https://github.com/supabase/etl) supports multiple destination types for syncing your database. Choose the destination that best fits your analytics and integration needs.\n-\n-<Admonition type=\"note\">\n-\n-Some destinations may not be available for all users. Additional destinations are planned for the future, but we don't have public timelines to share at this time.\n-\n-</Admonition>\n-\n-### Available destinations\n-\n-| Destination                     | Description                                    | Configuration                                                                  |\n-| ------------------------------- | ---------------------------------------------- | ------------------------------------------------------------------------------ |\n-| **BigQuery**                    | Google's fully managed data warehouse          | [Configure BigQuery →](/docs/guides/database/replication/replication-bigquery) |\n-| **Iceberg (Analytics Buckets)** | Apache Iceberg tables in S3-compatible storage | [Configure Iceberg →](/docs/guides/database/replication/replication-iceberg)   |\n-\n-### Next steps\n-\n-- [Set up replication](/docs/guides/database/replication/replication-setup)\n-- [Monitor replication](/docs/guides/database/replication/replication-monitoring)\ndiff --git a/apps/docs/content/guides/database/replication/replication-faq.mdx b/apps/docs/content/guides/database/replication/replication-faq.mdx\nindex 2dedd59a69a80..bb85b14a0c5fc 100644\n--- a/apps/docs/content/guides/database/replication/replication-faq.mdx\n+++ b/apps/docs/content/guides/database/replication/replication-faq.mdx\n@@ -14,22 +14,23 @@ Replication is currently in private alpha. Access is limited and features may ch\n \n ## What destinations are supported?\n \n-Replication currently supports Iceberg (Analytics Buckets). See the [Destinations guide](/docs/guides/database/replication/replication-destinations) for details.\n+Replication currently supports Analytics Buckets (Iceberg format) and BigQuery. See the destination tabs in the [Setup guide](/docs/guides/database/replication/replication-setup#step-3-add-a-destination) for configuration details.\n+\n+Availability varies based on the planned roll-out strategy. The destinations you can access depend on your project and access level.\n \n ## Why is a table not being replicated?\n \n Common reasons:\n \n-- **Missing primary key**: Tables must have a primary key to be replicated\n-- **Not in publication**: Ensure the table is included in your publication\n+- **Missing primary key**: Tables must have a primary key to be replicated (Postgres logical replication requirement)\n+- **Not in publication**: Ensure the table is included in your Postgres publication\n - **Unsupported data types**: Tables with custom data types are not supported\n-- **Partitioned tables**: Not currently supported\n \n Check your publication settings and verify your table meets the requirements.\n \n ## Why aren't publication changes reflected after adding or removing tables?\n \n-After modifying your publication, you must restart the pipeline for changes to take effect. See [Adding or removing tables](/docs/guides/database/replication/replication-setup#adding-or-removing-tables) for instructions.\n+After modifying your Postgres publication, you must restart the replication pipeline for changes to take effect. See [Adding or removing tables](/docs/guides/database/replication/replication-setup#adding-or-removing-tables) for instructions.\n \n ## Why is a pipeline in failed state?\n \n@@ -48,7 +49,7 @@ Table errors occur during the copy phase. To recover, click **View status**, fin\n \n ## How to verify replication is working\n \n-Check the [Database](/dashboard/project/_/database/replication) → **Replication** page:\n+Check the [Database](/dashboard/project/_/database/replication) → **replication** page:\n \n 1. Verify your pipeline shows **Running** status\n 2. Click **View status** to check table states\n@@ -57,35 +58,49 @@ Check the [Database](/dashboard/project/_/database/replication) → **Replicatio\n \n See the [Replication Monitoring guide](/docs/guides/database/replication/replication-monitoring) for comprehensive monitoring instructions.\n \n-## What are the main limitations?\n+## How to stop or pause replication\n \n-Key limitations to be aware of:\n+You can manage your pipeline using the actions menu in the destinations list. See [Managing your pipeline](/docs/guides/database/replication/replication-setup#managing-your-pipeline) for details on available actions.\n \n-- **Primary keys**: Required on all tables\n-- **Custom data types**: Not supported\n-- **Schema changes**: Not automatically handled\n+Note: Stopping replication will cause changes to queue up in the WAL.\n \n-Destination-specific limitations may also apply. See the [Iceberg](/docs/guides/database/replication/replication-iceberg#limitations) destination page for details.\n+## What happens if a table is deleted at the destination?\n \n-## How to stop or pause replication\n+If a table is deleted downstream at the destination (e.g., in your Analytics Bucket or BigQuery dataset), the replication pipeline will automatically recreate it.\n \n-You can manage your pipeline using the actions menu in the destinations list. See [Managing your pipeline](/docs/guides/database/replication/replication-setup#managing-your-pipeline) for details on available actions.\n+This behavior is by design to prevent the pipeline from breaking if tables are accidentally deleted. The pipeline ensures that all tables in your publication are always present at the destination.\n \n-Note: Stopping replication will cause changes to queue up in the WAL.\n+**To permanently remove a table from your destination:**\n+\n+You have two options:\n+\n+**Option 1: Pause the pipeline first**\n+\n+1. Pause or delete your replication pipeline\n+2. Delete the table at your destination\n+3. The table will not be recreated since the pipeline is not running\n+\n+**Option 2: Remove from publication first**\n+\n+1. Remove the table from your Postgres publication using `ALTER PUBLICATION ... DROP TABLE`\n+2. Restart your replication pipeline to apply the change (the table at the destination will remain but stop receiving new changes)\n+3. Delete the table at your destination\n+\n+Note: Removing a table from the publication and restarting the pipeline does not delete the table downstream, it only stops replicating new changes to it.\n \n ## Can data duplicates occur during pipeline operations?\n \n Yes, data duplicates can occur in certain scenarios when stopping a pipeline.\n \n-When you stop a pipeline (for restarts or updates), replication tries to finish processing any transactions that are currently being sent to your destination. It waits up to a few minutes to allow these in-progress transactions to complete cleanly before stopping.\n+When you stop a pipeline (for restarts or updates), the replication process tries to finish processing any transactions that are currently being sent to your destination. It waits up to a few minutes to allow these in-progress transactions to complete cleanly before stopping.\n \n However, if a transaction in your database takes longer than this waiting period to complete, the pipeline will stop before that entire transaction has been fully processed. When the pipeline starts again, it must restart the incomplete transaction from the beginning to maintain transaction boundaries, which results in some data being sent twice to your destination.\n \n-**Understanding transaction boundaries**: A transaction is a group of database changes that happen together (for example, all changes within a `BEGIN...COMMIT` block). Replication must process entire transactions - it cannot process part of a transaction, stop, and then continue from the middle. This means if a transaction is interrupted, the whole transaction must be replayed when the pipeline resumes.\n+**Understanding transaction boundaries**: A transaction is a group of database changes that happen together (for example, all changes within a `BEGIN...COMMIT` block). Postgres logical replication must process entire transactions - it cannot process part of a transaction, stop, and then continue from the middle. This means if a transaction is interrupted, the whole transaction must be replayed when the pipeline resumes.\n \n **Example scenario**: Suppose you have a batch operation that updates 10,000 rows within a single transaction. If this operation takes 10 minutes to complete and you stop the pipeline after 5 minutes (when 5,000 rows have been processed), the pipeline cannot resume from row 5,001. Instead, when it restarts, it must reprocess all 10,000 rows from the beginning, resulting in the first 5,000 rows being sent to your destination twice.\n \n-**Important**: We are not currently planning to implement automatic deduplication. If your use case requires guaranteed exactly-once delivery, you should implement deduplication logic in your downstream systems based on primary keys or other unique identifiers.\n+**Important**: There are currently no plans to implement automatic deduplication. If your use case requires guaranteed exactly-once delivery, you should implement deduplication logic in your downstream systems based on primary keys or other unique identifiers.\n \n ## Where to find replication logs\n \ndiff --git a/apps/docs/content/guides/database/replication/replication-iceberg.mdx b/apps/docs/content/guides/database/replication/replication-iceberg.mdx\ndeleted file mode 100644\nindex 3319493871f55..0000000000000\n--- a/apps/docs/content/guides/database/replication/replication-iceberg.mdx\n+++ /dev/null\n@@ -1,88 +0,0 @@\n----\n-id: 'replication-iceberg'\n-title: 'Replicate to Iceberg (Analytics Buckets)'\n-description: 'Replicate your Supabase database to Iceberg format using Analytics Buckets.'\n-subtitle: 'Stream data to Analytics Buckets.'\n-sidebar_label: 'Iceberg'\n----\n-\n-<Admonition type=\"caution\" label=\"Private Alpha\">\n-\n-Replication is currently in private alpha. Access is limited and features may change.\n-\n-</Admonition>\n-\n-<Admonition type=\"caution\" label=\"Current Limitation\">\n-\n-Iceberg replication is currently incomplete. It provides an append-only log listing all your data changes with an additional column explaining the type of operation (INSERT, UPDATE, DELETE).\n-\n-</Admonition>\n-\n-Apache Iceberg is an open table format for analytic datasets. Replication powered by [Supabase ETL](https://github.com/supabase/etl) to Iceberg uses Supabase [Analytics Buckets](/docs/guides/storage/analytics) to store your replicated data.\n-\n-<Admonition type=\"tip\">\n-\n-This page covers Iceberg-specific configuration. For complete setup instructions including publications, general settings, and pipeline management, see the [Replication Setup guide](/docs/guides/database/replication/replication-setup).\n-\n-</Admonition>\n-\n-### Setup\n-\n-Setting up Iceberg replication requires two steps: creating an Analytics Bucket, then configuring it as a destination.\n-\n-#### Step 1: Create an Analytics bucket\n-\n-First, create an Analytics Bucket to store your replicated data:\n-\n-1. Navigate to [Storage](/dashboard/project/_/storage/buckets) → **Analytics** in your Supabase Dashboard\n-2. Click **New bucket**\n-\n-   <Image\n-     alt=\"Create New Analytics Bucket\"\n-     src=\"/docs/img/database/replication/replication-iceberg-new-bucket.png\"\n-     zoomable\n-   />\n-\n-#### Step 2: Add Iceberg as a destination\n-\n-After clicking **New bucket**, fill in the bucket details and copy the credentials:\n-\n-1. Fill in the bucket details:\n-\n-   <Image\n-     alt=\"Analytics Bucket Details\"\n-     src=\"/docs/img/database/replication/replication-iceberg-details.png\"\n-     zoomable\n-   />\n-\n-   - **Name**: A unique name for your bucket\n-   - **Region**: Select the region where your data will be stored\n-\n-2. Click **Create bucket**\n-3. **Copy the credentials** displayed after bucket creation (Catalog Token, S3 Access Key ID, S3 Secret Access Key). You'll need these in the next steps.\n-4. Navigate to [Database](/dashboard/project/_/database/replication) → **Replication** in your Supabase Dashboard\n-5. Click **Add destination**\n-6. Configure the destination:\n-   - **Destination type**: Select **Iceberg (Analytics Bucket)**\n-   - **Bucket**: The name of your Analytics Bucket from Step 1\n-   - **Namespace**: The schema name where your tables will be replicated (e.g., `public`)\n-   - **Catalog Token**: Authentication token for accessing the Iceberg catalog (copied in Step 3)\n-   - **S3 Access Key ID**: Access key for S3-compatible storage (copied in Step 3)\n-   - **S3 Secret Access Key**: Secret key for S3-compatible storage (copied in Step 3)\n-7. Complete the remaining configuration following the [Replication Setup guide](/docs/guides/database/replication/replication-setup)\n-\n-For more information about Analytics Buckets, see the [Analytics Buckets documentation](/docs/guides/storage/analytics).\n-\n-### Limitations\n-\n-Iceberg-specific limitations:\n-\n-- **Append-only log**: Currently provides an append-only log format rather than a full table representation\n-\n-For general replication limitations that apply to all destinations, see the [Replication Setup guide](/docs/guides/database/replication/replication-setup#limitations).\n-\n-### Next steps\n-\n-- [Set up replication](/docs/guides/database/replication/replication-setup)\n-- [Monitor replication](/docs/guides/database/replication/replication-monitoring)\n-- [View replication FAQ](/docs/guides/database/replication/replication-faq)\ndiff --git a/apps/docs/content/guides/database/replication/replication-monitoring.mdx b/apps/docs/content/guides/database/replication/replication-monitoring.mdx\nindex f157e216f66b3..860ab2314b5de 100644\n--- a/apps/docs/content/guides/database/replication/replication-monitoring.mdx\n+++ b/apps/docs/content/guides/database/replication/replication-monitoring.mdx\n@@ -12,14 +12,14 @@ Replication is currently in private alpha. Access is limited and features may ch\n \n </Admonition>\n \n-After setting up replication, you can monitor the status and health of your replication pipelines directly from the Supabase Dashboard. The pipeline is the active process that continuously replicates changes from your database to your destination.\n+After setting up replication, you can monitor the status and health of your replication pipelines directly from the Supabase Dashboard. The pipeline is the active Postgres replication process that continuously streams changes from your database to your destination.\n \n ### Viewing pipeline status\n \n To monitor your replication pipelines:\n \n 1. Navigate to the [Database](/dashboard/project/_/database/replication) section in your Supabase Dashboard\n-2. Select the **Replication** tab\n+2. Select the **replication** tab\n 3. You'll see a list of all your destinations with their pipeline status\n \n <Image\n@@ -88,7 +88,7 @@ Table errors occur during the copy phase and affect individual tables. These err\n \n **Recovering from table errors:**\n \n-When a table encounters an error during the copy phase, you can reset the table state (for some errors). This will restart the table copy from the beginning.\n+When a table encounters an error during the copy phase, you can reset the table state. This will restart the table copy from the beginning.\n \n #### Pipeline errors\n \n@@ -134,7 +134,7 @@ Logs contain diagnostic information that may be too technical for most users. If\n \n #### Checking if replication is healthy\n \n-1. Navigate to [Database](/dashboard/project/_/database/replication) → **Replication**\n+1. Navigate to [Database](/dashboard/project/_/database/replication) → **replication**\n 2. Verify your destination shows **Running** status\n 3. Click **View status** to check replication lag and table states\n 4. Ensure all tables show **Live** state\n@@ -164,8 +164,8 @@ If you notice issues with your replication:\n \n 1. **Check pipeline state**: Ensure the pipeline is in **Running** state\n 2. **Review table states**: Identify tables in **Error** state\n-3. **Check logs**: Navigate to Logs → replication for detailed error information\n-4. **Verify publication**: Ensure your publication is properly configured\n+3. **Check logs**: Navigate to Logs → Replication for detailed error information\n+4. **Verify publication**: Ensure your Postgres publication is properly configured\n 5. **Monitor replication lag**: High lag may indicate performance issues\n \n For more troubleshooting tips, see the [Replication FAQ](/docs/guides/database/replication/replication-faq).\ndiff --git a/apps/docs/content/guides/database/replication/replication-setup.mdx b/apps/docs/content/guides/database/replication/replication-setup.mdx\nindex beaa373528952..7fd6b5581a763 100644\n--- a/apps/docs/content/guides/database/replication/replication-setup.mdx\n+++ b/apps/docs/content/guides/database/replication/replication-setup.mdx\n@@ -1,7 +1,7 @@\n ---\n id: 'replication-setup'\n title: 'Replication Setup'\n-description: 'Set up replication to automatically sync your database to external destinations.'\n+description: 'Set up replication using Postgres logical replication.'\n subtitle: 'Configure publications and destinations for replication.'\n sidebar_label: 'Setting up'\n ---\n@@ -12,17 +12,21 @@ Replication is currently in private alpha. Access is limited and features may ch\n \n </Admonition>\n \n-Replication powered by [Supabase ETL](https://github.com/supabase/etl) requires two main components: a **publication** (source) and a **destination**. Follow these steps to set up your replication pipeline.\n+Replication uses **Postgres logical replication** to stream changes from your database. Powered by [Supabase ETL](https://github.com/supabase/etl), an open source tool built for Postgres logical replication, it provides a managed interface through the Dashboard to configure and monitor replication pipelines.\n+\n+## Setup overview\n+\n+Replication requires two main components: a **Postgres publication** (defines what to replicate) and a **destination** (where data is sent). Follow these steps to set up your replication pipeline.\n \n <Admonition type=\"tip\">\n \n-If you already have a publication set up, you can skip to [Step 2: Enable replication](#step-2-enable-replication).\n+If you already have a Postgres publication set up, you can skip to [Step 2: Enable replication](#step-2-enable-replication).\n \n </Admonition>\n \n-### Step 1: Create a publication\n+### Step 1: Create a Postgres publication\n \n-A publication defines which tables and change types will be replicated. You need to create a publication using SQL.\n+A Postgres publication defines which tables and change types will be replicated from your database. You create publications using SQL.\n \n #### Creating a publication\n \n@@ -96,7 +100,7 @@ After creating a publication via SQL, you can view it in the Supabase Dashboard:\n Before adding destinations, you need to enable replication for your project:\n \n 1. Navigate to the [Database](/dashboard/project/_/database/replication) section in your Supabase Dashboard\n-2. Select the **Replication** tab\n+2. Select the **replication** tab\n 3. Click **Enable replication** to activate replication for your project\n \n <Image\n@@ -107,44 +111,224 @@ Before adding destinations, you need to enable replication for your project:\n \n ### Step 3: Add a destination\n \n-Once replication is enabled and you have a publication, you can add a destination. The destination is where your replicated data will be stored, while the pipeline is the active process that continuously replicates changes from your database to that destination.\n+Once replication is enabled and you have a Postgres publication, you can add a destination. The destination is where your replicated data will be stored, while the pipeline is the active Postgres replication process that continuously streams changes from your database to that destination.\n+\n+#### Choose and configure your destination\n+\n+Follow these steps to configure your destination. The specific configuration depends on which destination type you choose. Both Analytics Buckets and BigQuery destinations are supported, though availability varies based on the planned roll-out strategy.\n+\n+<Tabs\n+  scrollable\n+  size=\"small\"\n+  type=\"underlined\"\n+  defaultActiveId=\"analytics-buckets\"\n+  queryGroup=\"destination\"\n+>\n+<TabPanel id=\"analytics-buckets\" label=\"Analytics Buckets\">\n+\n+[Analytics Buckets](/docs/guides/storage/analytics/introduction) are specialized storage buckets in Supabase Storage designed for analytical workloads. They provide S3-compatible storage and use the [Apache Iceberg](https://iceberg.apache.org/) open table format, making your data accessible via standard tools like DuckDB, Spark, and other analytics platforms.\n+\n+When you replicate to Analytics Buckets, your database changes are automatically written in Iceberg format, creating tables in object storage that you can query for analytics.\n+\n+##### Step 1: Create an analytics bucket\n+\n+First, create an analytics bucket to store your replicated data:\n+\n+1. Navigate to [Storage](/dashboard/project/_/storage/buckets) → **Analytics** in your Supabase Dashboard\n+2. Click **New bucket**\n \n-#### Available destinations\n+   <Image\n+     alt=\"Create new analytics bucket\"\n+     src=\"/docs/img/database/replication/replication-iceberg-new-bucket.png\"\n+     zoomable\n+   />\n \n-For a complete list of available destinations and how to choose the right one for your needs, see [Destinations](/docs/guides/database/replication/replication-destinations).\n+3. Fill in the bucket details:\n \n-#### Configuration\n+   <Image\n+     alt=\"Analytics bucket details\"\n+     src=\"/docs/img/database/replication/replication-iceberg-details.png\"\n+     zoomable\n+   />\n \n-1. In the Replication tab, click **Add destination**\n-2. Configure the destination settings:\n+   - **Name**: A unique name for your bucket (e.g., `analytics_warehouse`)\n+   - **Region**: Select the region where your data will be stored\n \n-   **General Settings:**\n+4. Click **Create bucket**\n+\n+5. **Copy the credentials** displayed after bucket creation. You'll need these in the next steps:\n+   - **Catalog Token**: Authentication token for accessing the Iceberg catalog\n+   - **S3 Access Key ID**: Access key for S3-compatible storage\n+   - **S3 Secret Access Key**: Secret key for S3-compatible storage\n+\n+##### Step 2: Configure analytics buckets as a destination\n+\n+1. Navigate to [Database](/dashboard/project/_/database/replication) → **replication** in your Supabase Dashboard\n+2. Click **Add destination**\n+\n+   <Image\n+     alt=\"Add Destination\"\n+     src=\"/docs/img/database/replication/replication-add-destination.png\"\n+     zoomable\n+   />\n+\n+3. Configure the general settings:\n \n    - **Destination name**: A name to identify this destination (e.g., \"Analytics Warehouse\")\n-   - **Publication**: The publication to replicate data from (created in Step 1)\n-   - **Destination type**: Choose from available destination types\n+   - **Publication**: The publication to replicate data from (created in [Step 1](#step-1-create-a-postgres-publication))\n+   - **Destination type**: Select **Analytics Buckets**\n \n-   **Destination-specific settings:**\n-   Each destination type requires different configuration. See the [Destinations guide](/docs/guides/database/replication/replication-destinations) for configuration details specific to your chosen destination.\n+4. Configure Analytics Buckets settings:\n \n-<Image\n-  alt=\"Add Destination\"\n-  src=\"/docs/img/database/replication/replication-add-destination.png\"\n-  zoomable\n-/>\n+   - **Bucket**: The name of your analytics bucket from Step 1\n+   - **Namespace**: The schema name where your tables will be replicated (e.g., `public`)\n+   - **Catalog Token**: Authentication token from Step 1\n+   - **S3 Access Key ID**: Access key from Step 1\n+   - **S3 Secret Access Key**: Secret key from Step 1\n+\n+5. Configure **Advanced Settings** (optional):\n+\n+   - **Batch wait time (milliseconds)**: How long to wait for more changes before sending a batch. Default is recommended for optimal performance.\n+\n+6. Click **Create and start** to begin replication\n+\n+Your replication pipeline will now start copying data from your database to the analytics bucket in Iceberg format.\n+\n+##### How it works\n+\n+Once configured, replication to Analytics Buckets:\n+\n+1. Captures changes from your Postgres database (INSERT, UPDATE, DELETE, TRUNCATE operations)\n+2. Batches changes for optimal performance\n+3. Creates Iceberg tables automatically to match your Postgres schema\n+4. Streams data to Analytics Buckets\n+\n+##### How tables are structured\n+\n+Replicated tables use a changelog structure:\n+\n+- Tables are created with a `_changelog` suffix in the name (e.g., `users_changelog`)\n+- Each table contains a `cdc_operation` column indicating the operation type: `INSERT`, `UPDATE`, `DELETE`, or `TRUNCATE`\n+- This append-only format preserves the complete history of all changes\n+\n+##### Limitations\n+\n+- **Append-only log**: Currently provides an append-only log format rather than a full table representation\n+\n+##### Additional resources\n+\n+- [Analytics Buckets documentation](/docs/guides/storage/analytics/introduction) - Learn more about Analytics Buckets and S3-compatible storage\n+- [Realtime Data Sync to Analytics Buckets](/docs/guides/storage/analytics/replication) - Step-by-step guide for replicating to Analytics Buckets\n+- [Apache Iceberg](https://iceberg.apache.org/) - Official Iceberg documentation\n+\n+</TabPanel>\n+<TabPanel id=\"bigquery\" label=\"BigQuery\">\n+\n+[BigQuery](https://cloud.google.com/bigquery) is Google's fully managed data warehouse. You can replicate your database tables to BigQuery for analytics and reporting.\n+\n+##### Step 1: Prepare GCP resources\n+\n+Before configuring BigQuery as a destination, set up the following in Google Cloud Platform:\n+\n+1. **Google Cloud Platform (GCP) account**: [Sign up for GCP](https://cloud.google.com/gcp) if you don't have one\n+\n+2. **BigQuery dataset**: Create a [BigQuery dataset](https://cloud.google.com/bigquery/docs/datasets-intro) in your GCP project\n \n-3. Configure **Advanced Settings** (optional):\n+   - Open the BigQuery console in GCP\n+   - Select your project\n+   - Click \"Create Dataset\"\n+   - Provide a dataset ID (e.g., `supabase_replication`)\n \n-   - **Batch wait time (milliseconds)**: How long to wait for more changes before sending a batch. We recommend leaving this at the default value for optimal performance. Setting this too low can result in too much traffic and less efficient batching.\n+3. **GCP service account key**: Create a [service account](https://cloud.google.com/iam/docs/keys-create-delete) with appropriate permissions:\n \n-4. Click **Create and start** to begin replication\n+   - Go to IAM & Admin → Service Accounts\n+   - Click \"Create Service Account\"\n+   - Grant the **BigQuery Data Editor** role\n+   - Create and download the JSON key file\n+\n+   Required permissions:\n+\n+   - `bigquery.datasets.get`\n+   - `bigquery.tables.create`\n+   - `bigquery.tables.get`\n+   - `bigquery.tables.getData`\n+   - `bigquery.tables.update`\n+   - `bigquery.tables.updateData`\n+\n+##### Step 2: Configure BigQuery as a destination\n+\n+1. Navigate to [Database](/dashboard/project/_/database/replication) → **replication** in your Supabase Dashboard\n+2. Click **Add destination**\n+\n+   <Image\n+     alt=\"BigQuery Configuration Settings\"\n+     src=\"/docs/img/database/replication/replication-bigquery-details.png\"\n+     zoomable\n+   />\n+\n+3. Configure the general settings:\n+\n+   - **Destination name**: A name to identify this destination (e.g., \"BigQuery Warehouse\")\n+   - **Publication**: The publication to replicate data from (created in [Step 1](#step-1-create-a-postgres-publication))\n+   - **Destination type**: Select **BigQuery**\n+\n+4. Configure BigQuery-specific settings:\n+\n+   - **Project ID**: Your BigQuery project identifier (found in the GCP Console)\n+   - **Dataset ID**: The name of your BigQuery dataset (without the project ID)\n+\n+     <Admonition type=\"note\">\n+\n+     In the GCP Console, the dataset is shown as `project-id.dataset-id`. Enter only the part after the dot. For example, if you see `my-project.my_dataset`, enter `my_dataset`.\n+\n+     </Admonition>\n+\n+   - **Service Account Key**: Your GCP service account key in JSON format (from Step 1)\n+\n+5. Configure **Advanced Settings** (optional):\n+\n+   - **Batch wait time (milliseconds)**: How long to wait for more changes before sending a batch. Default is recommended for optimal performance.\n+\n+6. Click **Create and start** to begin replication\n+\n+Your replication pipeline will now start copying data from your database to BigQuery.\n+\n+##### How it works\n+\n+Once configured, replication to BigQuery:\n+\n+1. Captures changes from your Postgres database (INSERT, UPDATE, DELETE, TRUNCATE operations)\n+2. Batches changes for optimal performance\n+3. Creates BigQuery tables automatically to match your Postgres schema\n+4. Streams data to BigQuery\n+\n+##### How tables are structured\n+\n+Due to BigQuery limitations, replicated tables use a versioned structure:\n+\n+- The table you query is a **view** (e.g., `users`)\n+- The actual data is stored in versioned tables with a `_version` suffix (e.g., `users_version`)\n+- When a table is truncated in your database, a new version is created and the view automatically points to the latest version\n+\n+This structure handles table truncations seamlessly while maintaining query compatibility.\n+\n+##### Limitations\n+\n+- **Row size**: Limited to 10 MB per row due to BigQuery Storage Write API constraints\n+\n+##### Additional resources\n+\n+- [BigQuery documentation](https://cloud.google.com/bigquery/docs) - Official Google BigQuery documentation\n+\n+</TabPanel>\n+</Tabs>\n \n ### Step 4: Monitor your pipeline\n \n-After creating a destination, the pipeline will start and appear in the destinations list. You can monitor the pipeline's status and performance from the Dashboard.\n+After creating a destination, the replication pipeline will start and appear in the destinations list. You can monitor the pipeline's status and performance from the Dashboard.\n \n <Image\n-  alt=\"Destinations List\"\n+  alt=\"Replication Destinations List\"\n   src=\"/docs/img/database/replication/replication-destinations-list.png\"\n   zoomable\n />\n@@ -171,11 +355,11 @@ Available actions:\n \n ### Adding or removing tables\n \n-If you need to modify which tables are replicated after your pipeline is already running, follow these steps:\n+If you need to modify which tables are replicated after your replication pipeline is already running, follow these steps:\n \n <Admonition type=\"note\">\n \n-If your publication uses `FOR ALL TABLES` or `FOR TABLES IN SCHEMA`, new tables in that scope are automatically included in the publication. However, you still **must restart the pipeline** for the changes to take effect.\n+If your Postgres publication uses `FOR ALL TABLES` or `FOR TABLES IN SCHEMA`, new tables in that scope are automatically included in the publication. However, you still **must restart the replication pipeline** for the changes to take effect.\n \n </Admonition>\n \n@@ -191,11 +375,11 @@ If your publication uses `FOR ALL TABLES` or `FOR TABLES IN SCHEMA`, new tables\n    alter publication pub_users_orders add table products, categories;\n    ```\n \n-2. **Restart the pipeline** using the actions menu (see [Managing your pipeline](#managing-your-pipeline)) for the changes to take effect.\n+2. **Restart the replication pipeline** using the actions menu (see [Managing your pipeline](#managing-your-pipeline)) for the changes to take effect.\n \n #### Removing tables from replication\n \n-1. Remove the table from your publication using SQL:\n+1. Remove the table from your Postgres publication using SQL:\n \n    ```sql\n    -- Remove a single table from a publication\n@@ -205,56 +389,57 @@ If your publication uses `FOR ALL TABLES` or `FOR TABLES IN SCHEMA`, new tables\n    alter publication pub_users_orders drop table orders, products;\n    ```\n \n-2. **Restart the pipeline** using the actions menu (see [Managing your pipeline](#managing-your-pipeline)) for the changes to take effect.\n+2. **Restart the replication pipeline** using the actions menu (see [Managing your pipeline](#managing-your-pipeline)) for the changes to take effect.\n \n-### How it works\n+<Admonition type=\"note\">\n \n-Once configured, replication:\n+Deleted tables are automatically recreated by the pipeline. To permanently delete a table, pause the pipeline first or remove it from the publication before deleting. See the [FAQ](/docs/guides/database/replication/replication-faq#what-happens-if-a-table-is-deleted-at-the-destination) for details.\n \n-1. **Captures** changes from your database using the publication\n-2. **Loads** the data to your destination in near real-time batches\n+</Admonition>\n \n-Changes are sent in batches to optimize performance and reduce costs. The batch size and timing can be adjusted using the advanced settings.\n+### How it works\n \n-<Admonition type=\"note\">\n+Once configured, replication:\n \n-Replication currently performs data extraction and loading only, without transformation. Your data is replicated as-is to the destination.\n+1. **Captures** changes from your Postgres database using Postgres publications and logical replication\n+2. **Streams** the changes through the replication pipeline\n+3. **Loads** the data to your destination in near real-time batches\n \n-</Admonition>\n+Changes are sent in batches to optimize performance and reduce costs. The batch size and timing can be adjusted using the advanced settings. The replication pipeline currently performs data extraction and loading only, without transformation - your data is replicated as-is to the destination.\n \n ### Troubleshooting\n \n If you encounter issues during setup:\n \n-- **Publication not appearing**: Ensure you created the publication via SQL and refresh the dashboard\n-- **Tables not showing in publication**: Verify your tables have primary keys (required for replication)\n+- **Publication not appearing**: Ensure you created the Postgres publication via SQL and refresh the dashboard\n+- **Tables not showing in publication**: Verify your tables have primary keys (required for Postgres logical replication)\n - **Pipeline failed to start**: Check the error message in the status view for specific details\n-- **No data being replicated**: Verify your publication includes the correct tables and event types\n+- **No data being replicated**: Verify your Postgres publication includes the correct tables and event types\n \n For more troubleshooting help, see the [Replication FAQ](/docs/guides/database/replication/replication-faq).\n \n ### Limitations\n \n-Replication has the following limitations that apply to all destinations:\n+Replication has the following limitations:\n \n-- **Primary keys required**: Tables must have primary keys\n+- **Primary keys required**: Tables must have primary keys (Postgres logical replication requirement)\n - **Custom data types**: Not supported\n - **Schema changes**: Not automatically handled\n - **No data transformation**: Data is replicated as-is without transformation\n - **Data duplicates**: Duplicates can occur when stopping a pipeline if your database has transactions that take longer than a few minutes to complete. See [Can data duplicates occur?](/docs/guides/database/replication/replication-faq#can-data-duplicates-occur-during-pipeline-operations) for details\n \n-Destination-specific limitations may also apply. See the [Iceberg](/docs/guides/database/replication/replication-iceberg#limitations) destination page for details.\n+Destination-specific limitations (such as Iceberg's append-only log format or BigQuery's row size limits) are detailed in each destination tab in [Step 3](#step-3-add-a-destination) above.\n \n ### Future work\n \n Replication is actively being developed. Planned improvements include:\n \n-- **DDL support**: Automatic handling of schema changes (ALTER TABLE, ADD COLUMN, etc.)\n+- **DDL support**: Automatic handling of Postgres schema changes (ALTER TABLE, ADD COLUMN, etc.)\n - **Additional destinations**: Support for more data warehouses and analytics platforms\n \n-We don't have public timelines for these features, but they represent our roadmap for making replication more robust and flexible.\n+There are no public timelines for these features, but they represent the roadmap for making replication more robust and flexible.\n \n ### Next steps\n \n-- [Monitor replication](/docs/guides/database/replication/replication-monitoring)\n-- [View replication FAQ](/docs/guides/database/replication/replication-faq)\n+- [Monitor Replication](/docs/guides/database/replication/replication-monitoring)\n+- [View Replication FAQ](/docs/guides/database/replication/replication-faq)\ndiff --git a/apps/docs/content/guides/storage/analytics/replication.mdx b/apps/docs/content/guides/storage/analytics/replication.mdx\nindex 867e37a7b768d..842231cb05a36 100644\n--- a/apps/docs/content/guides/storage/analytics/replication.mdx\n+++ b/apps/docs/content/guides/storage/analytics/replication.mdx\n@@ -5,15 +5,17 @@ subtitle: 'Replicate your PostgreSQL data to analytics buckets in real-time.'\n \n <Admonition type=\"caution\" title=\"This feature is in alpha\">\n \n-Expect rapid changes, limited features, and possible breaking updates. [Share feedback](https://github.com/orgs/supabase/discussions/40116) as we refine the experience and expand access.\n+Expect rapid changes, limited features, and possible breaking updates. [Share feedback](https://github.com/orgs/supabase/discussions/40116) as the experience is refined and access is expanded.\n \n </Admonition>\n \n By combining replication powered by [Supabase ETL](https://github.com/supabase/etl) with **Analytics Buckets**, you can build an end-to-end data warehouse solution that automatically syncs changes from your Postgres database to Iceberg tables.\n \n+This guide provides a quickstart for replicating to Analytics Buckets. For complete replication configuration including other destinations, see the [Replication Setup Guide](/docs/guides/database/replication/replication-setup).\n+\n ## How it works\n \n-The replication pipeline captures changes (INSERT, UPDATE, DELETE) from your Postgres database in real-time and writes them to your analytics bucket. This allows you to maintain an always-up-to-date data warehouse without impacting your production workloads.\n+The replication pipeline captures changes (INSERT, UPDATE, DELETE) from your Postgres database in real-time using Postgres logical replication and writes them to your analytics bucket. This allows you to maintain an always-up-to-date data warehouse without impacting your production workloads.\n \n ## Setup steps\n \n@@ -43,7 +45,7 @@ CREATE PUBLICATION pub_warehouse\n   FOR TABLE users, orders, products;\n ```\n \n-This publication will track all changes (INSERT, UPDATE, DELETE) for the specified tables. For advanced use cases, see the [Replication Configuration Guide](/docs/guides/database/replication/replication-setup).\n+This publication will track all changes (INSERT, UPDATE, DELETE) for the specified tables. For advanced publication options like column filtering and row predicates, see the [Replication Setup Guide](/docs/guides/database/replication/replication-setup#advanced-publication-options).\n \n ### Step 3: Create the replication pipeline\n \n@@ -70,6 +72,12 @@ Once started, you can monitor the pipeline status directly in the **Database > R\n - **Sync Progress** - View the number of records replicated\n - **Logs** - Check detailed logs for troubleshooting\n \n+<Admonition type=\"note\">\n+\n+Deleted tables are automatically recreated by the pipeline. To permanently delete a table, pause the pipeline first or remove it from the publication before deleting. See the [FAQ](/docs/guides/database/replication/replication-faq#what-happens-if-i-delete-a-table-at-the-destination) for details.\n+\n+</Admonition>\n+\n ## Next steps\n \n Once data is flowing to your analytics bucket, you can:\n@@ -78,4 +86,8 @@ Once data is flowing to your analytics bucket, you can:\n - [Connect with PyIceberg](/docs/guides/storage/analytics/examples/pyiceberg)\n - [Analyze with Apache Spark](/docs/guides/storage/analytics/examples/apache-spark)\n \n-For advanced topics, see the [Replication Monitoring Guide](/docs/guides/database/replication/replication-monitoring).\n+For detailed replication configuration and advanced topics:\n+\n+- [Replication Setup Guide](/docs/guides/database/replication/replication-setup) - Complete replication configuration including BigQuery and other destinations\n+- [Replication Monitoring Guide](/docs/guides/database/replication/replication-monitoring) - Monitor replication pipeline status and health\n+- [Replication FAQ](/docs/guides/database/replication/replication-faq) - Common questions about replication\ndiff --git a/apps/docs/public/img/database/replication/replication-enable-replication.png b/apps/docs/public/img/database/replication/replication-enable-replication.png\nindex e6c34f117a554..d1d79a68b8b6c 100644\nBinary files a/apps/docs/public/img/database/replication/replication-enable-replication.png and b/apps/docs/public/img/database/replication/replication-enable-replication.png differ\n",
			"diffSize": 56058,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "79022cabc0ed34f4c3e30468c10e489820f57008",
			"message": "Update GH discussion for vector buckets (#40816)",
			"user": "joshenlim",
			"timestamp": "2025-11-26T08:34:51Z",
			"author": {
				"name": "Joshen Lim",
				"email": "joshenlimek@gmail.com",
				"username": "joshenlim"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Storage/AlphaNotice.tsx",
					"apps/studio/components/interfaces/Storage/BucketsComingSoon.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Storage/AlphaNotice.tsx b/apps/studio/components/interfaces/Storage/AlphaNotice.tsx\nindex ee856218234e1..6f8ca9109569e 100644\n--- a/apps/studio/components/interfaces/Storage/AlphaNotice.tsx\n+++ b/apps/studio/components/interfaces/Storage/AlphaNotice.tsx\n@@ -44,7 +44,7 @@ export const AlphaNotice = ({ type }: { type: 'analytics' | 'vector' }) => {\n               type === 'analytics'\n                 ? 'https://github.com/orgs/supabase/discussions/40116'\n                 : // [Joshen] To update with Vector specific GH discussion\n-                  'https://github.com/orgs/supabase/discussions/40116'\n+                  'https://github.com/orgs/supabase/discussions/40815'\n             }\n           >\n             Share feedback\ndiff --git a/apps/studio/components/interfaces/Storage/BucketsComingSoon.tsx b/apps/studio/components/interfaces/Storage/BucketsComingSoon.tsx\nindex 38464a4cf5222..d7f1e3fe827fb 100644\n--- a/apps/studio/components/interfaces/Storage/BucketsComingSoon.tsx\n+++ b/apps/studio/components/interfaces/Storage/BucketsComingSoon.tsx\n@@ -2,7 +2,6 @@ import { ExternalLink, FolderClock } from 'lucide-react'\n import Link from 'next/link'\n \n import { ScaffoldSection } from 'components/layouts/Scaffold'\n-import { FilesBucket as FilesBucketIcon } from 'icons'\n import { Button } from 'ui'\n import { BUCKET_TYPES } from './Storage.constants'\n \n",
			"diffSize": 1412,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "b52739f452bf43ad5a50240b8f895cb44314d9a8",
			"message": "Analytics and Vector buckets should not be visible for CLI or self host dashboard (#40814)\n\n* Analytics and Vector buckets should not be visible for CLI or self host dashboard\n\n* Clean",
			"user": "joshenlim",
			"timestamp": "2025-11-26T08:29:19Z",
			"author": {
				"name": "Joshen Lim",
				"email": "joshenlimek@gmail.com",
				"username": "joshenlim"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Storage/Storage.constants.ts",
					"apps/studio/components/interfaces/Storage/StorageMenuV2.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Storage/Storage.constants.ts b/apps/studio/components/interfaces/Storage/Storage.constants.ts\nindex 9860334c7111b..ce316ec56a84c 100644\n--- a/apps/studio/components/interfaces/Storage/Storage.constants.ts\n+++ b/apps/studio/components/interfaces/Storage/Storage.constants.ts\n@@ -62,7 +62,6 @@ export const CONTEXT_MENU_KEYS = {\n \n export const BUCKET_TYPES = {\n   files: {\n-    platformOnly: false,\n     displayName: 'Files',\n     singularName: 'file',\n     article: 'a',\n@@ -71,7 +70,6 @@ export const BUCKET_TYPES = {\n     docsUrl: `${DOCS_URL}/guides/storage/buckets/fundamentals`,\n   },\n   analytics: {\n-    platformOnly: true,\n     displayName: 'Analytics',\n     singularName: 'analytics',\n     article: 'an',\n@@ -80,7 +78,6 @@ export const BUCKET_TYPES = {\n     docsUrl: `${DOCS_URL}/guides/storage/analytics/introduction`,\n   },\n   vectors: {\n-    platformOnly: true,\n     displayName: 'Vectors',\n     singularName: 'vector',\n     article: 'a',\ndiff --git a/apps/studio/components/interfaces/Storage/StorageMenuV2.tsx b/apps/studio/components/interfaces/Storage/StorageMenuV2.tsx\nindex 7a86d184d62e8..b3f856eac6be8 100644\n--- a/apps/studio/components/interfaces/Storage/StorageMenuV2.tsx\n+++ b/apps/studio/components/interfaces/Storage/StorageMenuV2.tsx\n@@ -22,10 +22,10 @@ export const StorageMenuV2 = () => {\n   const isAnalyticsBucketsEnabled = useIsAnalyticsBucketsEnabled({ projectRef: ref })\n   const isVectorBucketsEnabled = useIsVectorBucketsEnabled({ projectRef: ref })\n \n-  const bucketTypes = Object.entries(BUCKET_TYPES).filter(([key, config]) => {\n-    if (key === 'analytics') return storageAnalytics\n-    if (key === 'vectors') return storageVectors\n-    return IS_PLATFORM || (!IS_PLATFORM && !config.platformOnly)\n+  const bucketTypes = Object.entries(BUCKET_TYPES).filter(([key]) => {\n+    if (key === 'analytics') return IS_PLATFORM && storageAnalytics\n+    if (key === 'vectors') return IS_PLATFORM && storageVectors\n+    return true\n   })\n \n   return (\n",
			"diffSize": 2027,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "5701a291fefc0a2acb012949eff953d1b1a2c84d",
			"message": "Fix Users page not invalidating data when switching search mode (#40809)\n\n* Fix Users page not invalidating data when switching search mode\n\n* Nit fix",
			"user": "joshenlim",
			"timestamp": "2025-11-26T08:15:34Z",
			"author": {
				"name": "Joshen Lim",
				"email": "joshenlimek@gmail.com",
				"username": "joshenlim"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Auth/Users/UsersV2.tsx",
					"apps/studio/data/auth/keys.ts",
					"apps/studio/data/auth/users-infinite-query.ts"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Auth/Users/UsersV2.tsx b/apps/studio/components/interfaces/Auth/Users/UsersV2.tsx\nindex d336d36c9e91f..3f372efe3d8da 100644\n--- a/apps/studio/components/interfaces/Auth/Users/UsersV2.tsx\n+++ b/apps/studio/components/interfaces/Auth/Users/UsersV2.tsx\n@@ -20,9 +20,9 @@ import { User, useUsersInfiniteQuery } from 'data/auth/users-infinite-query'\n import { useSendEventMutation } from 'data/telemetry/send-event-mutation'\n import { useIsFeatureEnabled } from 'hooks/misc/useIsFeatureEnabled'\n import { useLocalStorageQuery } from 'hooks/misc/useLocalStorage'\n+import { useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { useSelectedOrganizationQuery } from 'hooks/misc/useSelectedOrganization'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n-import { useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { cleanPointerEventsNoneOnBody, isAtBottom } from 'lib/helpers'\n import { parseAsArrayOf, parseAsString, parseAsStringEnum, useQueryState } from 'nuqs'\n import {\n@@ -365,7 +365,7 @@ export const UsersV2 = () => {\n       isCountLoaded &&\n       isCountWithinThresholdForSortBy\n     ) {\n-      if (specificFilterColumn === 'id' && localStorageFilter !== 'id') {\n+      if (specificFilterColumn === 'email' && localStorageFilter !== 'email') {\n         setSpecificFilterColumn(localStorageFilter)\n       }\n       if (sortByValue === 'id:asc' && localStorageSortByValue !== 'id:asc') {\ndiff --git a/apps/studio/data/auth/keys.ts b/apps/studio/data/auth/keys.ts\nindex 0adb87b7b9eff..8067d37c10998 100644\n--- a/apps/studio/data/auth/keys.ts\n+++ b/apps/studio/data/auth/keys.ts\n@@ -21,30 +21,24 @@ export const authKeys = {\n   usersInfinite: (\n     projectRef: string | undefined,\n     params?: {\n-      keywords: string | undefined\n-      filter: string | undefined\n-      providers: string[] | undefined\n-      sort: string | undefined\n-      order: string | undefined\n+      keywords?: string\n+      filter?: string\n+      providers?: string[]\n+      sort?: string\n+      order?: string\n+      column?: OptimizedSearchColumns\n     }\n-  ) =>\n-    [\n-      'projects',\n-      projectRef,\n-      'users-infinite',\n-      ...(params ? [params].filter(Boolean) : []),\n-    ] as const,\n+  ) => ['projects', projectRef, 'users-infinite', params] as const,\n   usersCount: (\n     projectRef: string | undefined,\n     params?: {\n-      keywords: string | undefined\n-      filter: string | undefined\n-      providers: string[] | undefined\n+      keywords?: string\n+      filter?: string\n+      providers?: string[]\n       forceExactCount?: boolean\n       column?: OptimizedSearchColumns\n     }\n-  ) =>\n-    ['projects', projectRef, 'users-count', ...(params ? [params].filter(Boolean) : [])] as const,\n+  ) => ['projects', projectRef, 'users-count', params] as const,\n \n   authConfig: (projectRef: string | undefined) => ['projects', projectRef, 'auth-config'] as const,\n   accessToken: () => ['access-token'] as const,\ndiff --git a/apps/studio/data/auth/users-infinite-query.ts b/apps/studio/data/auth/users-infinite-query.ts\nindex f6f97b6f66c19..c9f524880c729 100644\n--- a/apps/studio/data/auth/users-infinite-query.ts\n+++ b/apps/studio/data/auth/users-infinite-query.ts\n@@ -46,7 +46,14 @@ export const useUsersInfiniteQuery = <TData = UsersData>(\n   const isActive = project?.status === PROJECT_STATUS.ACTIVE_HEALTHY\n \n   return useInfiniteQuery<UsersData, UsersError, TData>({\n-    queryKey: authKeys.usersInfinite(projectRef, { keywords, filter, providers, sort, order }),\n+    queryKey: authKeys.usersInfinite(projectRef, {\n+      keywords,\n+      filter,\n+      providers,\n+      sort,\n+      order,\n+      column,\n+    }),\n     queryFn: ({ signal, pageParam }) => {\n       return executeSql(\n         {\n@@ -63,7 +70,6 @@ export const useUsersInfiniteQuery = <TData = UsersData>(\n             column,\n             startAt: column ? (pageParam as string) : undefined,\n           }),\n-          queryKey: authKeys.usersInfinite(projectRef),\n         },\n         signal\n       )\n",
			"diffSize": 4092,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "37a7a020c3713e497c6bbf0c25b56bb6b5473e9c",
			"message": "Add note about rate limits when enabling/disabling custom smtp (#40764)\n\n* Add note about rate limits when enabling/disabling custom smtp\n\n* Update",
			"user": "joshenlim",
			"timestamp": "2025-11-26T08:06:47Z",
			"author": {
				"name": "Joshen Lim",
				"email": "joshenlimek@gmail.com",
				"username": "joshenlim"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx b/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx\nindex 01be3cbe7dcad..c8fc282d05369 100644\n--- a/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx\n@@ -25,6 +25,7 @@ import {\n   Input_Shadcn_,\n   PrePostTab,\n   Switch,\n+  cn,\n } from 'ui'\n import { Admonition } from 'ui-patterns'\n import { FormItemLayout } from 'ui-patterns/form/FormItemLayout/FormItemLayout'\n@@ -444,20 +445,45 @@ export const SmtpForm = () => {\n               </>\n             )}\n \n-            <CardFooter className=\"justify-end space-x-2\">\n+            <CardFooter\n+              className={cn(form.formState.isDirty ? 'justify-between' : 'justify-end', 'gap-x-2')}\n+            >\n               {form.formState.isDirty && (\n-                <Button type=\"default\" onClick={() => form.reset()}>\n-                  Cancel\n-                </Button>\n+                <p className=\"text-sm text-foreground-light\">\n+                  {enableSmtp ? (\n+                    <>\n+                      Rate limit for sending emails will be increased to 30 and{' '}\n+                      <InlineLink href={`/project/${projectRef}/auth/rate-limits`}>\n+                        can be adjusted\n+                      </InlineLink>{' '}\n+                      after enabling custom SMTP\n+                    </>\n+                  ) : (\n+                    'Rate limit for sending emails will be reduced to 2 after disabling custom SMTP'\n+                  )}\n+                </p>\n               )}\n-              <Button\n-                type=\"primary\"\n-                htmlType=\"submit\"\n-                loading={isUpdatingConfig}\n-                disabled={!canUpdateConfig || !form.formState.isDirty}\n-              >\n-                Save changes\n-              </Button>\n+              <div className=\"flex items-center gap-x-2\">\n+                {form.formState.isDirty && (\n+                  <Button\n+                    type=\"default\"\n+                    onClick={() => {\n+                      form.reset()\n+                      setEnableSmtp(isSmtpEnabled(authConfig))\n+                    }}\n+                  >\n+                    Cancel\n+                  </Button>\n+                )}\n+                <Button\n+                  type=\"primary\"\n+                  htmlType=\"submit\"\n+                  loading={isUpdatingConfig}\n+                  disabled={!canUpdateConfig || !form.formState.isDirty}\n+                >\n+                  Save changes\n+                </Button>\n+              </div>\n             </CardFooter>\n           </Card>\n         </form>\n",
			"diffSize": 2711,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "a054053f751aea288e35d478bcf4c377565edcca",
			"message": "feat: adds success message to link support query (#40773)\n\n* feat: adds success message to link support query\n\n* style: fixes styling\n\n* Use existing support form components + fix styling issues + refactor and clean up\n\n* nit\n\n---------\n\nCo-authored-by: Joshen Lim <joshenlimek@gmail.com>",
			"user": "barcofourie",
			"timestamp": "2025-11-26T07:57:16Z",
			"author": {
				"name": "barcofourie",
				"email": "barco.fourie@gmail.com",
				"username": "barcofourie"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Support/CategoryAndSeverityInfo.tsx",
					"apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts",
					"apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx",
					"apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx",
					"apps/studio/components/interfaces/Support/ProjectAndPlanInfo.tsx",
					"apps/studio/hooks/misc/useHideSidebar.ts"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Support/CategoryAndSeverityInfo.tsx b/apps/studio/components/interfaces/Support/CategoryAndSeverityInfo.tsx\nindex d8bc51dd936de..4ec3871f8b900 100644\n--- a/apps/studio/components/interfaces/Support/CategoryAndSeverityInfo.tsx\n+++ b/apps/studio/components/interfaces/Support/CategoryAndSeverityInfo.tsx\n@@ -27,8 +27,10 @@ import { NO_PROJECT_MARKER } from './SupportForm.utils'\n interface CategoryAndSeverityInfoProps {\n   form: UseFormReturn<SupportFormValues>\n   category: ExtendedSupportCategories\n-  severity: string\n+  severity?: string\n   projectRef: string\n+  showSeverity?: boolean\n+  showIssueSuggestion?: boolean\n }\n \n export function CategoryAndSeverityInfo({\n@@ -36,14 +38,19 @@ export function CategoryAndSeverityInfo({\n   category,\n   severity,\n   projectRef,\n+  showSeverity = true,\n+  showIssueSuggestion = true,\n }: CategoryAndSeverityInfoProps) {\n   return (\n-    <div className={cn('grid sm:grid-cols-2 sm:grid-rows-1 gap-4 grid-cols-1 grid-rows-2')}>\n+    <div\n+      className={cn(\n+        'grid sm:grid-rows-1 gap-4 grid-cols-1 grid-rows-2',\n+        showSeverity ? 'sm:grid-cols-2' : 'sm:grid-cols-1'\n+      )}\n+    >\n       <CategorySelector form={form} />\n-      <SeveritySelector form={form} />\n-\n-      <IssueSuggestion category={category} projectRef={projectRef} />\n-\n+      {showSeverity && <SeveritySelector form={form} />}\n+      {showIssueSuggestion && <IssueSuggestion category={category} projectRef={projectRef} />}\n       {(severity === 'Urgent' || severity === 'High') && (\n         <Admonition\n           type=\"default\"\ndiff --git a/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts\nindex 56b67ce690481..406a0e3961cb6 100644\n--- a/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts\n+++ b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts\n@@ -11,7 +11,7 @@ export const LinkSupportTicketFormSchema = z.object({\n     .refine((val) => val !== NO_ORG_MARKER, {\n       message: 'Please select an organization',\n     }),\n-  projectRef: z.string().optional(),\n+  projectRef: z.string().min(1, 'Please select a project'),\n   category: z.enum(\n     CATEGORY_OPTIONS.map((opt) => opt.value) as [\n       ExtendedSupportCategories,\ndiff --git a/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx\nindex 65a36291d817c..aeb328934676e 100644\n--- a/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx\n+++ b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx\n@@ -1,7 +1,6 @@\n import { zodResolver } from '@hookform/resolvers/zod'\n-import { Check, ChevronsUpDown, ChevronRight } from 'lucide-react'\n-import Link from 'next/link'\n-import { useRouter } from 'next/router'\n+import { Link2 } from 'lucide-react'\n+import { useEffect } from 'react'\n import type { SubmitHandler } from 'react-hook-form'\n import { useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n@@ -9,44 +8,37 @@ import { toast } from 'sonner'\n import { useLinkSupportTicketMutation } from 'data/feedback/link-support-ticket-mutation'\n import { useOrganizationsQuery } from 'data/organizations/organizations-query'\n import {\n-  Badge,\n   Button,\n-  Collapsible_Shadcn_,\n-  CollapsibleContent_Shadcn_,\n-  CollapsibleTrigger_Shadcn_,\n-  CommandGroup_Shadcn_,\n-  CommandItem_Shadcn_,\n   DialogSectionSeparator,\n+  Form_Shadcn_,\n   FormControl_Shadcn_,\n   FormField_Shadcn_,\n-  Form_Shadcn_,\n   Input_Shadcn_,\n-  Select_Shadcn_,\n-  SelectContent_Shadcn_,\n-  SelectGroup_Shadcn_,\n-  SelectItem_Shadcn_,\n-  SelectTrigger_Shadcn_,\n-  SelectValue_Shadcn_,\n-  Switch,\n-  cn,\n } from 'ui'\n import { FormItemLayout } from 'ui-patterns/form/FormItemLayout/FormItemLayout'\n-import { OrganizationProjectSelector } from 'components/ui/OrganizationProjectSelector'\n-import ShimmeringLoader from 'ui-patterns/ShimmeringLoader'\n-import { CATEGORY_OPTIONS, type ExtendedSupportCategories } from './Support.constants'\n+import { CategoryAndSeverityInfo } from './CategoryAndSeverityInfo'\n import {\n   LinkSupportTicketFormSchema,\n   type LinkSupportTicketFormValues,\n } from './LinkSupportTicketForm.schema'\n-import { NO_ORG_MARKER, NO_PROJECT_MARKER } from './SupportForm.utils'\n+import { OrganizationSelector } from './OrganizationSelector'\n+import { ProjectAndPlanInfo } from './ProjectAndPlanInfo'\n+import { SUPPORT_ACCESS_CATEGORIES, SupportAccessToggle } from './SupportAccessToggle'\n+import { getOrgSubscriptionPlan, NO_ORG_MARKER, NO_PROJECT_MARKER } from './SupportForm.utils'\n \n interface LinkSupportTicketFormProps {\n   conversationId: string\n+  onSuccess: () => void\n }\n \n-export function LinkSupportTicketForm({ conversationId }: LinkSupportTicketFormProps) {\n-  const router = useRouter()\n-  const { data: organizations } = useOrganizationsQuery()\n+// [Joshen] Am reusing the SupportFormV2 components here but am not sure how to type things properly\n+// hence marking all the `form` as `any` when passing as props to the components for now\n+\n+export const LinkSupportTicketForm = ({\n+  conversationId,\n+  onSuccess,\n+}: LinkSupportTicketFormProps) => {\n+  const { data: organizations, isSuccess } = useOrganizationsQuery()\n \n   const form = useForm<LinkSupportTicketFormValues>({\n     resolver: zodResolver(LinkSupportTicketFormSchema),\n@@ -61,30 +53,32 @@ export function LinkSupportTicketForm({ conversationId }: LinkSupportTicketFormP\n     reValidateMode: 'onBlur',\n   })\n \n-  const { mutate: linkSupportTicket, isLoading } = useLinkSupportTicketMutation({\n+  const { category, organizationSlug, projectRef } = form.watch()\n+  const selectedOrgSlug = organizationSlug === NO_ORG_MARKER ? null : organizationSlug\n+  const selectedProjectRef = projectRef === NO_PROJECT_MARKER ? null : projectRef\n+  const subscriptionPlanId = getOrgSubscriptionPlan(organizations, selectedOrgSlug)\n+\n+  const { mutate: linkSupportTicket, isPending } = useLinkSupportTicketMutation({\n     onSuccess: () => {\n       toast.success('Support ticket linked successfully!')\n-      router.push('/')\n+      onSuccess()\n     },\n     onError: (error) => {\n-      toast.error(`Failed to link support ticket: ${error.message}`)\n+      let errorMessage = error.message\n+      try {\n+        const parsed = JSON.parse(error.message)\n+        errorMessage = parsed?._error?.message || parsed?.message || error.message\n+      } catch {}\n+      // If parsing fails, use the original message\n+      toast.error(`Failed to link support ticket: ${errorMessage}`)\n     },\n   })\n \n-  const organizationSlug = form.watch('organizationSlug')\n-  const selectedOrgSlug = organizationSlug === NO_ORG_MARKER ? null : organizationSlug\n-\n   const onSubmit: SubmitHandler<LinkSupportTicketFormValues> = (values) => {\n-    if (!organizations) {\n-      toast.error('Organizations not loaded. Please try again.')\n-      return\n-    }\n+    if (!organizations) return toast.error('Organizations not loaded. Please try again.')\n \n     const selectedOrg = organizations.find((org) => org.slug === values.organizationSlug)\n-    if (!selectedOrg) {\n-      toast.error('Selected organization not found. Please try again.')\n-      return\n-    }\n+    if (!selectedOrg) return toast.error('Selected organization not found. Please try again.')\n \n     linkSupportTicket({\n       conversation_id: values.conversation_id,\n@@ -94,264 +88,88 @@ export function LinkSupportTicketForm({ conversationId }: LinkSupportTicketFormP\n           ? values.projectRef\n           : undefined,\n       category: values.category,\n-      allow_support_access: values.allowSupportAccess,\n+      allow_support_access: SUPPORT_ACCESS_CATEGORIES.includes(values.category)\n+        ? values.allowSupportAccess\n+        : false,\n     })\n   }\n \n+  useEffect(() => {\n+    if (!!organizations && organizations.length > 0) {\n+      form.reset({\n+        conversation_id: conversationId,\n+        organizationSlug: organizations[0].slug,\n+        projectRef: NO_PROJECT_MARKER,\n+        category: '' as any,\n+        allowSupportAccess: true,\n+      })\n+    }\n+    // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, [isSuccess])\n+\n   return (\n     <Form_Shadcn_ {...form}>\n       <form\n         id=\"link-support-ticket-form\"\n         onSubmit={form.handleSubmit(onSubmit)}\n-        className=\"flex flex-col gap-y-6\"\n+        className=\"flex flex-col\"\n       >\n-        <h3 className=\"px-6 text-xl\">Link support ticket to account</h3>\n-\n-        <div className=\"px-6 flex flex-col gap-y-8\">\n-          <FormField_Shadcn_\n-            control={form.control}\n-            name=\"conversation_id\"\n-            render={({ field }) => (\n-              <FormItemLayout hideMessage layout=\"vertical\" label=\"Conversation ID\">\n-                <FormControl_Shadcn_>\n-                  <Input_Shadcn_ {...field} disabled readOnly />\n-                </FormControl_Shadcn_>\n-              </FormItemLayout>\n-            )}\n-          />\n-\n-          <FormField_Shadcn_\n-            control={form.control}\n-            name=\"organizationSlug\"\n-            render={({ field }) => {\n-              const { ref: _ref, ...fieldWithoutRef } = field\n-              return (\n-                <FormItemLayout layout=\"vertical\" label=\"Which organization is affected?\">\n+        <div className=\"flex flex-col py-6 gap-y-6\">\n+          <h3 className=\"px-6 text-xl\">Link support ticket to account</h3>\n+          <div className=\"px-6 flex flex-col gap-y-8\">\n+            <FormField_Shadcn_\n+              control={form.control}\n+              name=\"conversation_id\"\n+              render={({ field }) => (\n+                <FormItemLayout hideMessage layout=\"vertical\" label=\"Conversation ID\">\n                   <FormControl_Shadcn_>\n-                    <Select_Shadcn_\n-                      {...fieldWithoutRef}\n-                      disabled={!organizations}\n-                      defaultValue={field.value}\n-                      onValueChange={(value) => {\n-                        const previousOrgSlug = form.getValues('organizationSlug')\n-                        field.onChange(value)\n-                        if (previousOrgSlug !== value) {\n-                          form.resetField('projectRef', { defaultValue: NO_PROJECT_MARKER })\n-                        }\n-                      }}\n-                    >\n-                      <SelectTrigger_Shadcn_ className=\"w-full\" aria-label=\"Select an organization\">\n-                        <SelectValue_Shadcn_ placeholder=\"Select an organization\">\n-                          {organizationSlug === NO_ORG_MARKER\n-                            ? 'Select an organization'\n-                            : organizations?.find((o) => o.slug === field.value)?.name}\n-                        </SelectValue_Shadcn_>\n-                      </SelectTrigger_Shadcn_>\n-                      <SelectContent_Shadcn_>\n-                        <SelectGroup_Shadcn_>\n-                          {organizations?.map((org) => (\n-                            <SelectItem_Shadcn_ key={org.slug} value={org.slug}>\n-                              {org.name}\n-                            </SelectItem_Shadcn_>\n-                          ))}\n-                        </SelectGroup_Shadcn_>\n-                      </SelectContent_Shadcn_>\n-                    </Select_Shadcn_>\n+                    <Input_Shadcn_ {...field} readOnly />\n                   </FormControl_Shadcn_>\n                 </FormItemLayout>\n-              )\n-            }}\n-          />\n-\n-          <FormField_Shadcn_\n-            control={form.control}\n-            name=\"projectRef\"\n-            render={({ field }) => (\n-              <FormItemLayout hideMessage layout=\"vertical\" label=\"Which project is affected?\">\n-                <FormControl_Shadcn_>\n-                  <OrganizationProjectSelector\n-                    key={selectedOrgSlug}\n-                    sameWidthAsTrigger\n-                    fetchOnMount\n-                    checkPosition=\"left\"\n-                    slug={\n-                      !selectedOrgSlug || selectedOrgSlug === NO_ORG_MARKER\n-                        ? undefined\n-                        : selectedOrgSlug\n-                    }\n-                    selectedRef={field.value}\n-                    onSelect={(project) => field.onChange(project.ref)}\n-                    renderTrigger={({ isLoading, project }) => {\n-                      return (\n-                        <Button\n-                          block\n-                          type=\"default\"\n-                          role=\"combobox\"\n-                          aria-label=\"Select a project\"\n-                          size=\"small\"\n-                          className=\"justify-between\"\n-                          iconRight={\n-                            <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n-                          }\n-                          disabled={!selectedOrgSlug}\n-                        >\n-                          {!selectedOrgSlug ? (\n-                            'Select an organization first'\n-                          ) : isLoading ? (\n-                            <ShimmeringLoader className=\"w-44 py-2\" />\n-                          ) : !field.value || field.value === NO_PROJECT_MARKER ? (\n-                            'No specific project'\n-                          ) : (\n-                            project?.name ?? 'Unknown project'\n-                          )}\n-                        </Button>\n-                      )\n-                    }}\n-                    renderActions={(setOpen) => (\n-                      <CommandGroup_Shadcn_>\n-                        <CommandItem_Shadcn_\n-                          className=\"w-full gap-x-2\"\n-                          onSelect={() => {\n-                            field.onChange(NO_PROJECT_MARKER)\n-                            setOpen(false)\n-                          }}\n-                        >\n-                          {field.value === NO_PROJECT_MARKER && <Check size={16} />}\n-                          <p className={field.value !== NO_PROJECT_MARKER ? 'ml-6' : ''}>\n-                            No specific project\n-                          </p>\n-                        </CommandItem_Shadcn_>\n-                      </CommandGroup_Shadcn_>\n-                    )}\n-                  />\n-                </FormControl_Shadcn_>\n-              </FormItemLayout>\n+              )}\n+            />\n+\n+            <OrganizationSelector form={form as any} orgSlug={organizationSlug} />\n+            {organizationSlug !== NO_ORG_MARKER && (\n+              <ProjectAndPlanInfo\n+                form={form as any}\n+                orgSlug={selectedOrgSlug}\n+                projectRef={selectedProjectRef}\n+                subscriptionPlanId={subscriptionPlanId}\n+                category={category}\n+                showPlanExpectationInfo={false}\n+              />\n             )}\n-          />\n \n-          <FormField_Shadcn_\n-            control={form.control}\n-            name=\"category\"\n-            render={({ field }) => {\n-              const { ref: _ref, ...fieldWithoutRef } = field\n-              return (\n-                <FormItemLayout\n-                  hideMessage\n-                  layout=\"vertical\"\n-                  label=\"What are you having issues with?\"\n-                >\n-                  <FormControl_Shadcn_>\n-                    <Select_Shadcn_\n-                      {...fieldWithoutRef}\n-                      defaultValue={field.value}\n-                      onValueChange={field.onChange}\n-                    >\n-                      <SelectTrigger_Shadcn_ aria-label=\"Select an issue\" className=\"w-full\">\n-                        <SelectValue_Shadcn_ placeholder=\"Select an issue\">\n-                          {field.value\n-                            ? CATEGORY_OPTIONS.find((o) => o.value === field.value)?.label\n-                            : null}\n-                        </SelectValue_Shadcn_>\n-                      </SelectTrigger_Shadcn_>\n-                      <SelectContent_Shadcn_>\n-                        <SelectGroup_Shadcn_>\n-                          {CATEGORY_OPTIONS.filter((option) => !option.hidden).map((option) => (\n-                            <SelectItem_Shadcn_ key={option.value} value={option.value}>\n-                              {option.label}\n-                              <span className=\"block text-xs text-foreground-lighter\">\n-                                {option.description}\n-                              </span>\n-                            </SelectItem_Shadcn_>\n-                          ))}\n-                        </SelectGroup_Shadcn_>\n-                      </SelectContent_Shadcn_>\n-                    </Select_Shadcn_>\n-                  </FormControl_Shadcn_>\n-                </FormItemLayout>\n-              )\n-            }}\n-          />\n+            <CategoryAndSeverityInfo\n+              showSeverity={false}\n+              showIssueSuggestion={false}\n+              form={form as any}\n+              category={category}\n+              projectRef={projectRef}\n+            />\n+          </div>\n         </div>\n \n         <DialogSectionSeparator />\n \n-        <FormField_Shadcn_\n-          control={form.control}\n-          name=\"allowSupportAccess\"\n-          render={({ field }) => {\n-            return (\n-              <FormItemLayout\n-                hideMessage\n-                name=\"allowSupportAccess\"\n-                className=\"px-6\"\n-                layout=\"flex\"\n-                label={\n-                  <div className=\"flex items-center gap-x-2\">\n-                    <span className=\"text-foreground\">Allow support access to your project</span>\n-                    <Badge className=\"bg-opacity-100\">Recommended</Badge>\n-                  </div>\n-                }\n-                description={\n-                  <div className=\"flex flex-col\">\n-                    <span className=\"text-foreground-light\">\n-                      Human support and AI diagnostic access.\n-                    </span>\n-                    <Collapsible_Shadcn_ className=\"mt-2\">\n-                      <CollapsibleTrigger_Shadcn_\n-                        className={\n-                          'group flex items-center gap-x-1 group-data-[state=open]:text-foreground hover:text-foreground transition'\n-                        }\n-                      >\n-                        <ChevronRight\n-                          size={14}\n-                          className=\"transition-all group-data-[state=open]:rotate-90 text-foreground-muted -ml-1\"\n-                        />\n-                        <span className=\"text-sm\">More information</span>\n-                      </CollapsibleTrigger_Shadcn_>\n-                      <CollapsibleContent_Shadcn_ className=\"text-sm text-foreground-light mt-2 space-y-2\">\n-                        <p>\n-                          By enabling this, you grant permission for our support team to access your\n-                          project temporarily and, if applicable, to use AI tools to assist in\n-                          diagnosing and resolving issues. This access may involve analyzing\n-                          database configurations, query performance, and other relevant data to\n-                          expedite troubleshooting and enhance support accuracy.\n-                        </p>\n-                        <p>\n-                          We are committed to maintaining strict data privacy and security standards\n-                          in all support activities.{' '}\n-                          <Link\n-                            href=\"https://supabase.com/privacy\"\n-                            target=\"_blank\"\n-                            rel=\"noreferrer\"\n-                            className=\"text-foreground-light underline hover:text-foreground transition\"\n-                          >\n-                            Privacy Policy\n-                          </Link>\n-                        </p>\n-                      </CollapsibleContent_Shadcn_>\n-                    </Collapsible_Shadcn_>\n-                  </div>\n-                }\n-              >\n-                <Switch\n-                  size=\"large\"\n-                  id=\"allowSupportAccess\"\n-                  checked={field.value}\n-                  onCheckedChange={field.onChange}\n-                />\n-              </FormItemLayout>\n-            )\n-          }}\n-        />\n+        {SUPPORT_ACCESS_CATEGORIES.includes(category) && (\n+          <>\n+            <div className=\"py-4\">\n+              <SupportAccessToggle form={form as any} />\n+            </div>\n+            <DialogSectionSeparator />\n+          </>\n+        )}\n \n-        <div className=\"px-6 pt-2\">\n+        <div className=\"px-6 py-8\">\n           <Button\n+            block\n             type=\"primary\"\n             htmlType=\"submit\"\n             size=\"large\"\n-            block\n-            disabled={isLoading}\n-            loading={isLoading}\n+            icon={<Link2 />}\n+            loading={isPending}\n           >\n             Link support ticket to account\n           </Button>\ndiff --git a/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx b/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx\nindex 7b0785034bc40..420b1a5662a24 100644\n--- a/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx\n+++ b/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx\n@@ -1,20 +1,34 @@\n+import { Check, Mail } from 'lucide-react'\n+import Link from 'next/link'\n import { useRouter } from 'next/router'\n-import type { PropsWithChildren } from 'react'\n+import { useState } from 'react'\n \n+import { Button, cn, DialogSectionSeparator } from 'ui'\n import { Admonition } from 'ui-patterns'\n+import { HighlightProjectRefProvider } from './HighlightContext'\n import { LinkSupportTicketForm } from './LinkSupportTicketForm'\n \n export function LinkSupportTicketPage() {\n   return (\n-    <LinkSupportTicketPageWrapper>\n-      <LinkSupportTicketPageContent />\n-    </LinkSupportTicketPageWrapper>\n+    <div className=\"h-full relative overflow-y-auto overflow-x-hidden\">\n+      <div className=\"h-full flex flex-col gap-y-8 items-center justify-center mx-auto max-w-2xl w-full px-4 lg:px-6\">\n+        <HighlightProjectRefProvider>\n+          <LinkSupportTicketPageContent />\n+        </HighlightProjectRefProvider>\n+      </div>\n+    </div>\n   )\n }\n \n function LinkSupportTicketPageContent() {\n   const router = useRouter()\n   const conversationId = router.query.conversationId as string | undefined\n+  const [isSuccess, setIsSuccess] = useState(false)\n+\n+  // Wait for router to be ready before checking for conversationId\n+  if (!router.isReady) {\n+    return null\n+  }\n \n   if (!conversationId) {\n     return (\n@@ -27,17 +41,45 @@ function LinkSupportTicketPageContent() {\n   }\n \n   return (\n-    <div className=\"min-w-full w-full space-y-12 rounded border bg-panel-body-light shadow-md py-8 border-default\">\n-      <LinkSupportTicketForm conversationId={conversationId} />\n+    <div\n+      className={cn(\n+        'min-w-full w-full space-y-12 rounded border bg-panel-body-light shadow-md border-default'\n+      )}\n+    >\n+      {isSuccess ? (\n+        <LinkSupportTicketSuccess />\n+      ) : (\n+        <LinkSupportTicketForm\n+          conversationId={conversationId}\n+          onSuccess={() => setIsSuccess(true)}\n+        />\n+      )}\n     </div>\n   )\n }\n \n-function LinkSupportTicketPageWrapper({ children }: PropsWithChildren) {\n+function LinkSupportTicketSuccess() {\n   return (\n-    <div className=\"relative overflow-y-auto overflow-x-hidden\">\n-      <div className=\"mx-auto my-16 max-w-2xl w-full px-4 lg:px-6\">\n-        <div className=\"flex flex-col gap-y-8\">{children}</div>\n+    <div className=\"w-full flex flex-col items-center\">\n+      <div className=\"flex flex-col items-center gap-y-4 py-8\">\n+        <div className=\"relative\">\n+          <Mail strokeWidth={1.5} size={60} className=\"text-brand\" />\n+          <div className=\"h-6 w-6 rounded-full bg-brand absolute bottom-1 -right-1.5 flex items-center justify-center\">\n+            <Check strokeWidth={4} size={18} />\n+          </div>\n+        </div>\n+        <div className=\"flex items-center flex-col gap-y-2 text-center\">\n+          <h3 className=\"text-xl\">Support ticket linked successfully!</h3>\n+          <p className=\"text-sm text-foreground-light\">\n+            Your support conversation has been linked to your account.\n+          </p>\n+        </div>\n+      </div>\n+      <DialogSectionSeparator />\n+      <div className=\"w-full py-4 px-4 flex items-center justify-end\">\n+        <Link href=\"/\">\n+          <Button>Go back</Button>\n+        </Link>\n       </div>\n     </div>\n   )\ndiff --git a/apps/studio/components/interfaces/Support/ProjectAndPlanInfo.tsx b/apps/studio/components/interfaces/Support/ProjectAndPlanInfo.tsx\nindex 362f9af3d0425..843595a530597 100644\n--- a/apps/studio/components/interfaces/Support/ProjectAndPlanInfo.tsx\n+++ b/apps/studio/components/interfaces/Support/ProjectAndPlanInfo.tsx\n@@ -32,6 +32,7 @@ interface ProjectAndPlanProps {\n   projectRef: string | null\n   category: ExtendedSupportCategories\n   subscriptionPlanId: string | undefined\n+  showPlanExpectationInfo?: boolean\n }\n \n export function ProjectAndPlanInfo({\n@@ -40,6 +41,7 @@ export function ProjectAndPlanInfo({\n   projectRef,\n   category,\n   subscriptionPlanId,\n+  showPlanExpectationInfo = true,\n }: ProjectAndPlanProps) {\n   const { ref } = useHighlightProjectRefContext()\n   const hasProjectSelected = projectRef && projectRef !== NO_PROJECT_MARKER\n@@ -50,12 +52,19 @@ export function ProjectAndPlanInfo({\n       <ProjectRefHighlighted projectRef={projectRef} />\n \n       {!hasProjectSelected && (\n-        <Admonition type=\"default\" title=\"Please note that no project has been selected\" />\n+        <Admonition\n+          type=\"default\"\n+          className=\"mb-0\"\n+          title=\"Please note that no project has been selected\"\n+        />\n       )}\n \n-      {orgSlug && subscriptionPlanId !== 'enterprise' && category !== 'Login_issues' && (\n-        <PlanExpectationInfoBox orgSlug={orgSlug} planId={subscriptionPlanId} />\n-      )}\n+      {showPlanExpectationInfo &&\n+        orgSlug &&\n+        subscriptionPlanId !== 'enterprise' &&\n+        category !== 'Login_issues' && (\n+          <PlanExpectationInfoBox orgSlug={orgSlug} planId={subscriptionPlanId} />\n+        )}\n     </div>\n   )\n }\ndiff --git a/apps/studio/hooks/misc/useHideSidebar.ts b/apps/studio/hooks/misc/useHideSidebar.ts\nindex 6c4214923f255..a63b4f6dced8f 100644\n--- a/apps/studio/hooks/misc/useHideSidebar.ts\n+++ b/apps/studio/hooks/misc/useHideSidebar.ts\n@@ -6,7 +6,7 @@ export function useHideSidebar() {\n   const shouldHide =\n     pathname.startsWith('/account') ||\n     pathname.startsWith('/new') ||\n-    pathname === '/support/new' ||\n+    pathname.startsWith('/support') ||\n     pathname === '/organizations' ||\n     pathname === '/sign-in'\n \n",
			"diffSize": 27074,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "ff38efd38f51ca22c3df19c3b2edb144f2688bda",
			"message": "Update service status checks text note when some services are unhealthy (#40767)\n\n* Update service status checks\n\n* Nit\n\n* Update apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\n\nCo-authored-by: Alaister Young <alaister@users.noreply.github.com>\n\n---------\n\nCo-authored-by: Alaister Young <alaister@users.noreply.github.com>",
			"user": "joshenlim",
			"timestamp": "2025-11-26T05:27:55Z",
			"author": {
				"name": "Joshen Lim",
				"email": "joshenlimek@gmail.com",
				"username": "joshenlim"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Home/ServiceStatus.tsx",
					"apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Home/ServiceStatus.tsx b/apps/studio/components/interfaces/Home/ServiceStatus.tsx\nindex 95226b175ed6f..f977e8517e756 100644\n--- a/apps/studio/components/interfaces/Home/ServiceStatus.tsx\n+++ b/apps/studio/components/interfaces/Home/ServiceStatus.tsx\n@@ -3,8 +3,8 @@ import { AlertTriangle, CheckCircle2, ChevronRight, Loader2 } from 'lucide-react\n import Link from 'next/link'\n import { useEffect, useState } from 'react'\n \n-import { PopoverSeparator } from '@ui/components/shadcn/ui/popover'\n import { useParams } from 'common'\n+import { InlineLink } from 'components/ui/InlineLink'\n import { useBranchesQuery } from 'data/branches/branches-query'\n import { useEdgeFunctionServiceStatusQuery } from 'data/service-status/edge-functions-status-query'\n import {\n@@ -335,16 +335,27 @@ export const ServiceStatus = () => {\n             </div>\n           </Link>\n         ))}\n-        {allServicesOperational ? null : (\n-          <>\n-            <PopoverSeparator />\n-            <div className=\"flex gap-2 text-xs text-foreground-light px-3 py-2\">\n-              <div className=\"mt-0.5\">\n-                <InfoIcon />\n-              </div>\n-              Recently restored projects can take up to 5 minutes to become fully operational.\n+        {!allServicesOperational && (\n+          <div className=\"flex gap-2 text-xs text-foreground-light px-3 py-2\">\n+            <div className=\"mt-0.5\">\n+              <InfoIcon />\n+            </div>\n+            <div className=\"flex flex-col gap-y-1\">\n+              <p>\n+                {isProjectNew ? 'New' : 'Recently restored'} projects can take up to{' '}\n+                {SERVICE_STATUS_THRESHOLD} minutes to become fully operational.\n+              </p>\n+              <p>\n+                If services stay unhealthy, refer to our{' '}\n+                <InlineLink\n+                  href={`${DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`}\n+                >\n+                  docs\n+                </InlineLink>{' '}\n+                for more information.\n+              </p>\n             </div>\n-          </>\n+          </div>\n         )}\n       </PopoverContent_Shadcn_>\n     </Popover_Shadcn_>\ndiff --git a/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx b/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\nindex 62278cfabeb3b..98b4ba12838e7 100644\n--- a/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\n+++ b/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\n@@ -1,8 +1,9 @@\n+import dayjs from 'dayjs'\n import { AlertTriangle, CheckCircle2, ChevronRight, Loader2 } from 'lucide-react'\n import Link from 'next/link'\n \n-import { PopoverSeparator } from '@ui/components/shadcn/ui/popover'\n import { useParams } from 'common'\n+import { InlineLink } from 'components/ui/InlineLink'\n import { SingleStat } from 'components/ui/SingleStat'\n import { useBranchesQuery } from 'data/branches/branches-query'\n import { useEdgeFunctionServiceStatusQuery } from 'data/service-status/edge-functions-status-query'\n@@ -15,6 +16,8 @@ import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n import { DOCS_URL } from 'lib/constants'\n import { InfoIcon, PopoverContent_Shadcn_, PopoverTrigger_Shadcn_, Popover_Shadcn_, cn } from 'ui'\n \n+const SERVICE_STATUS_THRESHOLD = 5 // minutes\n+\n /**\n  * [Joshen] JFYI before we go live with this, we need to revisit the migrations section\n  * as I don't think it should live in the ServiceStatus component since its not indicative\n@@ -248,6 +251,7 @@ export const ServiceStatus = () => {\n \n   // Check if project or branch is in a startup state\n   const isProjectNew =\n+    dayjs.utc().diff(dayjs.utc(project?.inserted_at), 'minute') < SERVICE_STATUS_THRESHOLD ||\n     project?.status === 'COMING_UP' ||\n     (isBranch &&\n       (currentBranch?.status === 'CREATING_PROJECT' ||\n@@ -301,7 +305,7 @@ export const ServiceStatus = () => {\n           value={<span>{overallStatusLabel}</span>}\n         />\n       </PopoverTrigger_Shadcn_>\n-      <PopoverContent_Shadcn_ portal className=\"p-0 w-56\" side=\"bottom\" align=\"start\">\n+      <PopoverContent_Shadcn_ portal className=\"p-0 w-60\" side=\"bottom\" align=\"start\">\n         {services.map((service) => (\n           <Link\n             href={`/project/${ref}${service.logsUrl}`}\n@@ -333,16 +337,27 @@ export const ServiceStatus = () => {\n             </div>\n           </Link>\n         ))}\n-        {allServicesOperational ? null : (\n-          <>\n-            <PopoverSeparator />\n-            <div className=\"flex gap-2 text-xs text-foreground-light px-3 py-2\">\n-              <div className=\"mt-0.5\">\n-                <InfoIcon />\n-              </div>\n-              Recently restored projects can take up to 5 minutes to become fully operational.\n+        {!allServicesOperational && (\n+          <div className=\"flex gap-2 text-xs text-foreground-light px-3 py-2\">\n+            <div className=\"mt-0.5\">\n+              <InfoIcon />\n+            </div>\n+            <div className=\"flex flex-col gap-y-1\">\n+              <p>\n+                {isProjectNew ? 'New' : 'Recently restored'} projects can take up to{' '}\n+                {SERVICE_STATUS_THRESHOLD} minutes to become fully operational.\n+              </p>\n+              <p>\n+                If services stay unhealthy, refer to our{' '}\n+                <InlineLink\n+                  href={`${DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`}\n+                >\n+                  docs\n+                </InlineLink>{' '}\n+                for more information.\n+              </p>\n             </div>\n-          </>\n+          </div>\n         )}\n       </PopoverContent_Shadcn_>\n     </Popover_Shadcn_>\n",
			"diffSize": 5749,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		}
	]
}
