{
	"date": "2025-11-20",
	"commits": [
		{
			"sha": "49e4e503d9ee3d80a0cc13fa4350c434f0fb7afb",
			"message": "feat(studio): use version 2.0.0 serializer on Realtime for inspector (#40636)\n\nAlso change label for realtime payloads: s/metadata/payload",
			"user": "edgurgel",
			"timestamp": "2025-11-20T21:16:23Z",
			"author": {
				"name": "Eduardo Gurgel",
				"email": "eduardo.gurgel@supabase.io",
				"username": "edgurgel"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Realtime/Inspector/SelectedRealtimeMessagePanel.tsx",
					"apps/studio/components/interfaces/Realtime/Inspector/useRealtimeMessages.ts"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Realtime/Inspector/SelectedRealtimeMessagePanel.tsx b/apps/studio/components/interfaces/Realtime/Inspector/SelectedRealtimeMessagePanel.tsx\nindex 529dfb5dca9c7..f750787c9d33f 100644\n--- a/apps/studio/components/interfaces/Realtime/Inspector/SelectedRealtimeMessagePanel.tsx\n+++ b/apps/studio/components/interfaces/Realtime/Inspector/SelectedRealtimeMessagePanel.tsx\n@@ -23,7 +23,7 @@ export const SelectedRealtimeMessagePanel = ({ log }: { log: LogData }) => {\n       </div>\n       <LogsDivider />\n       <div className=\"px-8\">\n-        <h3 className=\"mb-4 text-sm text-foreground-lighter\">Metadata</h3>\n+        <h3 className=\"mb-4 text-sm text-foreground-lighter\">Payload</h3>\n         <pre className=\"syntax-highlight overflow-x-auto text-sm\">\n           <div\n             className=\"text-wrap\"\ndiff --git a/apps/studio/components/interfaces/Realtime/Inspector/useRealtimeMessages.ts b/apps/studio/components/interfaces/Realtime/Inspector/useRealtimeMessages.ts\nindex 40643867f1b20..eeb3b60f7b20d 100644\n--- a/apps/studio/components/interfaces/Realtime/Inspector/useRealtimeMessages.ts\n+++ b/apps/studio/components/interfaces/Realtime/Inspector/useRealtimeMessages.ts\n@@ -104,6 +104,7 @@ export const useRealtimeMessages = (\n     const realtimeOptions = merge(DEFAULT_REALTIME_OPTIONS, { params: { log_level: logLevel } })\n \n     const options = {\n+      vsn: '2.0.0',\n       headers: DEFAULT_GLOBAL_OPTIONS.headers,\n       ...realtimeOptions,\n       params: { apikey: token, ...realtimeOptions.params },\n",
			"diffSize": 1555,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "88c5e7cbd46c852c21b43031bb95dc3a3d499ca2",
			"message": "Fix: updated expiry to be 60 seconds (#40659)\n\n* updated expiry to be 60 seconds\n\n* updated tests\n\n* Updated API",
			"user": "awaseem",
			"timestamp": "2025-11-20T21:00:11Z",
			"author": {
				"name": "Ali Waseem",
				"email": "waseema393@gmail.com",
				"username": "awaseem"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/data/api-keys/temp-api-keys-utils.test.ts",
					"apps/studio/data/api-keys/temp-api-keys-utils.ts",
					"apps/studio/state/storage-explorer.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/data/api-keys/temp-api-keys-utils.test.ts b/apps/studio/data/api-keys/temp-api-keys-utils.test.ts\nindex 79807f4ef1a3e..3339d0755d4e4 100644\n--- a/apps/studio/data/api-keys/temp-api-keys-utils.test.ts\n+++ b/apps/studio/data/api-keys/temp-api-keys-utils.test.ts\n@@ -32,7 +32,7 @@ describe('createTemporaryUploadKey', () => {\n \n     const result = createTemporaryApiKey(apiKey, expiryInSeconds)\n \n-    expect(result.expiryTime).toBe(now + 3600 * 1000)\n+    expect(result.expiryTimeMs).toBe(now + 3600 * 1000)\n   })\n \n   it('should handle short expiry durations', () => {\n@@ -44,7 +44,7 @@ describe('createTemporaryUploadKey', () => {\n \n     const result = createTemporaryApiKey(apiKey, expiryInSeconds)\n \n-    expect(result.expiryTime).toBe(now + 60 * 1000)\n+    expect(result.expiryTimeMs).toBe(now + 60 * 1000)\n   })\n \n   it('should create keys with different expiry times when called at different times', () => {\n@@ -59,9 +59,9 @@ describe('createTemporaryUploadKey', () => {\n     vi.setSystemTime(now2)\n     const result2 = createTemporaryApiKey(apiKey, expiryInSeconds)\n \n-    expect(result1.expiryTime).toBe(now1 + expiryInSeconds * 1000)\n-    expect(result2.expiryTime).toBe(now2 + expiryInSeconds * 1000)\n-    expect(result1.expiryTime).not.toBe(result2.expiryTime)\n+    expect(result1.expiryTimeMs).toBe(now1 + expiryInSeconds * 1000)\n+    expect(result2.expiryTimeMs).toBe(now2 + expiryInSeconds * 1000)\n+    expect(result1.expiryTimeMs).not.toBe(result2.expiryTimeMs)\n   })\n })\n \n@@ -86,13 +86,13 @@ describe('isTemporaryUploadKeyValid', () => {\n     expect(result).toBe(false)\n   })\n \n-  it('should return true for a key with more than 60 seconds remaining', () => {\n+  it('should return true for a key with more than 20 seconds remaining', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now + 120000, // 2 minutes from now\n+      expiryTimeMs: now + 120000, // 2 minutes from now\n     }\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -100,13 +100,13 @@ describe('isTemporaryUploadKeyValid', () => {\n     expect(result).toBe(true)\n   })\n \n-  it('should return false for a key with exactly 60 seconds remaining', () => {\n+  it('should return false for a key with exactly 20 seconds remaining', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now + 60000, // Exactly 60 seconds\n+      expiryTimeMs: now + 20000, // Exactly 20 seconds\n     }\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -114,13 +114,13 @@ describe('isTemporaryUploadKeyValid', () => {\n     expect(result).toBe(false)\n   })\n \n-  it('should return false for a key with less than 60 seconds remaining', () => {\n+  it('should return false for a key with less than 20 seconds remaining', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now + 30000, // 30 seconds from now\n+      expiryTimeMs: now + 10000, // 10 seconds from now\n     }\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -134,7 +134,7 @@ describe('isTemporaryUploadKeyValid', () => {\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now - 1000, // 1 second ago\n+      expiryTimeMs: now - 1000, // 1 second ago\n     }\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -148,7 +148,7 @@ describe('isTemporaryUploadKeyValid', () => {\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now - 3600000, // 1 hour ago\n+      expiryTimeMs: now - 3600000, // 1 hour ago\n     }\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -156,13 +156,13 @@ describe('isTemporaryUploadKeyValid', () => {\n     expect(result).toBe(false)\n   })\n \n-  it('should return true for a key with exactly 61 seconds remaining', () => {\n+  it('should return true for a key with exactly 21 seconds remaining', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now + 61000, // 61 seconds from now\n+      expiryTimeMs: now + 21000, // 21 seconds from now\n     }\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -176,17 +176,17 @@ describe('isTemporaryUploadKeyValid', () => {\n \n     const key: TemporaryApiKey = {\n       apiKey: 'test-key',\n-      expiryTime: now + 120000, // 2 minutes from now\n+      expiryTimeMs: now + 120000, // 2 minutes from now\n     }\n \n     // Initially valid\n     expect(isTemporaryApiKeyValid(key)).toBe(true)\n \n-    // Advance time by 59 seconds (should still be valid - 61 seconds remaining)\n-    vi.advanceTimersByTime(59000)\n+    // Advance time by 99 seconds (should still be valid - 21 seconds remaining)\n+    vi.advanceTimersByTime(99000)\n     expect(isTemporaryApiKeyValid(key)).toBe(true)\n \n-    // Advance time by 2 more seconds (should be invalid - 59 seconds remaining)\n+    // Advance time by 2 more seconds (should be invalid - 19 seconds remaining)\n     vi.advanceTimersByTime(2000)\n     expect(isTemporaryApiKeyValid(key)).toBe(false)\n   })\n@@ -196,7 +196,7 @@ describe('isTemporaryUploadKeyValid', () => {\n     vi.setSystemTime(now)\n \n     const key = {\n-      expiryTime: now + 120000,\n+      expiryTimeMs: now + 120000,\n     } as TemporaryApiKey\n \n     const result = isTemporaryApiKeyValid(key)\n@@ -238,7 +238,7 @@ describe('integration: createTemporaryUploadKey and isTemporaryUploadKeyValid',\n     expect(isTemporaryApiKeyValid(key)).toBe(true)\n   })\n \n-  it('should create a key that becomes invalid after expiry time minus 60 seconds', () => {\n+  it('should create a key that becomes invalid after expiry time minus 20 seconds', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n@@ -248,11 +248,11 @@ describe('integration: createTemporaryUploadKey and isTemporaryUploadKeyValid',\n     // Initially valid\n     expect(isTemporaryApiKeyValid(key)).toBe(true)\n \n-    // Advance to 59 seconds before expiry (should still be valid - 61 seconds remaining)\n-    vi.advanceTimersByTime((expiryInSeconds - 61) * 1000)\n+    // Advance to 19 seconds before expiry (should still be valid - 21 seconds remaining)\n+    vi.advanceTimersByTime((expiryInSeconds - 21) * 1000)\n     expect(isTemporaryApiKeyValid(key)).toBe(true)\n \n-    // Advance to 60 seconds before expiry (should be invalid - 60 seconds remaining)\n+    // Advance to 20 seconds before expiry (should be invalid - 20 seconds remaining)\n     vi.advanceTimersByTime(1000)\n     expect(isTemporaryApiKeyValid(key)).toBe(false)\n   })\n@@ -261,38 +261,38 @@ describe('integration: createTemporaryUploadKey and isTemporaryUploadKeyValid',\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n-    // Create a key that expires in 30 seconds (less than the 60 second buffer)\n-    const key = createTemporaryApiKey('test-api-key', 30)\n+    // Create a key that expires in 10 seconds (less than the 20 second buffer)\n+    const key = createTemporaryApiKey('test-api-key', 10)\n \n-    // Should be invalid immediately because it will expire in less than 60 seconds\n+    // Should be invalid immediately because it will expire in less than 20 seconds\n     expect(isTemporaryApiKeyValid(key)).toBe(false)\n   })\n \n-  it('should handle expiry duration of exactly 60 seconds', () => {\n+  it('should handle expiry duration of exactly 20 seconds', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n-    // Create a key that expires in exactly 60 seconds\n-    const key = createTemporaryApiKey('test-api-key', 60)\n+    // Create a key that expires in exactly 20 seconds\n+    const key = createTemporaryApiKey('test-api-key', 20)\n \n-    // Should be invalid because it has exactly 60 seconds remaining (not more than 60)\n+    // Should be invalid because it has exactly 20 seconds remaining (not more than 20)\n     expect(isTemporaryApiKeyValid(key)).toBe(false)\n   })\n \n-  it('should handle expiry duration of 61 seconds', () => {\n+  it('should handle expiry duration of 21 seconds', () => {\n     const now = Date.now()\n     vi.setSystemTime(now)\n \n-    // Create a key that expires in 61 seconds\n-    const key = createTemporaryApiKey('test-api-key', 61)\n+    // Create a key that expires in 21 seconds\n+    const key = createTemporaryApiKey('test-api-key', 21)\n \n-    // Should be valid because it has 61 seconds remaining (more than 60)\n+    // Should be valid because it has 21 seconds remaining (more than 20)\n     expect(isTemporaryApiKeyValid(key)).toBe(true)\n \n     // Advance by 1 second\n     vi.advanceTimersByTime(1000)\n \n-    // Should now be invalid because it has exactly 60 seconds remaining\n+    // Should now be invalid because it has exactly 20 seconds remaining\n     expect(isTemporaryApiKeyValid(key)).toBe(false)\n   })\n })\ndiff --git a/apps/studio/data/api-keys/temp-api-keys-utils.ts b/apps/studio/data/api-keys/temp-api-keys-utils.ts\nindex 9cb0752b098a3..9b87938ab2408 100644\n--- a/apps/studio/data/api-keys/temp-api-keys-utils.ts\n+++ b/apps/studio/data/api-keys/temp-api-keys-utils.ts\n@@ -6,13 +6,13 @@ const projectApiKeys = new Map<ProjectRef, Promise<TemporaryApiKey>>()\n \n export interface TemporaryApiKey {\n   apiKey: string\n-  expiryTime: number\n+  expiryTimeMs: number\n }\n \n export function createTemporaryApiKey(apiKey: string, expiryInSeconds: number): TemporaryApiKey {\n   return {\n     apiKey,\n-    expiryTime: Date.now() + expiryInSeconds * 1000,\n+    expiryTimeMs: Date.now() + expiryInSeconds * 1000,\n   }\n }\n \n@@ -22,8 +22,8 @@ export function isTemporaryApiKeyValid(\n   if (!key) return false\n \n   const now = Date.now()\n-  const timeRemaining = key.expiryTime - now\n-  return timeRemaining > 60000 // More than 60 seconds remaining\n+  const timeRemaining = key.expiryTimeMs - now\n+  return timeRemaining > 20_000 // More than 20 seconds remaining\n }\n \n const checkOrRefreshTemporaryApiKey = async (\n@@ -31,11 +31,12 @@ const checkOrRefreshTemporaryApiKey = async (\n   existingKey: Promise<TemporaryApiKey> | undefined\n ): Promise<TemporaryApiKey> => {\n   const resolvedKey = await existingKey\n+\n   if (isTemporaryApiKeyValid(resolvedKey)) {\n     return resolvedKey\n   }\n \n-  const expiryInSeconds = 600\n+  const expiryInSeconds = 60\n   const fetchedKey = getTemporaryAPIKey({\n     projectRef,\n     expiry: expiryInSeconds,\n@@ -47,9 +48,7 @@ const checkOrRefreshTemporaryApiKey = async (\n // This function should never be marked as async, it should always return a promise.\n export function getOrRefreshTemporaryApiKey(projectRef: ProjectRef): Promise<TemporaryApiKey> {\n   const existingKey = projectApiKeys.get(projectRef)\n-  if (!existingKey) {\n-    const data = checkOrRefreshTemporaryApiKey(projectRef, undefined)\n-    projectApiKeys.set(projectRef, data)\n-  }\n-  return projectApiKeys.get(projectRef)!\n+  const data = checkOrRefreshTemporaryApiKey(projectRef, existingKey)\n+  projectApiKeys.set(projectRef, data)\n+  return data\n }\ndiff --git a/apps/studio/state/storage-explorer.tsx b/apps/studio/state/storage-explorer.tsx\nindex e3d2fce57d109..2bdf90664338a 100644\n--- a/apps/studio/state/storage-explorer.tsx\n+++ b/apps/studio/state/storage-explorer.tsx\n@@ -76,6 +76,29 @@ if (typeof window !== 'undefined') {\n   abortController = new AbortController()\n }\n \n+async function createSupabaseClient(projectRef: string, clientEndpoint: string) {\n+  try {\n+    const { apiKey } = await getOrRefreshTemporaryApiKey(projectRef)\n+\n+    return createClient(clientEndpoint, apiKey, {\n+      auth: {\n+        persistSession: false,\n+        autoRefreshToken: false,\n+        detectSessionInUrl: false,\n+        storage: {\n+          getItem: (key) => {\n+            return null\n+          },\n+          setItem: (key, value) => {},\n+          removeItem: (key) => {},\n+        },\n+      },\n+    })\n+  } catch (error) {\n+    throw error\n+  }\n+}\n+\n function createStorageExplorerState({\n   projectRef,\n   connectionString,\n@@ -98,29 +121,6 @@ function createStorageExplorerState({\n     resumableUploadUrl,\n     uploadProgresses: [] as UploadProgress[],\n \n-    supabaseClient: async () => {\n-      try {\n-        const { apiKey } = await getOrRefreshTemporaryApiKey(projectRef)\n-\n-        return createClient(clientEndpoint, apiKey, {\n-          auth: {\n-            persistSession: false,\n-            autoRefreshToken: false,\n-            detectSessionInUrl: false,\n-            storage: {\n-              getItem: (key) => {\n-                return null\n-              },\n-              setItem: (key, value) => {},\n-              removeItem: (key) => {},\n-            },\n-          },\n-        })\n-      } catch (error) {\n-        throw error\n-      }\n-    },\n-\n     // abortController,\n     abortApiCalls: () => {\n       if (abortController) {\n@@ -313,7 +313,7 @@ function createStorageExplorerState({\n       columnIndex: number\n       onError?: () => void\n     }) => {\n-      if (!state.supabaseClient) return console.error('Supabase Client is missing')\n+      const supabaseClient = await createSupabaseClient(state.projectRef, clientEndpoint)\n \n       const autofix = false\n       const formattedName = state.sanitizeNameForDuplicateInColumn({\n@@ -347,7 +347,8 @@ function createStorageExplorerState({\n       const formattedPathToEmptyPlaceholderFile =\n         pathToFolder.length > 0 ? `${pathToFolder}/${emptyPlaceholderFile}` : emptyPlaceholderFile\n \n-      await (await state.supabaseClient()).storage\n+      const client = await createSupabaseClient(state.projectRef, clientEndpoint)\n+      await client.storage\n         .from(state.selectedBucket.name)\n         .upload(\n           formattedPathToEmptyPlaceholderFile,\n@@ -597,7 +598,8 @@ function createStorageExplorerState({\n \n         if (data.length === 0) {\n           const prefixToPlaceholder = `${parentFolderPrefix}/${EMPTY_FOLDER_PLACEHOLDER_FILE_NAME}`\n-          await (await state.supabaseClient!())?.storage\n+          const client = await createSupabaseClient(state.projectRef, clientEndpoint)\n+          await client.storage\n             .from(state.selectedBucket.name)\n             .upload(prefixToPlaceholder, new File([], EMPTY_FOLDER_PLACEHOLDER_FILE_NAME))\n         }\n@@ -818,9 +820,6 @@ function createStorageExplorerState({\n           { id: toastId, closeButton: false, position: 'top-right' }\n         )\n \n-        // Get authenticated Supabase client for Storage API access\n-        const client = state.supabaseClient ? await state.supabaseClient() : undefined\n-\n         const promises = files.map((file) => {\n           const fileMimeType = (file.metadata?.mimetype as string) ?? null\n           return () => {\n@@ -833,6 +832,9 @@ function createStorageExplorerState({\n               | boolean\n             >(async (resolve) => {\n               try {\n+                // Get authenticated Supabase client for Storage API access\n+                const client = await createSupabaseClient(state.projectRef, clientEndpoint)\n+\n                 if (!client) {\n                   throw new Error('Supabase client not available')\n                 }\n@@ -1517,7 +1519,7 @@ function createStorageExplorerState({\n       const toastId = showToast ? toast.loading(`Retrieving ${fileName}...`) : undefined\n \n       try {\n-        const client = state.supabaseClient ? await state.supabaseClient() : undefined\n+        const client = await createSupabaseClient(state.projectRef, clientEndpoint)\n         if (!client) {\n           throw new Error('Supabase client not available')\n         }\n@@ -1564,7 +1566,7 @@ function createStorageExplorerState({\n       if (!file.path) return false\n \n       try {\n-        const client = state.supabaseClient ? await state.supabaseClient() : undefined\n+        const client = await createSupabaseClient(state.projectRef, clientEndpoint)\n         if (!client) {\n           throw new Error('Supabase client not available')\n         }\n",
			"diffSize": 15905,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "fbf3c712fd5090a96e186995ea7727aea73863e5",
			"message": "fix: align project filter popover close of the trigger (#40591)\n\n* fix: align project filter popover close of the trigger\n\n* fix: lint errors\n\n---------\n\nCo-authored-by: Ali Waseem <waseema393@gmail.com>",
			"user": "Kishore-MK",
			"timestamp": "2025-11-20T19:47:28Z",
			"author": {
				"name": "Keyaru",
				"email": "77324991+Kishore-MK@users.noreply.github.com",
				"username": "Kishore-MK"
			},
			"files": {
				"added": [],
				"modified": ["apps/studio/components/interfaces/HomePageActions.tsx"],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/HomePageActions.tsx b/apps/studio/components/interfaces/HomePageActions.tsx\nindex 52ed4ea67fa2e..cd648cc200fa4 100644\n--- a/apps/studio/components/interfaces/HomePageActions.tsx\n+++ b/apps/studio/components/interfaces/HomePageActions.tsx\n@@ -83,7 +83,13 @@ export const HomePageActions = ({\n               icon={<Filter />}\n             />\n           </PopoverTrigger_Shadcn_>\n-          <PopoverContent_Shadcn_ className=\"p-0 w-56\" side=\"bottom\" align=\"center\">\n+          <PopoverContent_Shadcn_\n+            className=\"p-0 w-56\"\n+            side=\"bottom\"\n+            align=\"center\"\n+            sideOffset={6}\n+            portal={true}\n+          >\n             <div className=\"px-3 pt-3 pb-2 flex flex-col gap-y-2\">\n               <p className=\"text-xs\">Filter projects by status</p>\n               <div className=\"flex flex-col\">\n",
			"diffSize": 885,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "2f337882fa0e2f4a96a0015c261016ae411af8bf",
			"message": "fix: Fix the Edit policy panel work (#40660)\n\n* Remove the duplicate policy editor panels.\n\n* Move the const values outside the React component.",
			"user": "ivasilov",
			"timestamp": "2025-11-20T18:28:03Z",
			"author": {
				"name": "Ivan Vasilov",
				"email": "vasilov.ivan@gmail.com",
				"username": "ivasilov"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx",
					"apps/studio/pages/project/[ref]/auth/policies.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx b/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx\nindex 5e9c7a45edc52..27ff753378a6c 100644\n--- a/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx\n+++ b/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx\n@@ -52,6 +52,22 @@ interface PolicyEditorPanelProps {\n   authContext: 'database' | 'realtime'\n }\n \n+const FORM_ID = 'rls-editor'\n+const FormSchema = z.object({\n+  name: z.string().min(1, 'Please provide a name'),\n+  table: z.string(),\n+  behavior: z.string(),\n+  command: z.string(),\n+  roles: z.string(),\n+})\n+const defaultValues = {\n+  name: '',\n+  table: '',\n+  behavior: 'permissive',\n+  command: 'select',\n+  roles: '',\n+}\n+\n /**\n  * Using memo for this component because everything rerenders on window focus because of outside fetches\n  */\n@@ -96,21 +112,6 @@ export const PolicyEditorPanel = memo(function ({\n \n   const [showTools, setShowTools] = useState<boolean>(false)\n \n-  const formId = 'rls-editor'\n-  const FormSchema = z.object({\n-    name: z.string().min(1, 'Please provide a name'),\n-    table: z.string(),\n-    behavior: z.string(),\n-    command: z.string(),\n-    roles: z.string(),\n-  })\n-  const defaultValues = {\n-    name: '',\n-    table: '',\n-    behavior: 'permissive',\n-    command: 'select',\n-    roles: '',\n-  }\n   const form = useForm<z.infer<typeof FormSchema>>({\n     mode: 'onBlur',\n     reValidateMode: 'onBlur',\n@@ -290,7 +291,7 @@ export const PolicyEditorPanel = memo(function ({\n   return (\n     <>\n       <Form_Shadcn_ {...form}>\n-        <form id={formId} onSubmit={form.handleSubmit(onSubmit)}>\n+        <form id={FORM_ID} onSubmit={form.handleSubmit(onSubmit)}>\n           <Sheet open={visible} onOpenChange={confirmOnClose}>\n             <SheetContent\n               showClose={false}\n@@ -490,7 +491,7 @@ export const PolicyEditorPanel = memo(function ({\n                       </Button>\n \n                       <ButtonTooltip\n-                        form={formId}\n+                        form={FORM_ID}\n                         htmlType=\"submit\"\n                         loading={isExecuting || isUpdating}\n                         disabled={!canUpdatePolicies || isExecuting || isUpdating}\ndiff --git a/apps/studio/pages/project/[ref]/auth/policies.tsx b/apps/studio/pages/project/[ref]/auth/policies.tsx\nindex 222c75969b4c1..e017abc8a689f 100644\n--- a/apps/studio/pages/project/[ref]/auth/policies.tsx\n+++ b/apps/studio/pages/project/[ref]/auth/policies.tsx\n@@ -25,9 +25,9 @@ import { useProjectPostgrestConfigQuery } from 'data/config/project-postgrest-co\n import { useDatabasePoliciesQuery } from 'data/database-policies/database-policies-query'\n import { useTablesQuery } from 'data/tables/tables-query'\n import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n+import { useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n import { useIsProtectedSchema } from 'hooks/useProtectedSchemas'\n-import { useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { DOCS_URL } from 'lib/constants'\n import { useEditorPanelStateSnapshot } from 'state/editor-panel-state'\n import { useSidebarManagerSnapshot } from 'state/sidebar-manager-state'\n@@ -206,6 +206,8 @@ const AuthPoliciesPage: NextPageWithLayout = () => {\n \n   const handleResetSearch = useCallback(() => setSearchString(''), [setSearchString])\n \n+  const isUpdatingPolicy = !!selectedPolicyIdToEdit\n+\n   if (isPermissionsLoaded && !canReadPolicies) {\n     return <NoPermission isFullPage resourceText=\"view this project's RLS policies\" />\n   }\n@@ -276,28 +278,20 @@ const AuthPoliciesPage: NextPageWithLayout = () => {\n           </PoliciesDataProvider>\n         )}\n \n-        {/* Create Policy */}\n+        {/* Create or Edit Policy */}\n         <PolicyEditorPanel\n-          visible={showCreatePolicy}\n+          visible={showCreatePolicy || isUpdatingPolicy}\n           schema={schema}\n           searchString={searchString}\n-          selectedTable={selectedTable}\n+          selectedTable={isUpdatingPolicy ? undefined : selectedTable}\n+          selectedPolicy={isUpdatingPolicy ? selectedPolicyIdToEdit : undefined}\n           onSelectCancel={() => {\n             setSelectedTable(undefined)\n-            setShowCreatePolicy(false)\n-          }}\n-          authContext=\"database\"\n-        />\n-\n-        {/* Edit Policy */}\n-        <PolicyEditorPanel\n-          visible={!!selectedPolicyIdToEdit}\n-          schema={schema}\n-          searchString={searchString}\n-          selectedPolicy={selectedPolicyIdToEdit}\n-          onSelectCancel={() => {\n-            setSelectedTable(undefined)\n-            setSelectedPolicyIdToEdit(null)\n+            if (isUpdatingPolicy) {\n+              setSelectedPolicyIdToEdit(null)\n+            } else {\n+              setShowCreatePolicy(false)\n+            }\n           }}\n           authContext=\"database\"\n         />\n",
			"diffSize": 5068,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "43cc61818cfde975ab4e21262ca59d6773585a05",
			"message": "chore: Migrate all `isPending` uses in `react-query` (#40642)\n\n* Bump react-query. Minor type and logic fixes.\n\n* Migrate all use of isLoading to isPending in mutations.\n\n* Fix type errors.",
			"user": "ivasilov",
			"timestamp": "2025-11-20T15:44:53Z",
			"author": {
				"name": "Ivan Vasilov",
				"email": "vasilov.ivan@gmail.com",
				"username": "ivasilov"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/grid/components/editor/JsonEditor.tsx",
					"apps/studio/components/grid/components/editor/TextEditor.tsx",
					"apps/studio/components/interfaces/APIKeys/APIKeyDeleteDialog.tsx",
					"apps/studio/components/interfaces/APIKeys/CreatePublishableAPIKeyDialog.tsx",
					"apps/studio/components/interfaces/APIKeys/CreateSecretAPIKeyDialog.tsx",
					"apps/studio/components/interfaces/APIKeys/SecretAPIKeys.tsx",
					"apps/studio/components/interfaces/Account/AccessTokens/NewAccessTokenDialog.tsx",
					"apps/studio/components/interfaces/Account/Preferences/AccountConnections.tsx",
					"apps/studio/components/interfaces/Account/Preferences/AccountIdentities.tsx",
					"apps/studio/components/interfaces/Account/Preferences/ChangeEmailAddress.tsx",
					"apps/studio/components/interfaces/Account/Preferences/DeleteAccountButton.tsx",
					"apps/studio/components/interfaces/Account/Preferences/ProfileInformation.tsx",
					"apps/studio/components/interfaces/Account/TOTPFactors/AddNewFactorModal.tsx",
					"apps/studio/components/interfaces/Account/TOTPFactors/DeleteFactorModal.tsx",
					"apps/studio/components/interfaces/Advisors/AdvisorRuleItem.tsx",
					"apps/studio/components/interfaces/Advisors/CreateRuleSheet.tsx",
					"apps/studio/components/interfaces/Advisors/DisableRuleModal.tsx",
					"apps/studio/components/interfaces/Advisors/EnableRuleModal.tsx",
					"apps/studio/components/interfaces/Auth/AuditLogsForm.tsx",
					"apps/studio/components/interfaces/Auth/AuthProvidersForm/ProviderForm.tsx",
					"apps/studio/components/interfaces/Auth/BasicAuthSettingsForm.tsx",
					"apps/studio/components/interfaces/Auth/EmailTemplates/EmailTemplates.tsx",
					"apps/studio/components/interfaces/Auth/Hooks/CreateHookSheet.tsx",
					"apps/studio/components/interfaces/Auth/Hooks/HooksListing.tsx",
					"apps/studio/components/interfaces/Auth/OAuthApps/CreateOAuthAppSheet.tsx",
					"apps/studio/components/interfaces/Auth/OAuthApps/OAuthAppsList.tsx",
					"apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx",
					"apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx",
					"apps/studio/components/interfaces/Auth/ProtectionAuthSettingsForm/ProtectionAuthSettingsForm.tsx",
					"apps/studio/components/interfaces/Auth/RateLimits/RateLimits.tsx",
					"apps/studio/components/interfaces/Auth/RedirectUrls/AddNewURLModal.tsx",
					"apps/studio/components/interfaces/Auth/RedirectUrls/RedirectUrls.tsx",
					"apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx",
					"apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAuth0Dialog.tsx",
					"apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAwsCognitoAuthDialog.tsx",
					"apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateClerkAuthDialog.tsx",
					"apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateFirebaseAuthDialog.tsx",
					"apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateWorkOSDialog.tsx",
					"apps/studio/components/interfaces/Auth/Users/BanUserModal.tsx",
					"apps/studio/components/interfaces/Auth/Users/CreateUserModal.tsx",
					"apps/studio/components/interfaces/Auth/Users/DeleteUserModal.tsx",
					"apps/studio/components/interfaces/Auth/Users/InviteUserModal.tsx",
					"apps/studio/components/interfaces/Auth/Users/UserOverview.tsx",
					"apps/studio/components/interfaces/Billing/Payment/PaymentMethods/ChangePaymentMethodModal.tsx",
					"apps/studio/components/interfaces/Billing/Payment/PaymentMethods/DeletePaymentMethodModal.tsx",
					"apps/studio/components/interfaces/BranchManagement/CreateBranchModal.tsx",
					"apps/studio/components/interfaces/BranchManagement/EditBranchModal.tsx",
					"apps/studio/components/interfaces/BranchManagement/Overview.tsx",
					"apps/studio/components/interfaces/BranchManagement/ReviewRow.tsx",
					"apps/studio/components/interfaces/Database/Backups/BackupItem.tsx",
					"apps/studio/components/interfaces/Database/Backups/BackupsList.tsx",
					"apps/studio/components/interfaces/Database/Backups/PITR/PITRSelection.tsx",
					"apps/studio/components/interfaces/Database/Backups/RestoreToNewProject/CreateNewProjectDialog.tsx",
					"apps/studio/components/interfaces/Database/ETL/DestinationPanel/DestinationPanel.tsx",
					"apps/studio/components/interfaces/Database/ETL/EnableReplicationModal.tsx",
					"apps/studio/components/interfaces/Database/ETL/NewPublicationPanel.tsx",
					"apps/studio/components/interfaces/Database/ETL/ReplicationPipelineStatus/ReplicationPipelineStatus.tsx",
					"apps/studio/components/interfaces/Database/ETL/RetryOptionsDropdown.tsx",
					"apps/studio/components/interfaces/Database/EnumeratedTypes/CreateEnumeratedTypeSidePanel.tsx",
					"apps/studio/components/interfaces/Database/EnumeratedTypes/DeleteEnumeratedTypeModal.tsx",
					"apps/studio/components/interfaces/Database/EnumeratedTypes/EditEnumeratedTypeSidePanel.tsx",
					"apps/studio/components/interfaces/Database/Extensions/EnableExtensionModal.tsx",
					"apps/studio/components/interfaces/Database/Extensions/ExtensionRow.tsx",
					"apps/studio/components/interfaces/Database/Functions/CreateFunction/index.tsx",
					"apps/studio/components/interfaces/Database/Functions/FunctionsList/FunctionsList.tsx",
					"apps/studio/components/interfaces/Database/Hooks/DeleteHookModal.tsx",
					"apps/studio/components/interfaces/Database/Indexes/CreateIndexSidePanel.tsx",
					"apps/studio/components/interfaces/Database/Indexes/Indexes.tsx",
					"apps/studio/components/interfaces/Database/Publications/PublicationsTableItem.tsx",
					"apps/studio/components/interfaces/Database/Roles/CreateRolePanel.tsx",
					"apps/studio/components/interfaces/Database/Roles/DeleteRoleModal.tsx",
					"apps/studio/components/interfaces/Database/Roles/RoleRow.tsx",
					"apps/studio/components/interfaces/Database/Triggers/TriggerSheet.tsx",
					"apps/studio/components/interfaces/Database/Triggers/TriggersList/TriggersList.tsx",
					"apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx",
					"apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionDetails.tsx",
					"apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionTesterSheet.tsx",
					"apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/AddNewSecretForm.tsx",
					"apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EdgeFunctionSecrets.tsx",
					"apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EditSecretSheet.tsx",
					"apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CreateCronJobSheet.tsx",
					"apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CronJobScheduleSection.tsx",
					"apps/studio/components/interfaces/Integrations/CronJobs/CronJobTableCell.tsx",
					"apps/studio/components/interfaces/Integrations/CronJobs/DeleteCronJob.tsx",
					"apps/studio/components/interfaces/Integrations/Queues/CreateQueueSheet.tsx",
					"apps/studio/components/interfaces/Integrations/Queues/QueueTab.tsx",
					"apps/studio/components/interfaces/Integrations/Queues/SingleQueue/DeleteQueue.tsx",
					"apps/studio/components/interfaces/Integrations/Queues/SingleQueue/MessageDetailsPanel.tsx",
					"apps/studio/components/interfaces/Integrations/Queues/SingleQueue/PurgeQueue.tsx",
					"apps/studio/components/interfaces/Integrations/Queues/SingleQueue/SendMessageModal.tsx",
					"apps/studio/components/interfaces/Integrations/Vault/Secrets/DeleteSecretModal.tsx",
					"apps/studio/components/interfaces/Integrations/Vault/Secrets/EditSecretModal.tsx",
					"apps/studio/components/interfaces/Integrations/VercelGithub/IntegrationConnection.tsx",
					"apps/studio/components/interfaces/Integrations/Webhooks/OverviewTab.tsx",
					"apps/studio/components/interfaces/Integrations/Wrappers/CreateIcebergWrapperSheet.tsx",
					"apps/studio/components/interfaces/Integrations/Wrappers/CreateWrapperSheet.tsx",
					"apps/studio/components/interfaces/Integrations/Wrappers/DeleteWrapperModal.tsx",
					"apps/studio/components/interfaces/Integrations/Wrappers/EditWrapperSheet.tsx",
					"apps/studio/components/interfaces/JwtSecrets/jwt-secret-keys-table/create-key-dialog.tsx",
					"apps/studio/components/interfaces/JwtSecrets/jwt-secret-keys-table/index.tsx",
					"apps/studio/components/interfaces/JwtSecrets/jwt-secret-keys-table/rotate-key-dialog.tsx",
					"apps/studio/components/interfaces/JwtSecrets/jwt-settings.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/BillingEmail.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/CostControl/SpendCapSidePanel.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/CreditTopUp.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/Subscription/ExitSurveyModal.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/Subscription/PaymentMethodSelection.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/Subscription/SubscriptionPlanUpdateDialog.tsx",
					"apps/studio/components/interfaces/Organization/BillingSettings/Subscription/UpgradeModal.tsx",
					"apps/studio/components/interfaces/Organization/CloudMarketplace/AwsMarketplaceCreateNewOrg.tsx",
					"apps/studio/components/interfaces/Organization/CloudMarketplace/AwsMarketplaceLinkExistingOrg.tsx",
					"apps/studio/components/interfaces/Organization/CloudMarketplace/NewAwsMarketplaceOrgModal.tsx",
					"apps/studio/components/interfaces/Organization/Documents/DPA.tsx",
					"apps/studio/components/interfaces/Organization/GeneralSettings/DeleteOrganizationButton.tsx",
					"apps/studio/components/interfaces/Organization/GeneralSettings/OrganizationDetailsForm.tsx",
					"apps/studio/components/interfaces/Organization/IntegrationSettings/SidePanelVercelProjectLinker.tsx",
					"apps/studio/components/interfaces/Organization/InvoicesSettings/InvoicePayButton.tsx",
					"apps/studio/components/interfaces/Organization/OAuthApps/DeleteAppModal.tsx",
					"apps/studio/components/interfaces/Organization/OAuthApps/OAuthSecrets/OAuthSecrets.tsx",
					"apps/studio/components/interfaces/Organization/OAuthApps/OAuthSecrets/SecretRow.tsx",
					"apps/studio/components/interfaces/Organization/OAuthApps/RevokeAppModal.tsx",
					"apps/studio/components/interfaces/Organization/ProjectClaim/confirm.tsx",
					"apps/studio/components/interfaces/Organization/SSO/SSOConfig.tsx",
					"apps/studio/components/interfaces/Organization/SecuritySettings.tsx",
					"apps/studio/components/interfaces/Organization/TeamSettings/InviteMemberButton.tsx",
					"apps/studio/components/interfaces/Organization/TeamSettings/MemberActions.tsx",
					"apps/studio/components/interfaces/OrganizationInvite/OrganizationInvite.tsx",
					"apps/studio/components/interfaces/QueryPerformance/IndexAdvisor/EnableIndexAdvisorButton.tsx",
					"apps/studio/components/interfaces/QueryPerformance/IndexAdvisor/IndexAdvisorDisabledState.tsx",
					"apps/studio/components/interfaces/Realtime/RealtimeSettings.tsx",
					"apps/studio/components/interfaces/Reports/CreateReportModal.tsx",
					"apps/studio/components/interfaces/Reports/Reports.tsx",
					"apps/studio/components/interfaces/Reports/UpdateModal.tsx",
					"apps/studio/components/interfaces/SQLEditor/MoveQueryModal.tsx",
					"apps/studio/components/interfaces/SQLEditor/OngoingQueriesPanel.tsx",
					"apps/studio/components/interfaces/SQLEditor/RenameQueryModal.tsx",
					"apps/studio/components/interfaces/SQLEditor/SQLEditor.tsx",
					"apps/studio/components/interfaces/Settings/API/HardenAPIModal.tsx",
					"apps/studio/components/interfaces/Settings/API/PostgrestConfig.tsx",
					"apps/studio/components/interfaces/Settings/Addons/CustomDomainSidePanel.tsx",
					"apps/studio/components/interfaces/Settings/Addons/IPv4SidePanel.tsx",
					"apps/studio/components/interfaces/Settings/Addons/PITRSidePanel.tsx",
					"apps/studio/components/interfaces/Settings/Database/BannedIPs.tsx",
					"apps/studio/components/interfaces/Settings/Database/ConnectionPooling/ConnectionPooling.tsx",
					"apps/studio/components/interfaces/Settings/Database/DatabaseSettings/ConfirmDisableReadOnlyModal.tsx",
					"apps/studio/components/interfaces/Settings/Database/DatabaseSettings/ResetDbPassword.tsx",
					"apps/studio/components/interfaces/Settings/Database/DiskSizeConfiguration.tsx",
					"apps/studio/components/interfaces/Settings/Database/DiskSizeConfigurationModal.tsx",
					"apps/studio/components/interfaces/Settings/Database/NetworkRestrictions/AddRestrictionModal.tsx",
					"apps/studio/components/interfaces/Settings/Database/NetworkRestrictions/AllowAllModal.tsx",
					"apps/studio/components/interfaces/Settings/Database/NetworkRestrictions/DisallowAllModal.tsx",
					"apps/studio/components/interfaces/Settings/Database/NetworkRestrictions/RemoveRestrictionModal.tsx",
					"apps/studio/components/interfaces/Settings/Database/SSLConfiguration.tsx",
					"apps/studio/components/interfaces/Settings/General/ComplianceConfig/ProjectComplianceMode.tsx",
					"apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainActivate.tsx",
					"apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainConfig.tsx",
					"apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainVerify.tsx",
					"apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainsConfigureHostname.tsx",
					"apps/studio/components/interfaces/Settings/General/DeleteProjectPanel/DeleteProjectModal.tsx",
					"apps/studio/components/interfaces/Settings/General/General.tsx",
					"apps/studio/components/interfaces/Settings/General/Infrastructure/PauseProjectButton.tsx",
					"apps/studio/components/interfaces/Settings/General/Infrastructure/ProjectUpgradeAlert.tsx",
					"apps/studio/components/interfaces/Settings/General/Infrastructure/RestartServerButton.tsx",
					"apps/studio/components/interfaces/Settings/General/TransferProjectPanel/TransferProjectButton.tsx",
					"apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DeployNewReplicaPanel.tsx",
					"apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DropAllReplicasConfirmationModal.tsx",
					"apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DropReplicaConfirmationModal.tsx",
					"apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/RestartReplicaConfirmationModal.tsx",
					"apps/studio/components/interfaces/Settings/Integrations/GithubIntegration/GitHubIntegrationConnectionForm.tsx",
					"apps/studio/components/interfaces/Settings/Integrations/VercelIntegration/VercelIntegrationConnectionForm.tsx",
					"apps/studio/components/interfaces/SignIn/ForgotPasswordWizard.tsx",
					"apps/studio/components/interfaces/SignIn/SignInMfaForm.tsx",
					"apps/studio/components/interfaces/SignIn/SignUpForm.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/ConnectTablesDialog.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/NamespaceWithTables/index.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/useAnalyticsBucketAssociatedEntities.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/CreateAnalyticsBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/DeleteAnalyticsBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/CreateBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/DeleteBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/EditBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/EmptyBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/StorageExplorer/useFetchFileUrlQuery.tsx",
					"apps/studio/components/interfaces/Storage/StorageSettings/CreateCredentialModal.tsx",
					"apps/studio/components/interfaces/Storage/StorageSettings/RevokeCredentialModal.tsx",
					"apps/studio/components/interfaces/Storage/StorageSettings/S3Connection.tsx",
					"apps/studio/components/interfaces/Storage/StorageSettings/StorageListV2MigrationCallout.tsx",
					"apps/studio/components/interfaces/Storage/StorageSettings/StorageSettings.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/DeleteVectorBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/DeleteVectorTableModal.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/VectorBucketDetails.tsx",
					"apps/studio/components/interfaces/TableGridEditor/DeleteConfirmationDialogs.tsx",
					"apps/studio/components/interfaces/TableGridEditor/GridHeaderActions.tsx",
					"apps/studio/components/interfaces/TableGridEditor/SidePanelEditor/RowEditor/JsonEditor/index.tsx",
					"apps/studio/components/interfaces/TableGridEditor/SidePanelEditor/RowEditor/TextEditor.tsx",
					"apps/studio/components/interfaces/TableGridEditor/SidePanelEditor/SchemaEditor.tsx",
					"apps/studio/components/interfaces/UnifiedLogs/components/DownloadLogsButton.tsx",
					"apps/studio/components/layouts/ProjectLayout/LayoutHeader/MergeRequestButton.tsx",
					"apps/studio/components/layouts/ProjectLayout/PauseFailedState.tsx",
					"apps/studio/components/layouts/ProjectLayout/PausedState/ProjectPausedState.tsx",
					"apps/studio/components/layouts/ProjectLayout/RestoreFailedState.tsx",
					"apps/studio/components/layouts/ProjectLayout/RestoringState.tsx",
					"apps/studio/components/layouts/ReportsLayout/ReportsMenu.tsx",
					"apps/studio/components/layouts/SQLEditorLayout/SQLEditorNavV2/DeleteSnippetsModal.tsx",
					"apps/studio/components/layouts/SQLEditorLayout/SQLEditorNavV2/SQLEditorNav.tsx",
					"apps/studio/components/layouts/SQLEditorLayout/SQLEditorNavV2/ShareSnippetModal.tsx",
					"apps/studio/components/layouts/SQLEditorLayout/SQLEditorNavV2/UnshareSnippetModal.tsx",
					"apps/studio/components/ui/AIAssistantPanel/DisplayBlockRenderer.tsx",
					"apps/studio/components/ui/AIAssistantPanel/EdgeFunctionRenderer.tsx",
					"apps/studio/components/ui/EditorPanel/EditorPanel.tsx",
					"apps/studio/components/ui/ProjectSettings/ToggleLegacyApiKeys.tsx",
					"apps/studio/data/config/jwt-secret-updating-status-query.ts",
					"apps/studio/data/config/project-upgrade-status-query.ts",
					"apps/studio/data/oauth-server-apps/oauth-server-apps-query.ts",
					"apps/studio/data/storage/iceberg-wrapper-create-mutation.ts",
					"apps/studio/data/storage/s3-vectors-wrapper-create-mutation.ts",
					"apps/studio/hooks/forms/useAIOptInForm.ts",
					"apps/studio/lib/profile.tsx",
					"apps/studio/package.json",
					"apps/studio/pages/integrations/github/authorize.tsx",
					"apps/studio/pages/integrations/vercel/[slug]/marketplace/choose-project.tsx",
					"apps/studio/pages/integrations/vercel/install.tsx",
					"apps/studio/pages/new/[slug].tsx",
					"apps/studio/pages/project/[ref]/auth/templates/[templateId].tsx",
					"apps/studio/pages/project/[ref]/branches/index.tsx",
					"apps/studio/pages/project/[ref]/branches/merge-requests.tsx",
					"apps/studio/pages/project/[ref]/functions/[functionSlug]/code.tsx",
					"apps/studio/pages/project/[ref]/functions/new.tsx",
					"apps/studio/pages/project/[ref]/logs/explorer/index.tsx",
					"apps/studio/pages/project/[ref]/merge.tsx",
					"apps/studio/pages/project/[ref]/observability/database.tsx",
					"apps/studio/pages/project/[ref]/settings/log-drains.tsx",
					"apps/studio/tests/helpers.tsx",
					"apps/studio/types/react-query.ts",
					"pnpm-lock.yaml"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/grid/components/editor/JsonEditor.tsx b/apps/studio/components/grid/components/editor/JsonEditor.tsx\nindex e99c1104c6c00..4922d306c7aa9 100644\n--- a/apps/studio/components/grid/components/editor/JsonEditor.tsx\n+++ b/apps/studio/components/grid/components/editor/JsonEditor.tsx\n@@ -73,7 +73,7 @@ export const JsonEditor = <TRow, TSummaryRow = unknown>({\n   const [isPopoverOpen, setIsPopoverOpen] = useState(true)\n   const [value, setValue] = useState<string | null>(jsonString)\n \n-  const { mutate: getCellValue, isLoading, isSuccess } = useGetCellValueMutation()\n+  const { mutate: getCellValue, isPending, isSuccess } = useGetCellValueMutation()\n \n   const loadFullValue = () => {\n     if (selectedTable === undefined || project === undefined || !isTableLike(selectedTable)) return\n@@ -167,7 +167,7 @@ export const JsonEditor = <TRow, TSummaryRow = unknown>({\n               value={value ?? ''}\n               language=\"markdown\"\n             />\n-            <TruncatedWarningOverlay isLoading={isLoading} loadFullValue={loadFullValue} />\n+            <TruncatedWarningOverlay isLoading={isPending} loadFullValue={loadFullValue} />\n           </div>\n         ) : (\n           <BlockKeys value={value} onEscape={cancelChanges} onEnter={saveChanges}>\ndiff --git a/apps/studio/components/grid/components/editor/TextEditor.tsx b/apps/studio/components/grid/components/editor/TextEditor.tsx\nindex ca49402a3d55e..9607dda28ad89 100644\n--- a/apps/studio/components/grid/components/editor/TextEditor.tsx\n+++ b/apps/studio/components/grid/components/editor/TextEditor.tsx\n@@ -45,7 +45,7 @@ export const TextEditor = <TRow, TSummaryRow = unknown>({\n   const [value, setValue] = useState<string | null>(initialValue)\n   const [isConfirmNextModalOpen, setIsConfirmNextModalOpen] = useState(false)\n \n-  const { mutate: getCellValue, isLoading, isSuccess } = useGetCellValueMutation()\n+  const { mutate: getCellValue, isPending, isSuccess } = useGetCellValueMutation()\n \n   const isTruncated = isValueTruncated(initialValue)\n \n@@ -121,7 +121,7 @@ export const TextEditor = <TRow, TSummaryRow = unknown>({\n                 value={value ?? ''}\n                 language=\"markdown\"\n               />\n-              <TruncatedWarningOverlay isLoading={isLoading} loadFullValue={loadFullValue} />\n+              <TruncatedWarningOverlay isLoading={isPending} loadFullValue={loadFullValue} />\n             </div>\n           ) : (\n             <BlockKeys\ndiff --git a/apps/studio/components/interfaces/APIKeys/APIKeyDeleteDialog.tsx b/apps/studio/components/interfaces/APIKeys/APIKeyDeleteDialog.tsx\nindex c67795d51d4b9..7cacf303492d5 100644\n--- a/apps/studio/components/interfaces/APIKeys/APIKeyDeleteDialog.tsx\n+++ b/apps/studio/components/interfaces/APIKeys/APIKeyDeleteDialog.tsx\n@@ -2,8 +2,8 @@ import { PermissionAction } from '@supabase/shared-types/out/constants'\n import { Trash2 } from 'lucide-react'\n \n import { DropdownMenuItemTooltip } from 'components/ui/DropdownMenuItemTooltip'\n-import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n import type { APIKeysData } from 'data/api-keys/api-keys-query'\n+import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n \n interface APIKeyDeleteDialogProps {\n   apiKey: Extract<APIKeysData[number], { type: 'secret' | 'publishable' }>\ndiff --git a/apps/studio/components/interfaces/APIKeys/CreatePublishableAPIKeyDialog.tsx b/apps/studio/components/interfaces/APIKeys/CreatePublishableAPIKeyDialog.tsx\nindex 8a837bf9d4778..f195342a307b9 100644\n--- a/apps/studio/components/interfaces/APIKeys/CreatePublishableAPIKeyDialog.tsx\n+++ b/apps/studio/components/interfaces/APIKeys/CreatePublishableAPIKeyDialog.tsx\n@@ -51,7 +51,7 @@ function CreatePublishableAPIKeyDialog() {\n     },\n   })\n \n-  const { mutate: createAPIKey, isLoading: isCreatingAPIKey } = useAPIKeyCreateMutation()\n+  const { mutate: createAPIKey, isPending: isCreatingAPIKey } = useAPIKeyCreateMutation()\n \n   const onSubmit: SubmitHandler<z.infer<typeof SCHEMA>> = async (values) => {\n     createAPIKey(\ndiff --git a/apps/studio/components/interfaces/APIKeys/CreateSecretAPIKeyDialog.tsx b/apps/studio/components/interfaces/APIKeys/CreateSecretAPIKeyDialog.tsx\nindex a480f73d8da6e..4eb1879425701 100644\n--- a/apps/studio/components/interfaces/APIKeys/CreateSecretAPIKeyDialog.tsx\n+++ b/apps/studio/components/interfaces/APIKeys/CreateSecretAPIKeyDialog.tsx\n@@ -64,7 +64,7 @@ const CreateSecretAPIKeyDialog = () => {\n     },\n   })\n \n-  const { mutate: createAPIKey, isLoading: isCreatingAPIKey } = useAPIKeyCreateMutation()\n+  const { mutate: createAPIKey, isPending: isCreatingAPIKey } = useAPIKeyCreateMutation()\n \n   const onSubmit: SubmitHandler<z.infer<typeof SCHEMA>> = async (values) => {\n     createAPIKey(\ndiff --git a/apps/studio/components/interfaces/APIKeys/SecretAPIKeys.tsx b/apps/studio/components/interfaces/APIKeys/SecretAPIKeys.tsx\nindex 2828644e12d79..c3d55af77a01f 100644\n--- a/apps/studio/components/interfaces/APIKeys/SecretAPIKeys.tsx\n+++ b/apps/studio/components/interfaces/APIKeys/SecretAPIKeys.tsx\n@@ -9,7 +9,6 @@ import { useAPIKeyDeleteMutation } from 'data/api-keys/api-key-delete-mutation'\n import type { APIKeysData } from 'data/api-keys/api-keys-query'\n import { useAPIKeysQuery } from 'data/api-keys/api-keys-query'\n import useLogsQuery from 'hooks/analytics/useLogsQuery'\n-import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { Card, EyeOffIcon } from 'ui'\n import { GenericSkeletonLoader } from 'ui-patterns/ShimmeringLoader'\n@@ -87,7 +86,7 @@ export const SecretAPIKeys = () => {\n       handleErrorOnDelete(deletingAPIKeyIdRef, selectedId, `API Key not found`),\n   })\n \n-  const { mutate: deleteAPIKey, isLoading: isDeletingAPIKey } = useAPIKeyDeleteMutation({\n+  const { mutate: deleteAPIKey, isPending: isDeletingAPIKey } = useAPIKeyDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully deleted API key`)\n       setAPIKeyToDelete(null)\ndiff --git a/apps/studio/components/interfaces/Account/AccessTokens/NewAccessTokenDialog.tsx b/apps/studio/components/interfaces/Account/AccessTokens/NewAccessTokenDialog.tsx\nindex afd1d8b7cf16e..714055746a5a3 100644\n--- a/apps/studio/components/interfaces/Account/AccessTokens/NewAccessTokenDialog.tsx\n+++ b/apps/studio/components/interfaces/Account/AccessTokens/NewAccessTokenDialog.tsx\n@@ -67,7 +67,7 @@ export const NewAccessTokenDialog = ({\n     defaultValues: { tokenName: '', expiresAt: ExpiresAtOptions['month'].value },\n     mode: 'onChange',\n   })\n-  const { mutate: createAccessToken, isLoading } = useAccessTokenCreateMutation()\n+  const { mutate: createAccessToken, isPending } = useAccessTokenCreateMutation()\n \n   const onSubmit: SubmitHandler<z.infer<typeof TokenSchema>> = async (values) => {\n     // Use custom date if custom option is selected\n@@ -240,7 +240,7 @@ export const NewAccessTokenDialog = ({\n         <DialogFooter>\n           <Button\n             type=\"default\"\n-            disabled={isLoading}\n+            disabled={isPending}\n             onClick={() => {\n               form.reset()\n               setCustomExpiryDate(undefined)\n@@ -250,7 +250,7 @@ export const NewAccessTokenDialog = ({\n           >\n             Cancel\n           </Button>\n-          <Button form={formId} htmlType=\"submit\" loading={isLoading}>\n+          <Button form={formId} htmlType=\"submit\" loading={isPending}>\n             Generate token\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Account/Preferences/AccountConnections.tsx b/apps/studio/components/interfaces/Account/Preferences/AccountConnections.tsx\nindex 5d7d40521254d..e5f17b5c5d3f5 100644\n--- a/apps/studio/components/interfaces/Account/Preferences/AccountConnections.tsx\n+++ b/apps/studio/components/interfaces/Account/Preferences/AccountConnections.tsx\n@@ -15,7 +15,6 @@ import {\n   DropdownMenu,\n   DropdownMenuContent,\n   DropdownMenuItem,\n-  DropdownMenuSeparator,\n   DropdownMenuTrigger,\n } from 'ui'\n import ConfirmationModal from 'ui-patterns/Dialogs/ConfirmationModal'\n@@ -34,7 +33,7 @@ export const AccountConnections = () => {\n \n   const isConnected = gitHubAuthorization !== null\n \n-  const { mutate: removeAuthorization, isLoading: isRemoving } =\n+  const { mutate: removeAuthorization, isPending: isRemoving } =\n     useGitHubAuthorizationDeleteMutation({\n       onSuccess: () => {\n         toast.success('GitHub authorization removed successfully')\ndiff --git a/apps/studio/components/interfaces/Account/Preferences/AccountIdentities.tsx b/apps/studio/components/interfaces/Account/Preferences/AccountIdentities.tsx\nindex 81801248215db..b866e6bb73ea5 100644\n--- a/apps/studio/components/interfaces/Account/Preferences/AccountIdentities.tsx\n+++ b/apps/studio/components/interfaces/Account/Preferences/AccountIdentities.tsx\n@@ -50,7 +50,7 @@ export const AccountIdentities = () => {\n   const [selectedProviderUnlink, setSelectedProviderUnlink] = useState<string>()\n   const [selectedProviderUpdateEmail, setSelectedProviderUpdateEmail] = useState<string>()\n \n-  const { mutate: unlinkIdentity, isLoading: isUnlinking } = useUnlinkIdentityMutation({\n+  const { mutate: unlinkIdentity, isPending: isUnlinking } = useUnlinkIdentityMutation({\n     onSuccess: () => {\n       toast.success(\n         `Successfully unlinked ${getProviderName(selectedProviderUnlink ?? '')} identity!`\ndiff --git a/apps/studio/components/interfaces/Account/Preferences/ChangeEmailAddress.tsx b/apps/studio/components/interfaces/Account/Preferences/ChangeEmailAddress.tsx\nindex c853e7514c992..0aa80154dda25 100644\n--- a/apps/studio/components/interfaces/Account/Preferences/ChangeEmailAddress.tsx\n+++ b/apps/studio/components/interfaces/Account/Preferences/ChangeEmailAddress.tsx\n@@ -66,7 +66,7 @@ export const ChangeEmailAddressForm = ({ onClose }: { onClose: () => void }) =>\n     defaultValues: { email: '' },\n   })\n \n-  const { mutate: updateEmail, isLoading } = useEmailUpdateMutation({\n+  const { mutate: updateEmail, isPending } = useEmailUpdateMutation({\n     onSuccess: (_, vars) => {\n       toast.success(\n         `A confirmation email has been sent to ${vars.email}. Please confirm the change within 10 minutes.`\n@@ -121,10 +121,10 @@ export const ChangeEmailAddressForm = ({ onClose }: { onClose: () => void }) =>\n         </DialogSection>\n \n         <DialogFooter>\n-          <Button type=\"default\" disabled={isLoading} onClick={onClose}>\n+          <Button type=\"default\" disabled={isPending} onClick={onClose}>\n             Cancel\n           </Button>\n-          <Button htmlType=\"submit\" loading={isLoading} disabled={isLoading}>\n+          <Button htmlType=\"submit\" loading={isPending} disabled={isPending}>\n             Confirm\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Account/Preferences/DeleteAccountButton.tsx b/apps/studio/components/interfaces/Account/Preferences/DeleteAccountButton.tsx\nindex 90e9c00edb242..bbc1968e44c2c 100644\n--- a/apps/studio/components/interfaces/Account/Preferences/DeleteAccountButton.tsx\n+++ b/apps/studio/components/interfaces/Account/Preferences/DeleteAccountButton.tsx\n@@ -65,7 +65,7 @@ export const DeleteAccountButton = () => {\n   })\n   const { account } = form.watch()\n \n-  const { mutate: submitSupportTicket, isLoading } = useSendSupportTicketMutation({\n+  const { mutate: submitSupportTicket, isPending } = useSendSupportTicketMutation({\n     onSuccess: () => {\n       setIsOpen(false)\n       setDeletionRequestFlag()\n@@ -171,7 +171,7 @@ export const DeleteAccountButton = () => {\n                               autoFocus\n                               {...field}\n                               autoComplete=\"off\"\n-                              disabled={isLoading}\n+                              disabled={isPending}\n                               placeholder=\"Enter the account above\"\n                             />\n                           </FormControl_Shadcn_>\n@@ -186,8 +186,8 @@ export const DeleteAccountButton = () => {\n                       size=\"small\"\n                       type=\"danger\"\n                       htmlType=\"submit\"\n-                      loading={isLoading}\n-                      disabled={account !== accountEmail || isLoading}\n+                      loading={isPending}\n+                      disabled={account !== accountEmail || isPending}\n                     >\n                       Submit request for account deletion\n                     </Button>\ndiff --git a/apps/studio/components/interfaces/Account/Preferences/ProfileInformation.tsx b/apps/studio/components/interfaces/Account/Preferences/ProfileInformation.tsx\nindex 2c9decfe6ec6a..091420f9ad341 100644\n--- a/apps/studio/components/interfaces/Account/Preferences/ProfileInformation.tsx\n+++ b/apps/studio/components/interfaces/Account/Preferences/ProfileInformation.tsx\n@@ -59,7 +59,7 @@ export const ProfileInformation = () => {\n     values: defaultValues,\n   })\n \n-  const { mutate: updateProfile, isLoading } = useProfileUpdateMutation({\n+  const { mutate: updateProfile, isPending } = useProfileUpdateMutation({\n     onSuccess: (data) => {\n       toast.success('Successfully saved profile')\n       const { first_name, last_name, username, primary_email } = data\n@@ -175,7 +175,7 @@ export const ProfileInformation = () => {\n             <Button\n               type=\"primary\"\n               htmlType=\"submit\"\n-              loading={isLoading || isIdentitiesLoading}\n+              loading={isPending || isIdentitiesLoading}\n               disabled={!form.formState.isDirty}\n             >\n               Save\ndiff --git a/apps/studio/components/interfaces/Account/TOTPFactors/AddNewFactorModal.tsx b/apps/studio/components/interfaces/Account/TOTPFactors/AddNewFactorModal.tsx\nindex c0db7372cc8f8..28956b51802a5 100644\n--- a/apps/studio/components/interfaces/Account/TOTPFactors/AddNewFactorModal.tsx\n+++ b/apps/studio/components/interfaces/Account/TOTPFactors/AddNewFactorModal.tsx\n@@ -21,7 +21,7 @@ interface AddNewFactorModalProps {\n export const AddNewFactorModal = ({ visible, onClose }: AddNewFactorModalProps) => {\n   // Generate a name with a number between 0 and 1000\n   const [name, setName] = useState(`App ${Math.floor(Math.random() * 1000)}`)\n-  const { data, mutate: enroll, isLoading: isEnrolling, reset } = useMfaEnrollMutation()\n+  const { data, mutate: enroll, isPending: isEnrolling, reset } = useMfaEnrollMutation()\n \n   useEffect(() => {\n     // reset has to be called because the state is kept between if the process is canceled during\n@@ -122,7 +122,7 @@ const SecondStep = ({\n   )\n \n   const { mutate: unenroll } = useMfaUnenrollMutation({ onSuccess: () => onClose() })\n-  const { mutate: challengeAndVerify, isLoading: isVerifying } = useMfaChallengeAndVerifyMutation({\n+  const { mutate: challengeAndVerify, isPending: isVerifying } = useMfaChallengeAndVerifyMutation({\n     onError: (error) => {\n       toast.error(`Failed to add a second factor authentication:  ${error?.message}`)\n     },\ndiff --git a/apps/studio/components/interfaces/Account/TOTPFactors/DeleteFactorModal.tsx b/apps/studio/components/interfaces/Account/TOTPFactors/DeleteFactorModal.tsx\nindex 57d5aed609bf1..d26cc6e7c018e 100644\n--- a/apps/studio/components/interfaces/Account/TOTPFactors/DeleteFactorModal.tsx\n+++ b/apps/studio/components/interfaces/Account/TOTPFactors/DeleteFactorModal.tsx\n@@ -26,7 +26,7 @@ const DeleteFactorModal = ({\n     ''\n   )\n \n-  const { mutate: unenroll, isLoading } = useMfaUnenrollMutation({\n+  const { mutate: unenroll, isPending } = useMfaUnenrollMutation({\n     onSuccess: async () => {\n       if (lastVisitedOrganization) {\n         await queryClient.invalidateQueries({\n@@ -46,7 +46,7 @@ const DeleteFactorModal = ({\n       title=\"Confirm to delete factor\"\n       confirmLabel=\"Delete\"\n       confirmLabelLoading=\"Deleting\"\n-      loading={isLoading}\n+      loading={isPending}\n       onCancel={onClose}\n       onConfirm={() => factorId && unenroll({ factorId })}\n       alert={{\ndiff --git a/apps/studio/components/interfaces/Advisors/AdvisorRuleItem.tsx b/apps/studio/components/interfaces/Advisors/AdvisorRuleItem.tsx\nindex afd8c3016d968..199f0bc8f475c 100644\n--- a/apps/studio/components/interfaces/Advisors/AdvisorRuleItem.tsx\n+++ b/apps/studio/components/interfaces/Advisors/AdvisorRuleItem.tsx\n@@ -59,7 +59,7 @@ export const AdvisorRuleItem = ({ lint }: AdvisorRuleItemProps) => {\n   const selectedRuleMeta = data.exceptions.find((x) => x.id === selectedRuleToDelete)\n   const selectedMemberForRule = members.find((x) => x.gotrue_id === selectedRuleMeta?.assigned_to)\n \n-  const { mutate: deleteRule, isLoading: isDeleting } = useLintRuleDeleteMutation({\n+  const { mutate: deleteRule, isPending: isDeleting } = useLintRuleDeleteMutation({\n     onSuccess: () => {\n       toast.success('Successfully deleted rule')\n       setSelectedRuleToDelete(undefined)\ndiff --git a/apps/studio/components/interfaces/Advisors/CreateRuleSheet.tsx b/apps/studio/components/interfaces/Advisors/CreateRuleSheet.tsx\nindex e825a9ff1e776..8c03074cb2b08 100644\n--- a/apps/studio/components/interfaces/Advisors/CreateRuleSheet.tsx\n+++ b/apps/studio/components/interfaces/Advisors/CreateRuleSheet.tsx\n@@ -73,7 +73,7 @@ export const CreateRuleSheet = ({ lint, open, onOpenChange }: CreateRuleSheetPro\n   const { data: organization } = useSelectedOrganizationQuery()\n   const { data: members = [] } = useOrganizationMembersQuery({ slug: organization?.slug })\n \n-  const { mutate: createRule, isLoading: isCreating } = useLintRuleCreateMutation({\n+  const { mutate: createRule, isPending: isCreating } = useLintRuleCreateMutation({\n     onSuccess: (_, vars) => {\n       const ruleLint = vars.exception.lint_name\n       const ruleLintMeta = lintInfoMap.find((x) => x.name === ruleLint)\ndiff --git a/apps/studio/components/interfaces/Advisors/DisableRuleModal.tsx b/apps/studio/components/interfaces/Advisors/DisableRuleModal.tsx\nindex 1b6aff2393d38..f3b0a271debd8 100644\n--- a/apps/studio/components/interfaces/Advisors/DisableRuleModal.tsx\n+++ b/apps/studio/components/interfaces/Advisors/DisableRuleModal.tsx\n@@ -29,7 +29,7 @@ export const DisableRuleModal = ({ lint }: DisableRuleModalProps) => {\n \n   const [open, setOpen] = useState(false)\n \n-  const { mutate: createRule, isLoading: isCreating } = useLintRuleCreateMutation({\n+  const { mutate: createRule, isPending: isCreating } = useLintRuleCreateMutation({\n     onSuccess: (_, vars) => {\n       const ruleLint = vars.exception.lint_name\n       const ruleLintMeta = lintInfoMap.find((x) => x.name === ruleLint)\ndiff --git a/apps/studio/components/interfaces/Advisors/EnableRuleModal.tsx b/apps/studio/components/interfaces/Advisors/EnableRuleModal.tsx\nindex c744e3d632b43..10f55aabad59f 100644\n--- a/apps/studio/components/interfaces/Advisors/EnableRuleModal.tsx\n+++ b/apps/studio/components/interfaces/Advisors/EnableRuleModal.tsx\n@@ -29,7 +29,7 @@ export const EnableRuleModal = ({ lint, rule }: EnableRuleModalProps) => {\n \n   const [open, setOpen] = useState(false)\n \n-  const { mutate: deleteRule, isLoading: isDeleting } = useLintRuleDeleteMutation({\n+  const { mutate: deleteRule, isPending: isDeleting } = useLintRuleDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully enabled the \"${lint.title}\" rule`)\n       setOpen(false)\ndiff --git a/apps/studio/components/interfaces/Auth/AuditLogsForm.tsx b/apps/studio/components/interfaces/Auth/AuditLogsForm.tsx\nindex 7eace1cfe1d9a..1b3a726bb0b05 100644\n--- a/apps/studio/components/interfaces/Auth/AuditLogsForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/AuditLogsForm.tsx\n@@ -57,7 +57,7 @@ export const AuditLogsForm = () => {\n     isLoading,\n   } = useAuthConfigQuery({ projectRef })\n \n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation({\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation({\n     onError: (error) => {\n       toast.error(`Failed to update audit logs: ${error?.message}`)\n     },\ndiff --git a/apps/studio/components/interfaces/Auth/AuthProvidersForm/ProviderForm.tsx b/apps/studio/components/interfaces/Auth/AuthProvidersForm/ProviderForm.tsx\nindex d05e65d15284e..025f54e74acee 100644\n--- a/apps/studio/components/interfaces/Auth/AuthProvidersForm/ProviderForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/AuthProvidersForm/ProviderForm.tsx\n@@ -38,7 +38,7 @@ export const ProviderForm = ({ config, provider, isActive }: ProviderFormProps)\n   const [urlProvider, setUrlProvider] = useQueryState('provider', { defaultValue: '' })\n \n   const [open, setOpen] = useState(false)\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation()\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation()\n \n   const { can: canUpdateConfig } = useAsyncCheckPermissions(\n     PermissionAction.UPDATE,\ndiff --git a/apps/studio/components/interfaces/Auth/BasicAuthSettingsForm.tsx b/apps/studio/components/interfaces/Auth/BasicAuthSettingsForm.tsx\nindex b5da9b10312ef..109aee659470a 100644\n--- a/apps/studio/components/interfaces/Auth/BasicAuthSettingsForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/BasicAuthSettingsForm.tsx\n@@ -54,7 +54,7 @@ export const BasicAuthSettingsForm = () => {\n     isSuccess,\n     isLoading,\n   } = useAuthConfigQuery({ projectRef })\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation()\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation()\n \n   const { can: canReadConfig, isSuccess: isPermissionsLoaded } = useAsyncCheckPermissions(\n     PermissionAction.READ,\ndiff --git a/apps/studio/components/interfaces/Auth/EmailTemplates/EmailTemplates.tsx b/apps/studio/components/interfaces/Auth/EmailTemplates/EmailTemplates.tsx\nindex cf8ba29f02a8f..d64d70e5de236 100644\n--- a/apps/studio/components/interfaces/Auth/EmailTemplates/EmailTemplates.tsx\n+++ b/apps/studio/components/interfaces/Auth/EmailTemplates/EmailTemplates.tsx\n@@ -84,7 +84,7 @@ export const EmailTemplates = () => {\n     isSuccess,\n   } = useAuthConfigQuery({ projectRef })\n \n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation({\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation({\n     onError: (error) => {\n       toast.error(`Failed to update settings: ${error?.message}`)\n     },\ndiff --git a/apps/studio/components/interfaces/Auth/Hooks/CreateHookSheet.tsx b/apps/studio/components/interfaces/Auth/Hooks/CreateHookSheet.tsx\nindex ecc4de59e659a..b17059315fcf1 100644\n--- a/apps/studio/components/interfaces/Auth/Hooks/CreateHookSheet.tsx\n+++ b/apps/studio/components/interfaces/Auth/Hooks/CreateHookSheet.tsx\n@@ -187,7 +187,7 @@ export const CreateHookSheet = ({\n     return permissionChanges\n   }, [hook, values.postgresValues.schema, values.postgresValues.functionName])\n \n-  const { mutate: updateAuthHooks, isLoading: isUpdatingAuthHooks } = useAuthHooksUpdateMutation({\n+  const { mutate: updateAuthHooks, isPending: isUpdatingAuthHooks } = useAuthHooksUpdateMutation({\n     onSuccess: () => {\n       toast.success(`Successfully created ${values.hookType}.`)\n       if (statements.length > 0) {\ndiff --git a/apps/studio/components/interfaces/Auth/Hooks/HooksListing.tsx b/apps/studio/components/interfaces/Auth/Hooks/HooksListing.tsx\nindex 9e07fcae46009..cdc156ea28386 100644\n--- a/apps/studio/components/interfaces/Auth/Hooks/HooksListing.tsx\n+++ b/apps/studio/components/interfaces/Auth/Hooks/HooksListing.tsx\n@@ -31,7 +31,7 @@ export const HooksListing = () => {\n \n   const [selectedHookForDeletion, setSelectedHookForDeletion] = useState<Hook | null>(null)\n \n-  const { mutate: updateAuthHooks, isLoading: isDeletingAuthHook } = useAuthHooksUpdateMutation({\n+  const { mutate: updateAuthHooks, isPending: isDeletingAuthHook } = useAuthHooksUpdateMutation({\n     onSuccess: async () => {\n       if (!selectedHookForDeletion) return\n \ndiff --git a/apps/studio/components/interfaces/Auth/OAuthApps/CreateOAuthAppSheet.tsx b/apps/studio/components/interfaces/Auth/OAuthApps/CreateOAuthAppSheet.tsx\nindex 934930c4134ca..3eae0ae5c5b14 100644\n--- a/apps/studio/components/interfaces/Auth/OAuthApps/CreateOAuthAppSheet.tsx\n+++ b/apps/studio/components/interfaces/Auth/OAuthApps/CreateOAuthAppSheet.tsx\n@@ -84,7 +84,7 @@ export const CreateOAuthAppSheet = ({ visible, onSuccess, onCancel }: CreateOAut\n \n   const { data: supabaseClientData } = useSupabaseClientQuery({ projectRef })\n \n-  const { mutateAsync: createOAuthApp, isLoading: isCreating } = useOAuthServerAppCreateMutation({\n+  const { mutateAsync: createOAuthApp, isPending: isCreating } = useOAuthServerAppCreateMutation({\n     onSuccess: (data) => {\n       toast.success(`Successfully created OAuth app \"${data.client_name}\"`)\n       onSuccess(data)\ndiff --git a/apps/studio/components/interfaces/Auth/OAuthApps/OAuthAppsList.tsx b/apps/studio/components/interfaces/Auth/OAuthApps/OAuthAppsList.tsx\nindex 49c65bb20868e..39edef0400a02 100644\n--- a/apps/studio/components/interfaces/Auth/OAuthApps/OAuthAppsList.tsx\n+++ b/apps/studio/components/interfaces/Auth/OAuthApps/OAuthAppsList.tsx\n@@ -71,7 +71,7 @@ export const OAuthAppsList = () => {\n     { enabled: isOAuthServerEnabled }\n   )\n \n-  const { mutateAsync: regenerateSecret, isLoading: isRegenerating } =\n+  const { mutateAsync: regenerateSecret, isPending: isRegenerating } =\n     useOAuthServerAppRegenerateSecretMutation({\n       onSuccess: (data) => {\n         if (data) {\ndiff --git a/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx b/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx\nindex 8270fcb165faf..491804aff1207 100644\n--- a/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/OAuthApps/OAuthServerSettingsForm.tsx\n@@ -81,7 +81,7 @@ export const OAuthServerSettingsForm = () => {\n     isLoading: isAuthConfigLoading,\n     isSuccess,\n   } = useAuthConfigQuery({ projectRef })\n-  const { mutate: updateAuthConfig, isLoading } = useAuthConfigUpdateMutation({\n+  const { mutate: updateAuthConfig, isPending } = useAuthConfigUpdateMutation({\n     onSuccess: () => {\n       toast.success('OAuth server settings updated successfully')\n     },\n@@ -346,14 +346,14 @@ export const OAuthServerSettingsForm = () => {\n                 )}\n \n                 <CardFooter className=\"justify-end space-x-2\">\n-                  <Button type=\"default\" onClick={() => form.reset()} disabled={isLoading}>\n+                  <Button type=\"default\" onClick={() => form.reset()} disabled={isPending}>\n                     Cancel\n                   </Button>\n                   <Button\n                     type=\"primary\"\n                     htmlType=\"submit\"\n                     disabled={!canUpdateConfig || !form.formState.isDirty}\n-                    loading={isLoading}\n+                    loading={isPending}\n                   >\n                     Save changes\n                   </Button>\ndiff --git a/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx b/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx\nindex 5f99b384f83fe..5e9c7a45edc52 100644\n--- a/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx\n+++ b/apps/studio/components/interfaces/Auth/Policies/PolicyEditorPanel/index.tsx\n@@ -122,7 +122,7 @@ export const PolicyEditorPanel = memo(function ({\n   const supportWithCheck = ['update', 'all'].includes(command)\n   const isRenamingPolicy = selectedPolicy !== undefined && name !== selectedPolicy.name\n \n-  const { mutate: executeMutation, isLoading: isExecuting } = useExecuteSqlMutation({\n+  const { mutate: executeMutation, isPending: isExecuting } = useExecuteSqlMutation({\n     onSuccess: async () => {\n       // refresh all policies\n       await queryClient.invalidateQueries({ queryKey: databasePoliciesKeys.list(ref) })\n@@ -132,7 +132,7 @@ export const PolicyEditorPanel = memo(function ({\n     onError: (error) => setError(error),\n   })\n \n-  const { mutate: updatePolicy, isLoading: isUpdating } = useDatabasePolicyUpdateMutation({\n+  const { mutate: updatePolicy, isPending: isUpdating } = useDatabasePolicyUpdateMutation({\n     onSuccess: () => {\n       toast.success('Successfully updated policy')\n       onSelectCancel()\ndiff --git a/apps/studio/components/interfaces/Auth/ProtectionAuthSettingsForm/ProtectionAuthSettingsForm.tsx b/apps/studio/components/interfaces/Auth/ProtectionAuthSettingsForm/ProtectionAuthSettingsForm.tsx\nindex 63f6674bf8b60..0d523816eba96 100644\n--- a/apps/studio/components/interfaces/Auth/ProtectionAuthSettingsForm/ProtectionAuthSettingsForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/ProtectionAuthSettingsForm/ProtectionAuthSettingsForm.tsx\n@@ -76,7 +76,7 @@ export const ProtectionAuthSettingsForm = () => {\n     isError,\n     isLoading,\n   } = useAuthConfigQuery({ projectRef })\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation({\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation({\n     onError: (error) => {\n       toast.error(`Failed to update settings: ${error?.message}`)\n     },\ndiff --git a/apps/studio/components/interfaces/Auth/RateLimits/RateLimits.tsx b/apps/studio/components/interfaces/Auth/RateLimits/RateLimits.tsx\nindex 55e086b2a44aa..881979f463b60 100644\n--- a/apps/studio/components/interfaces/Auth/RateLimits/RateLimits.tsx\n+++ b/apps/studio/components/interfaces/Auth/RateLimits/RateLimits.tsx\n@@ -48,7 +48,7 @@ export const RateLimits = () => {\n     isError,\n     isSuccess,\n   } = useAuthConfigQuery({ projectRef })\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation({\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation({\n     onSuccess: () => {\n       toast.success('Rate limits successfully updated')\n     },\ndiff --git a/apps/studio/components/interfaces/Auth/RedirectUrls/AddNewURLModal.tsx b/apps/studio/components/interfaces/Auth/RedirectUrls/AddNewURLModal.tsx\nindex 92fdbf8fde167..0bf6ba0e79056 100644\n--- a/apps/studio/components/interfaces/Auth/RedirectUrls/AddNewURLModal.tsx\n+++ b/apps/studio/components/interfaces/Auth/RedirectUrls/AddNewURLModal.tsx\n@@ -5,6 +5,7 @@ import { useFieldArray, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import * as z from 'zod'\n \n+import { Label } from '@ui/components/shadcn/ui/label'\n import { useParams } from 'common'\n import { useAuthConfigUpdateMutation } from 'data/auth/auth-config-update-mutation'\n import {\n@@ -19,7 +20,6 @@ import {\n } from 'ui'\n import { Input } from 'ui-patterns/DataInputs/Input'\n import { FormItemLayout } from 'ui-patterns/form/FormItemLayout/FormItemLayout'\n-import { Label } from '@ui/components/shadcn/ui/label'\n import { urlRegex } from '../Auth.constants'\n \n const MAX_URLS_LENGTH = 2 * 1024\n@@ -32,7 +32,7 @@ interface AddNewURLModalProps {\n \n export const AddNewURLModal = ({ visible, allowList, onClose }: AddNewURLModalProps) => {\n   const { ref } = useParams()\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation()\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation()\n \n   const FormSchema = z.object({\n     urls: z\ndiff --git a/apps/studio/components/interfaces/Auth/RedirectUrls/RedirectUrls.tsx b/apps/studio/components/interfaces/Auth/RedirectUrls/RedirectUrls.tsx\nindex 4db5346402040..d1434eb583c07 100644\n--- a/apps/studio/components/interfaces/Auth/RedirectUrls/RedirectUrls.tsx\n+++ b/apps/studio/components/interfaces/Auth/RedirectUrls/RedirectUrls.tsx\n@@ -29,7 +29,7 @@ export const RedirectUrls = () => {\n     isError,\n     isSuccess,\n   } = useAuthConfigQuery({ projectRef })\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation()\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation()\n \n   const URI_ALLOW_LIST_ARRAY = useMemo(() => {\n     return authConfig?.URI_ALLOW_LIST\ndiff --git a/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx b/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx\nindex 6b8c9357bc0a4..bae64905289aa 100644\n--- a/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx\n+++ b/apps/studio/components/interfaces/Auth/SmtpForm/SmtpForm.tsx\n@@ -46,7 +46,7 @@ interface SmtpFormValues {\n export const SmtpForm = () => {\n   const { ref: projectRef } = useParams()\n   const { data: authConfig, error: authConfigError, isError } = useAuthConfigQuery({ projectRef })\n-  const { mutate: updateAuthConfig, isLoading: isUpdatingConfig } = useAuthConfigUpdateMutation()\n+  const { mutate: updateAuthConfig, isPending: isUpdatingConfig } = useAuthConfigUpdateMutation()\n \n   const [enableSmtp, setEnableSmtp] = useState(false)\n   const [hidden, setHidden] = useState(true)\ndiff --git a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAuth0Dialog.tsx b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAuth0Dialog.tsx\nindex 69010641e6d99..9f3bf9f61c0ee 100644\n--- a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAuth0Dialog.tsx\n+++ b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAuth0Dialog.tsx\n@@ -50,7 +50,7 @@ export const CreateAuth0IntegrationDialog = ({\n   const isCreating = true\n \n   const { ref: projectRef } = useParams()\n-  const { mutate: createAuthIntegration, isLoading } = useCreateThirdPartyAuthIntegrationMutation({\n+  const { mutate: createAuthIntegration, isPending } = useCreateThirdPartyAuthIntegrationMutation({\n     onSuccess: () => {\n       toast.success(`Successfully created a new Auth0 Auth integration.`)\n       onClose()\n@@ -169,10 +169,10 @@ export const CreateAuth0IntegrationDialog = ({\n             </div>\n           )}\n \n-          <Button disabled={isLoading} type=\"default\" onClick={() => onClose()}>\n+          <Button disabled={isPending} type=\"default\" onClick={() => onClose()}>\n             Cancel\n           </Button>\n-          <Button form={FORM_ID} htmlType=\"submit\" disabled={isLoading} loading={isLoading}>\n+          <Button form={FORM_ID} htmlType=\"submit\" disabled={isPending} loading={isPending}>\n             {isCreating ? 'Create connection' : 'Update connection'}\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAwsCognitoAuthDialog.tsx b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAwsCognitoAuthDialog.tsx\nindex c27876c626179..bf209bf461a64 100644\n--- a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAwsCognitoAuthDialog.tsx\n+++ b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateAwsCognitoAuthDialog.tsx\n@@ -53,7 +53,7 @@ export const CreateAwsCognitoAuthIntegrationDialog = ({\n   const isCreating = true\n \n   const { ref: projectRef } = useParams()\n-  const { mutate: createAuthIntegration, isLoading } = useCreateThirdPartyAuthIntegrationMutation({\n+  const { mutate: createAuthIntegration, isPending } = useCreateThirdPartyAuthIntegrationMutation({\n     onSuccess: () => {\n       toast.success(`Successfully created a new Amazon Cognito Auth integration.`)\n       onClose()\n@@ -179,10 +179,10 @@ export const CreateAwsCognitoAuthIntegrationDialog = ({\n             </div>\n           )}\n \n-          <Button disabled={isLoading} type=\"default\" onClick={() => onClose()}>\n+          <Button disabled={isPending} type=\"default\" onClick={() => onClose()}>\n             Cancel\n           </Button>\n-          <Button form={FORM_ID} htmlType=\"submit\" disabled={isLoading} loading={isLoading}>\n+          <Button form={FORM_ID} htmlType=\"submit\" disabled={isPending} loading={isPending}>\n             {isCreating ? 'Create connection' : 'Update connection'}\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateClerkAuthDialog.tsx b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateClerkAuthDialog.tsx\nindex 50b78761d0ddd..76639f6d3bcb7 100644\n--- a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateClerkAuthDialog.tsx\n+++ b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateClerkAuthDialog.tsx\n@@ -1,11 +1,11 @@\n import { zodResolver } from '@hookform/resolvers/zod'\n-import { Trash } from 'lucide-react'\n import { useEffect } from 'react'\n import { SubmitHandler, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import * as z from 'zod'\n \n import { useParams } from 'common'\n+import { InlineLink } from 'components/ui/InlineLink'\n import { useCreateThirdPartyAuthIntegrationMutation } from 'data/third-party-auth/integration-create-mutation'\n import {\n   Button,\n@@ -22,7 +22,6 @@ import {\n   Separator,\n } from 'ui'\n import { FormItemLayout } from 'ui-patterns/form/FormItemLayout/FormItemLayout'\n-import { InlineLink } from 'components/ui/InlineLink'\n \n interface CreateClerkAuthIntegrationProps {\n   visible: boolean\n@@ -60,7 +59,7 @@ export const CreateClerkAuthIntegrationDialog = ({\n   onDelete,\n }: CreateClerkAuthIntegrationProps) => {\n   const { ref: projectRef } = useParams()\n-  const { mutate: createAuthIntegration, isLoading } = useCreateThirdPartyAuthIntegrationMutation({\n+  const { mutate: createAuthIntegration, isPending } = useCreateThirdPartyAuthIntegrationMutation({\n     onSuccess: () => {\n       toast.success(`Successfully created a new Clerk integration.`)\n       onClose()\n@@ -138,10 +137,10 @@ export const CreateClerkAuthIntegrationDialog = ({\n           </Form_Shadcn_>\n         </DialogSection>\n         <DialogFooter>\n-          <Button disabled={isLoading} type=\"default\" onClick={() => onClose()}>\n+          <Button disabled={isPending} type=\"default\" onClick={() => onClose()}>\n             Cancel\n           </Button>\n-          <Button form={FORM_ID} htmlType=\"submit\" disabled={isLoading} loading={isLoading}>\n+          <Button form={FORM_ID} htmlType=\"submit\" disabled={isPending} loading={isPending}>\n             Create connection\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateFirebaseAuthDialog.tsx b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateFirebaseAuthDialog.tsx\nindex 4c49a1fefc1c2..9c13f8e70ad1d 100644\n--- a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateFirebaseAuthDialog.tsx\n+++ b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateFirebaseAuthDialog.tsx\n@@ -50,7 +50,7 @@ export const CreateFirebaseAuthIntegrationDialog = ({\n   const isCreating = true\n \n   const { ref: projectRef } = useParams()\n-  const { mutate: createAuthIntegration, isLoading } = useCreateThirdPartyAuthIntegrationMutation({\n+  const { mutate: createAuthIntegration, isPending } = useCreateThirdPartyAuthIntegrationMutation({\n     onSuccess: () => {\n       toast.success(`Successfully created a new Firebase Auth integration.`)\n       onClose()\n@@ -151,10 +151,10 @@ export const CreateFirebaseAuthIntegrationDialog = ({\n             </div>\n           )}\n \n-          <Button disabled={isLoading} type=\"default\" onClick={() => onClose()}>\n+          <Button disabled={isPending} type=\"default\" onClick={() => onClose()}>\n             Cancel\n           </Button>\n-          <Button form={FORM_ID} htmlType=\"submit\" disabled={isLoading} loading={isLoading}>\n+          <Button form={FORM_ID} htmlType=\"submit\" disabled={isPending} loading={isPending}>\n             {isCreating ? 'Create connection' : 'Update connection'}\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateWorkOSDialog.tsx b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateWorkOSDialog.tsx\nindex 9a2ee0d3efa59..2edd17287800b 100644\n--- a/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateWorkOSDialog.tsx\n+++ b/apps/studio/components/interfaces/Auth/ThirdPartyAuthForm/CreateWorkOSDialog.tsx\n@@ -56,7 +56,7 @@ export const CreateWorkOSIntegrationDialog = ({\n   const isCreating = true\n \n   const { ref: projectRef } = useParams()\n-  const { mutate: createAuthIntegration, isLoading } = useCreateThirdPartyAuthIntegrationMutation({\n+  const { mutate: createAuthIntegration, isPending } = useCreateThirdPartyAuthIntegrationMutation({\n     onSuccess: () => {\n       toast.success(`Successfully created a new WorkOS integration.`)\n       onClose()\n@@ -160,10 +160,10 @@ export const CreateWorkOSIntegrationDialog = ({\n             </div>\n           )}\n \n-          <Button disabled={isLoading} type=\"default\" onClick={() => onClose()}>\n+          <Button disabled={isPending} type=\"default\" onClick={() => onClose()}>\n             Cancel\n           </Button>\n-          <Button form={FORM_ID} htmlType=\"submit\" disabled={isLoading} loading={isLoading}>\n+          <Button form={FORM_ID} htmlType=\"submit\" disabled={isPending} loading={isPending}>\n             {isCreating ? 'Create connection' : 'Update connection'}\n           </Button>\n         </DialogFooter>\ndiff --git a/apps/studio/components/interfaces/Auth/Users/BanUserModal.tsx b/apps/studio/components/interfaces/Auth/Users/BanUserModal.tsx\nindex 7543072de08ac..97d7cb372d6a2 100644\n--- a/apps/studio/components/interfaces/Auth/Users/BanUserModal.tsx\n+++ b/apps/studio/components/interfaces/Auth/Users/BanUserModal.tsx\n@@ -33,7 +33,7 @@ interface BanUserModalProps {\n export const BanUserModal = ({ visible, user, onClose }: BanUserModalProps) => {\n   const { ref: projectRef } = useParams()\n \n-  const { mutate: updateUser, isLoading: isBanningUser } = useUserUpdateMutation({\n+  const { mutate: updateUser, isPending: isBanningUser } = useUserUpdateMutation({\n     onSuccess: (_, vars) => {\n       const bannedUntil = dayjs()\n         .add(Number(vars.banDuration), 'hours')\ndiff --git a/apps/studio/components/interfaces/Auth/Users/CreateUserModal.tsx b/apps/studio/components/interfaces/Auth/Users/CreateUserModal.tsx\nindex 16ab8f410ffa6..9b905af61f6dd 100644\n--- a/apps/studio/components/interfaces/Auth/Users/CreateUserModal.tsx\n+++ b/apps/studio/components/interfaces/Auth/Users/CreateUserModal.tsx\n@@ -43,7 +43,7 @@ const CreateUserModal = ({ visible, setVisible }: CreateUserModalProps) => {\n     'create_user'\n   )\n \n-  const { mutate: createUser, isLoading: isCreatingUser } = useUserCreateMutation({\n+  const { mutate: createUser, isPending: isCreatingUser } = useUserCreateMutation({\n     onSuccess(res) {\n       toast.success(`Successfully created user: ${res.email}`)\n       form.reset({ email: '', password: '', autoConfirmUser: true })\ndiff --git a/apps/studio/components/interfaces/Auth/Users/DeleteUserModal.tsx b/apps/studio/components/interfaces/Auth/Users/DeleteUserModal.tsx\nindex 8c59665887861..c68031a943a77 100644\n--- a/apps/studio/components/interfaces/Auth/Users/DeleteUserModal.tsx\n+++ b/apps/studio/components/interfaces/Auth/Users/DeleteUserModal.tsx\n@@ -20,7 +20,7 @@ export const DeleteUserModal = ({\n }: DeleteUserModalProps) => {\n   const { ref: projectRef } = useParams()\n \n-  const { mutate: deleteUser, isLoading: isDeleting } = useUserDeleteMutation({\n+  const { mutate: deleteUser, isPending: isDeleting } = useUserDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully deleted ${selectedUser?.email}`)\n       onDeleteSuccess?.()\ndiff --git a/apps/studio/components/interfaces/Auth/Users/InviteUserModal.tsx b/apps/studio/components/interfaces/Auth/Users/InviteUserModal.tsx\nindex 0fca24fe1d679..6edd5664f0c0c 100644\n--- a/apps/studio/components/interfaces/Auth/Users/InviteUserModal.tsx\n+++ b/apps/studio/components/interfaces/Auth/Users/InviteUserModal.tsx\n@@ -16,7 +16,7 @@ const InviteUserModal = ({ visible, setVisible }: InviteUserModalProps) => {\n   const { ref: projectRef } = useParams()\n \n   const handleToggle = () => setVisible(!visible)\n-  const { mutate: inviteUser, isLoading: isInviting } = useUserInviteMutation({\n+  const { mutate: inviteUser, isPending: isInviting } = useUserInviteMutation({\n     onSuccess: (_, variables) => {\n       toast.success(`Sent invite email to ${variables.email}`)\n       setVisible(false)\ndiff --git a/apps/studio/components/interfaces/Auth/Users/UserOverview.tsx b/apps/studio/components/interfaces/Auth/Users/UserOverview.tsx\nindex 516e60b211136..9eb3c0608e2c4 100644\n--- a/apps/studio/components/interfaces/Auth/Users/UserOverview.tsx\n+++ b/apps/studio/components/interfaces/Auth/Users/UserOverview.tsx\n@@ -99,7 +99,7 @@ export const UserOverview = ({ user, onDeleteSuccess }: UserOverviewProps) => {\n   const seconds = Math.floor(mailerOtpExpiry % 60)\n   const formattedExpiry = `${mailerOtpExpiry > 60 ? `${minutes} minute${minutes > 1 ? 's' : ''} ${seconds > 0 ? 'and' : ''} ` : ''}${seconds > 0 ? `${seconds} second${seconds > 1 ? 's' : ''}` : ''}`\n \n-  const { mutate: resetPassword, isLoading: isResettingPassword } = useUserResetPasswordMutation({\n+  const { mutate: resetPassword, isPending: isResettingPassword } = useUserResetPasswordMutation({\n     onSuccess: (_, vars) => {\n       setSuccessAction('send_recovery')\n       toast.success(`Sent password recovery to ${vars.user.email}`)\n@@ -108,7 +108,7 @@ export const UserOverview = ({ user, onDeleteSuccess }: UserOverviewProps) => {\n       toast.error(`Failed to send password recovery: ${err.message}`)\n     },\n   })\n-  const { mutate: sendMagicLink, isLoading: isSendingMagicLink } = useUserSendMagicLinkMutation({\n+  const { mutate: sendMagicLink, isPending: isSendingMagicLink } = useUserSendMagicLinkMutation({\n     onSuccess: (_, vars) => {\n       setSuccessAction('send_magic_link')\n       toast.success(\n@@ -125,7 +125,7 @@ export const UserOverview = ({ user, onDeleteSuccess }: UserOverviewProps) => {\n       )\n     },\n   })\n-  const { mutate: sendOTP, isLoading: isSendingOTP } = useUserSendOTPMutation({\n+  const { mutate: sendOTP, isPending: isSendingOTP } = useUserSendOTPMutation({\n     onSuccess: (_, vars) => {\n       setSuccessAction('send_otp')\n       toast.success(`Sent OTP to ${vars.user.phone}`)\n@@ -140,7 +140,7 @@ export const UserOverview = ({ user, onDeleteSuccess }: UserOverviewProps) => {\n       setIsDeleteFactorsModalOpen(false)\n     },\n   })\n-  const { mutate: updateUser, isLoading: isUpdatingUser } = useUserUpdateMutation({\n+  const { mutate: updateUser, isPending: isUpdatingUser } = useUserUpdateMutation({\n     onSuccess: () => {\n       toast.success('Successfully unbanned user')\n       setIsUnbanModalOpen(false)\ndiff --git a/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/ChangePaymentMethodModal.tsx b/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/ChangePaymentMethodModal.tsx\nindex 2157dc2189ed0..cb6503be21581 100644\n--- a/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/ChangePaymentMethodModal.tsx\n+++ b/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/ChangePaymentMethodModal.tsx\n@@ -15,7 +15,7 @@ const ChangePaymentMethodModal = ({\n   onClose,\n }: ChangePaymentMethodModalProps) => {\n   const { slug } = useParams()\n-  const { mutate: markAsDefault, isLoading: isUpdating } =\n+  const { mutate: markAsDefault, isPending: isUpdating } =\n     useOrganizationPaymentMethodMarkAsDefaultMutation({\n       onSuccess: () => {\n         toast.success(\ndiff --git a/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/DeletePaymentMethodModal.tsx b/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/DeletePaymentMethodModal.tsx\nindex e05ff07ce4b14..a4c077dde4547 100644\n--- a/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/DeletePaymentMethodModal.tsx\n+++ b/apps/studio/components/interfaces/Billing/Payment/PaymentMethods/DeletePaymentMethodModal.tsx\n@@ -17,7 +17,7 @@ const DeletePaymentMethodModal = ({\n }: DeletePaymentMethodModalProps) => {\n   const { slug } = useParams()\n \n-  const { mutate: deletePayment, isLoading: isDeleting } =\n+  const { mutate: deletePayment, isPending: isDeleting } =\n     useOrganizationPaymentMethodDeleteMutation({\n       onSuccess: () => {\n         toast.success(\ndiff --git a/apps/studio/components/interfaces/BranchManagement/CreateBranchModal.tsx b/apps/studio/components/interfaces/BranchManagement/CreateBranchModal.tsx\nindex 6488c82b3bc06..18374b7484376 100644\n--- a/apps/studio/components/interfaces/BranchManagement/CreateBranchModal.tsx\n+++ b/apps/studio/components/interfaces/BranchManagement/CreateBranchModal.tsx\n@@ -177,12 +177,12 @@ export const CreateBranchModal = () => {\n \n   const { mutate: sendEvent } = useSendEventMutation()\n \n-  const { mutateAsync: checkGithubBranchValidity, isLoading: isCheckingGHBranchValidity } =\n+  const { mutateAsync: checkGithubBranchValidity, isPending: isCheckingGHBranchValidity } =\n     useCheckGithubBranchValidity({\n       onError: () => {},\n     })\n \n-  const { mutate: createBranch, isLoading: isCreatingBranch } = useBranchCreateMutation({\n+  const { mutate: createBranch, isPending: isCreatingBranch } = useBranchCreateMutation({\n     onSuccess: async (data) => {\n       toast.success(`Successfully created preview branch \"${data.name}\"`)\n       if (projectRef) {\ndiff --git a/apps/studio/components/interfaces/BranchManagement/EditBranchModal.tsx b/apps/studio/components/interfaces/BranchManagement/EditBranchModal.tsx\nindex 0f2439e5238c9..8ccee1d723942 100644\n--- a/apps/studio/components/interfaces/BranchManagement/EditBranchModal.tsx\n+++ b/apps/studio/components/interfaces/BranchManagement/EditBranchModal.tsx\n@@ -69,12 +69,12 @@ export const EditBranchModal = ({ branch, visible, onClose }: EditBranchModalPro\n   })\n \n   const { data: branches } = useBranchesQuery({ projectRef })\n-  const { mutateAsync: checkGithubBranchValidity, isLoading: isChecking } =\n+  const { mutateAsync: checkGithubBranchValidity, isPending: isChecking } =\n     useCheckGithubBranchValidity({\n       onError: () => {},\n     })\n \n-  const { mutate: updateBranch, isLoading: isUpdating } = useBranchUpdateMutation({\n+  const { mutate: updateBranch, isPending: isUpdating } = useBranchUpdateMutation({\n     onSuccess: (data) => {\n       toast.success(`Successfully updated branch \"${data.name}\"`)\n       onClose()\ndiff --git a/apps/studio/components/interfaces/BranchManagement/Overview.tsx b/apps/studio/components/interfaces/BranchManagement/Overview.tsx\nindex 4f9f6f047b976..64ef6818baefa 100644\n--- a/apps/studio/components/interfaces/BranchManagement/Overview.tsx\n+++ b/apps/studio/components/interfaces/BranchManagement/Overview.tsx\n@@ -190,14 +190,14 @@ const PreviewBranchActions = ({\n   ] = useState(false)\n   const [showEditBranchModal, setShowEditBranchModal] = useState(false)\n \n-  const { mutate: resetBranch, isLoading: isResetting } = useBranchResetMutation({\n+  const { mutate: resetBranch, isPending: isResetting } = useBranchResetMutation({\n     onSuccess() {\n       toast.success('Success! Please allow a few seconds for the branch to reset.')\n       setShowConfirmResetModal(false)\n     },\n   })\n \n-  const { mutate: updateBranch, isLoading: isUpdatingBranch } = useBranchUpdateMutation({\n+  const { mutate: updateBranch, isPending: isUpdatingBranch } = useBranchUpdateMutation({\n     onSuccess() {\n       toast.success('Successfully updated branch')\n       setShowBranchModeSwitch(false)\ndiff --git a/apps/studio/components/interfaces/BranchManagement/ReviewRow.tsx b/apps/studio/components/interfaces/BranchManagement/ReviewRow.tsx\nindex 4e932850701cb..5dc02d0e0cf3d 100644\n--- a/apps/studio/components/interfaces/BranchManagement/ReviewRow.tsx\n+++ b/apps/studio/components/interfaces/BranchManagement/ReviewRow.tsx\n@@ -24,7 +24,7 @@ export const ReviewRow = ({ branch }: ReviewRowProps) => {\n   const queryClient = useQueryClient()\n   const { project_ref: branchRef, parent_project_ref: projectRef } = branch\n \n-  const { mutate: updateBranch, isLoading: isUpdating } = useBranchUpdateMutation({\n+  const { mutate: updateBranch, isPending: isUpdating } = useBranchUpdateMutation({\n     onSuccess: () => {\n       toast.success('Branch marked as not ready for review')\n       queryClient.invalidateQueries({\ndiff --git a/apps/studio/components/interfaces/Database/Backups/BackupItem.tsx b/apps/studio/components/interfaces/Database/Backups/BackupItem.tsx\nindex f298ebd914285..d0682d6e1246d 100644\n--- a/apps/studio/components/interfaces/Database/Backups/BackupItem.tsx\n+++ b/apps/studio/components/interfaces/Database/Backups/BackupItem.tsx\n@@ -25,7 +25,7 @@ export const BackupItem = ({ index, isHealthy, backup, onSelectBackup }: BackupI\n     'queue_job.restore.prepare'\n   )\n \n-  const { mutate: downloadBackup, isLoading: isDownloading } = useBackupDownloadMutation({\n+  const { mutate: downloadBackup, isPending: isDownloading } = useBackupDownloadMutation({\n     onSuccess: (res) => {\n       const { fileUrl } = res\n \ndiff --git a/apps/studio/components/interfaces/Database/Backups/BackupsList.tsx b/apps/studio/components/interfaces/Database/Backups/BackupsList.tsx\nindex e913babcfe024..74a2104765928 100644\n--- a/apps/studio/components/interfaces/Database/Backups/BackupsList.tsx\n+++ b/apps/studio/components/interfaces/Database/Backups/BackupsList.tsx\n@@ -29,7 +29,7 @@ export const BackupsList = () => {\n   const { data: backups } = useBackupsQuery({ projectRef })\n   const {\n     mutate: restoreFromBackup,\n-    isLoading: isRestoring,\n+    isPending: isRestoring,\n     isSuccess: isSuccessBackup,\n   } = useBackupRestoreMutation({\n     onSuccess: () => {\ndiff --git a/apps/studio/components/interfaces/Database/Backups/PITR/PITRSelection.tsx b/apps/studio/components/interfaces/Database/Backups/PITR/PITRSelection.tsx\nindex 786cda8b37195..ab8638b2ad067 100644\n--- a/apps/studio/components/interfaces/Database/Backups/PITR/PITRSelection.tsx\n+++ b/apps/studio/components/interfaces/Database/Backups/PITR/PITRSelection.tsx\n@@ -45,7 +45,7 @@ export const PITRSelection = () => {\n \n   const {\n     mutate: restoreFromPitr,\n-    isLoading: isRestoring,\n+    isPending: isRestoring,\n     isSuccess: isSuccessPITR,\n   } = usePitrRestoreMutation({\n     onSuccess: (_, variables) => {\ndiff --git a/apps/studio/components/interfaces/Database/Backups/RestoreToNewProject/CreateNewProjectDialog.tsx b/apps/studio/components/interfaces/Database/Backups/RestoreToNewProject/CreateNewProjectDialog.tsx\nindex 504787eb6c8a3..e62e335673a8f 100644\n--- a/apps/studio/components/interfaces/Database/Backups/RestoreToNewProject/CreateNewProjectDialog.tsx\n+++ b/apps/studio/components/interfaces/Database/Backups/RestoreToNewProject/CreateNewProjectDialog.tsx\n@@ -74,7 +74,7 @@ export const CreateNewProjectDialog = ({\n   )\n   const hasPITREnabled = cloneBackups?.pitr_enabled\n \n-  const { mutate: triggerClone, isLoading: cloneMutationLoading } = useProjectCloneMutation({\n+  const { mutate: triggerClone, isPending: cloneMutationLoading } = useProjectCloneMutation({\n     onError: (error) => {\n       toast.error(`Failed to restore to new project: ${error.message}`)\n     },\ndiff --git a/apps/studio/components/interfaces/Database/ETL/DestinationPanel/DestinationPanel.tsx b/apps/studio/components/interfaces/Database/ETL/DestinationPanel/DestinationPanel.tsx\nindex bfc4f9cd6f1fd..7ac88336bc7f5 100644\n--- a/apps/studio/components/interfaces/Database/ETL/DestinationPanel/DestinationPanel.tsx\n+++ b/apps/studio/components/interfaces/Database/ETL/DestinationPanel/DestinationPanel.tsx\n@@ -93,23 +93,23 @@ export const DestinationPanel = ({\n   )\n   const [isFormInteracting, setIsFormInteracting] = useState(false)\n \n-  const { mutateAsync: createDestinationPipeline, isLoading: creatingDestinationPipeline } =\n+  const { mutateAsync: createDestinationPipeline, isPending: creatingDestinationPipeline } =\n     useCreateDestinationPipelineMutation({\n       onSuccess: () => form.reset(defaultValues),\n     })\n \n-  const { mutateAsync: updateDestinationPipeline, isLoading: updatingDestinationPipeline } =\n+  const { mutateAsync: updateDestinationPipeline, isPending: updatingDestinationPipeline } =\n     useUpdateDestinationPipelineMutation({\n       onSuccess: () => form.reset(defaultValues),\n     })\n \n-  const { mutateAsync: startPipeline, isLoading: startingPipeline } = useStartPipelineMutation()\n+  const { mutateAsync: startPipeline, isPending: startingPipeline } = useStartPipelineMutation()\n \n-  const { mutateAsync: createS3AccessKey, isLoading: isCreatingS3AccessKey } =\n+  const { mutateAsync: createS3AccessKey, isPending: isCreatingS3AccessKey } =\n     useS3AccessKeyCreateMutation()\n \n-  const { mutateAsync: createNamespace, isLoading: isCreatingNamespace } =\n-    useIcebergNamespaceCreateMutation({ projectRef })\n+  const { mutateAsync: createNamespace, isPending: isCreatingNamespace } =\n+    useIcebergNamespaceCreateMutation()\n \n   const {\n     data: publications = [],\ndiff --git a/apps/studio/components/interfaces/Database/ETL/EnableReplicationModal.tsx b/apps/studio/components/interfaces/Database/ETL/EnableReplicationModal.tsx\nindex b16a92f9bcf8a..40bc4d4764c54 100644\n--- a/apps/studio/components/interfaces/Database/ETL/EnableReplicationModal.tsx\n+++ b/apps/studio/components/interfaces/Database/ETL/EnableReplicationModal.tsx\n@@ -20,7 +20,7 @@ export const EnableReplicationModal = () => {\n   const { ref: projectRef } = useParams()\n   const [open, setOpen] = useState(false)\n \n-  const { mutate: createTenantSource, isLoading: creatingTenantSource } =\n+  const { mutate: createTenantSource, isPending: creatingTenantSource } =\n     useCreateTenantSourceMutation({\n       onSuccess: () => {\n         toast.success('ETL replication has been successfully enabled!')\ndiff --git a/apps/studio/components/interfaces/Database/ETL/NewPublicationPanel.tsx b/apps/studio/components/interfaces/Database/ETL/NewPublicationPanel.tsx\nindex 5bac190cfbce9..9227a39bfd41c 100644\n--- a/apps/studio/components/interfaces/Database/ETL/NewPublicationPanel.tsx\n+++ b/apps/studio/components/interfaces/Database/ETL/NewPublicationPanel.tsx\n@@ -34,7 +34,7 @@ interface NewPublicationPanelProps {\n \n export const NewPublicationPanel = ({ visible, sourceId, onClose }: NewPublicationPanelProps) => {\n   const { ref: projectRef } = useParams()\n-  const { mutateAsync: createPublication, isLoading: creatingPublication } =\n+  const { mutateAsync: createPublication, isPending: creatingPublication } =\n     useCreatePublicationMutation()\n   const { data: tables } = useReplicationTablesQuery({\n     projectRef,\ndiff --git a/apps/studio/components/interfaces/Database/ETL/ReplicationPipelineStatus/ReplicationPipelineStatus.tsx b/apps/studio/components/interfaces/Database/ETL/ReplicationPipelineStatus/ReplicationPipelineStatus.tsx\nindex e6eb18fbf740e..51e34cc0e707d 100644\n--- a/apps/studio/components/interfaces/Database/ETL/ReplicationPipelineStatus/ReplicationPipelineStatus.tsx\n+++ b/apps/studio/components/interfaces/Database/ETL/ReplicationPipelineStatus/ReplicationPipelineStatus.tsx\n@@ -103,8 +103,8 @@ export const ReplicationPipelineStatus = () => {\n   })\n   const hasUpdate = Boolean(versionData?.new_version)\n \n-  const { mutateAsync: startPipeline, isLoading: isStartingPipeline } = useStartPipelineMutation()\n-  const { mutateAsync: stopPipeline, isLoading: isStoppingPipeline } = useStopPipelineMutation()\n+  const { mutateAsync: startPipeline, isPending: isStartingPipeline } = useStartPipelineMutation()\n+  const { mutateAsync: stopPipeline, isPending: isStoppingPipeline } = useStopPipelineMutation()\n \n   const destinationName = pipeline?.destination_name\n   const statusName = getStatusName(pipelineStatusData?.status)\ndiff --git a/apps/studio/components/interfaces/Database/ETL/RetryOptionsDropdown.tsx b/apps/studio/components/interfaces/Database/ETL/RetryOptionsDropdown.tsx\nindex 16f331f8a95a6..862511fdfa679 100644\n--- a/apps/studio/components/interfaces/Database/ETL/RetryOptionsDropdown.tsx\n+++ b/apps/studio/components/interfaces/Database/ETL/RetryOptionsDropdown.tsx\n@@ -37,7 +37,7 @@ export const RetryOptionsDropdown = ({ tableId, tableName }: RetryOptionsDropdow\n   const { ref: projectRef, pipelineId: _pipelineId } = useParams()\n   const [isOpen, setIsOpen] = useState(false)\n \n-  const { mutate: rollbackTable, isLoading: isRollingBack } = useRollbackTableMutation({\n+  const { mutate: rollbackTable, isPending: isRollingBack } = useRollbackTableMutation({\n     onSuccess: (_, vars) => {\n       const { projectRef, pipelineId } = vars\n       toast.success(`Table \"${tableName}\" rolled back successfully and pipeline is being restarted`)\n@@ -50,7 +50,7 @@ export const RetryOptionsDropdown = ({ tableId, tableName }: RetryOptionsDropdow\n       )\n     },\n   })\n-  const { mutate: startPipeline, isLoading: isRestartingPipeline } = useStartPipelineMutation({\n+  const { mutate: startPipeline, isPending: isRestartingPipeline } = useStartPipelineMutation({\n     onSuccess: () => {\n       toast.success('Pipeline restarted successfully')\n       setIsOpen(false)\ndiff --git a/apps/studio/components/interfaces/Database/EnumeratedTypes/CreateEnumeratedTypeSidePanel.tsx b/apps/studio/components/interfaces/Database/EnumeratedTypes/CreateEnumeratedTypeSidePanel.tsx\nindex 0e7ef55f10718..b830d3caea546 100644\n--- a/apps/studio/components/interfaces/Database/EnumeratedTypes/CreateEnumeratedTypeSidePanel.tsx\n+++ b/apps/studio/components/interfaces/Database/EnumeratedTypes/CreateEnumeratedTypeSidePanel.tsx\n@@ -42,7 +42,7 @@ const CreateEnumeratedTypeSidePanel = ({\n   const initialValues = { name: '', description: '', values: [{ value: '' }] }\n   const submitRef = useRef<HTMLButtonElement>(null)\n   const { data: project } = useSelectedProjectQuery()\n-  const { mutate: createEnumeratedType, isLoading: isCreating } = useEnumeratedTypeCreateMutation({\n+  const { mutate: createEnumeratedType, isPending: isCreating } = useEnumeratedTypeCreateMutation({\n     onSuccess: (res, vars) => {\n       toast.success(`Successfully created type \"${vars.name}\"`)\n       closePanel()\ndiff --git a/apps/studio/components/interfaces/Database/EnumeratedTypes/DeleteEnumeratedTypeModal.tsx b/apps/studio/components/interfaces/Database/EnumeratedTypes/DeleteEnumeratedTypeModal.tsx\nindex 362a2a0314ef9..37e3b1ab71de0 100644\n--- a/apps/studio/components/interfaces/Database/EnumeratedTypes/DeleteEnumeratedTypeModal.tsx\n+++ b/apps/studio/components/interfaces/Database/EnumeratedTypes/DeleteEnumeratedTypeModal.tsx\n@@ -18,7 +18,7 @@ const DeleteEnumeratedTypeModal = ({\n   onDelete,\n }: DeleteEnumeratedTypeModalProps) => {\n   const { data: project } = useSelectedProjectQuery()\n-  const { mutate: deleteEnumeratedType, isLoading: isDeleting } = useEnumeratedTypeDeleteMutation({\n+  const { mutate: deleteEnumeratedType, isPending: isDeleting } = useEnumeratedTypeDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully deleted \"${selectedEnumeratedType.name}\"`)\n       onClose()\ndiff --git a/apps/studio/components/interfaces/Database/EnumeratedTypes/EditEnumeratedTypeSidePanel.tsx b/apps/studio/components/interfaces/Database/EnumeratedTypes/EditEnumeratedTypeSidePanel.tsx\nindex 8beba161e564e..d307fbfcb2f6f 100644\n--- a/apps/studio/components/interfaces/Database/EnumeratedTypes/EditEnumeratedTypeSidePanel.tsx\n+++ b/apps/studio/components/interfaces/Database/EnumeratedTypes/EditEnumeratedTypeSidePanel.tsx\n@@ -41,7 +41,7 @@ const EditEnumeratedTypeSidePanel = ({\n }: EditEnumeratedTypeSidePanelProps) => {\n   const submitRef = useRef<HTMLButtonElement>(null)\n   const { data: project } = useSelectedProjectQuery()\n-  const { mutate: updateEnumeratedType, isLoading: isCreating } = useEnumeratedTypeUpdateMutation({\n+  const { mutate: updateEnumeratedType, isPending: isCreating } = useEnumeratedTypeUpdateMutation({\n     onSuccess: (_, vars) => {\n       toast.success(`Successfully updated type \"${vars.name.updated}\"`)\n       onClose()\ndiff --git a/apps/studio/components/interfaces/Database/Extensions/EnableExtensionModal.tsx b/apps/studio/components/interfaces/Database/Extensions/EnableExtensionModal.tsx\nindex c6b58a9307a19..2298b219e8505 100644\n--- a/apps/studio/components/interfaces/Database/Extensions/EnableExtensionModal.tsx\n+++ b/apps/studio/components/interfaces/Database/Extensions/EnableExtensionModal.tsx\n@@ -46,7 +46,7 @@ const EnableExtensionModal = ({ visible, extension, onCancel }: EnableExtensionM\n     { enabled: visible }\n   )\n   const { data: protectedSchemas } = useProtectedSchemas({ excludeSchemas: ['extensions'] })\n-  const { mutate: enableExtension, isLoading: isEnabling } = useDatabaseExtensionEnableMutation({\n+  const { mutate: enableExtension, isPending: isEnabling } = useDatabaseExtensionEnableMutation({\n     onSuccess: () => {\n       toast.success(`Extension \"${extension.name}\" is now enabled`)\n       onCancel()\ndiff --git a/apps/studio/components/interfaces/Database/Extensions/ExtensionRow.tsx b/apps/studio/components/interfaces/Database/Extensions/ExtensionRow.tsx\nindex d418a6ce95cf3..a5c8b1bbb8557 100644\n--- a/apps/studio/components/interfaces/Database/Extensions/ExtensionRow.tsx\n+++ b/apps/studio/components/interfaces/Database/Extensions/ExtensionRow.tsx\n@@ -41,7 +41,7 @@ export const ExtensionRow = ({ extension }: ExtensionRowProps) => {\n     ? `${DOCS_URL}${extensionMeta?.link}`\n     : extensionMeta?.link ?? undefined\n \n-  const { mutate: disableExtension, isLoading: isDisabling } = useDatabaseExtensionDisableMutation({\n+  const { mutate: disableExtension, isPending: isDisabling } = useDatabaseExtensionDisableMutation({\n     onSuccess: () => {\n       toast.success(`${extension.name} is off.`)\n       setIsDisableModalOpen(false)\ndiff --git a/apps/studio/components/interfaces/Database/Functions/CreateFunction/index.tsx b/apps/studio/components/interfaces/Database/Functions/CreateFunction/index.tsx\nindex 94b78e8a2bbde..88efee47e75eb 100644\n--- a/apps/studio/components/interfaces/Database/Functions/CreateFunction/index.tsx\n+++ b/apps/studio/components/interfaces/Database/Functions/CreateFunction/index.tsx\n@@ -92,9 +92,9 @@ export const CreateFunction = ({\n     onClose,\n   })\n \n-  const { mutate: createDatabaseFunction, isLoading: isCreating } =\n+  const { mutate: createDatabaseFunction, isPending: isCreating } =\n     useDatabaseFunctionCreateMutation()\n-  const { mutate: updateDatabaseFunction, isLoading: isUpdating } =\n+  const { mutate: updateDatabaseFunction, isPending: isUpdating } =\n     useDatabaseFunctionUpdateMutation()\n \n   const onSubmit: SubmitHandler<z.infer<typeof FormSchema>> = async (data) => {\ndiff --git a/apps/studio/components/interfaces/Database/Functions/FunctionsList/FunctionsList.tsx b/apps/studio/components/interfaces/Database/Functions/FunctionsList/FunctionsList.tsx\nindex 30b5aef655ea1..f63d1428eed09 100644\n--- a/apps/studio/components/interfaces/Database/Functions/FunctionsList/FunctionsList.tsx\n+++ b/apps/studio/components/interfaces/Database/Functions/FunctionsList/FunctionsList.tsx\n@@ -6,19 +6,24 @@ import { useRef } from 'react'\n import { toast } from 'sonner'\n \n import { useParams } from 'common'\n+import {\n+  ReportsSelectFilter,\n+  selectFilterSchema,\n+} from 'components/interfaces/Reports/v2/ReportsSelectFilter'\n+import { SIDEBAR_KEYS } from 'components/layouts/ProjectLayout/LayoutSidebar/LayoutSidebarProvider'\n import ProductEmptyState from 'components/to-be-cleaned/ProductEmptyState'\n import AlertError from 'components/ui/AlertError'\n import { ButtonTooltip } from 'components/ui/ButtonTooltip'\n import SchemaSelector from 'components/ui/SchemaSelector'\n import { GenericSkeletonLoader } from 'components/ui/ShimmeringLoader'\n-import { SIDEBAR_KEYS } from 'components/layouts/ProjectLayout/LayoutSidebar/LayoutSidebarProvider'\n-import { useDatabaseFunctionsQuery } from 'data/database-functions/database-functions-query'\n import { useDatabaseFunctionDeleteMutation } from 'data/database-functions/database-functions-delete-mutation'\n+import type { DatabaseFunction } from 'data/database-functions/database-functions-query'\n+import { useDatabaseFunctionsQuery } from 'data/database-functions/database-functions-query'\n import { useSchemasQuery } from 'data/database/schemas-query'\n import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n+import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { useQuerySchemaState } from 'hooks/misc/useSchemaQueryState'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n-import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { useIsProtectedSchema } from 'hooks/useProtectedSchemas'\n import { useAiAssistantStateSnapshot } from 'state/ai-assistant-state'\n import { useSidebarManagerSnapshot } from 'state/sidebar-manager-state'\n@@ -32,13 +37,8 @@ import {\n   TableHeader,\n   TableRow,\n } from 'ui'\n-import {\n-  ReportsSelectFilter,\n-  selectFilterSchema,\n-} from 'components/interfaces/Reports/v2/ReportsSelectFilter'\n import { ProtectedSchemaWarning } from '../../ProtectedSchemaWarning'\n import FunctionList from './FunctionList'\n-import type { DatabaseFunction } from 'data/database-functions/database-functions-query'\n \n import { useIsInlineEditorEnabled } from 'components/interfaces/Account/Preferences/InlineEditorSettings'\n import { CreateFunction } from 'components/interfaces/Database/Functions/CreateFunction'\n@@ -203,7 +203,7 @@ const FunctionsList = () => {\n         handleErrorOnDelete(deletingFunctionIdRef, selectedId, `Function not found`),\n     })\n \n-  const { mutate: deleteDatabaseFunction, isLoading: isDeletingFunction } =\n+  const { mutate: deleteDatabaseFunction, isPending: isDeletingFunction } =\n     useDatabaseFunctionDeleteMutation({\n       onSuccess: (_, variables) => {\n         toast.success(`Successfully removed function ${variables.func.name}`)\ndiff --git a/apps/studio/components/interfaces/Database/Hooks/DeleteHookModal.tsx b/apps/studio/components/interfaces/Database/Hooks/DeleteHookModal.tsx\nindex d01331af18e69..c9e8146b382be 100644\n--- a/apps/studio/components/interfaces/Database/Hooks/DeleteHookModal.tsx\n+++ b/apps/studio/components/interfaces/Database/Hooks/DeleteHookModal.tsx\n@@ -21,7 +21,7 @@ const DeleteHookModal = ({\n   const { name, schema } = selectedHook ?? {}\n \n   const { data: project } = useSelectedProjectQuery()\n-  const { mutate: deleteDatabaseTrigger, isLoading: isDeleting } = useDatabaseTriggerDeleteMutation(\n+  const { mutate: deleteDatabaseTrigger, isPending: isDeleting } = useDatabaseTriggerDeleteMutation(\n     {\n       onSuccess: () => {\n         toast.success(`Successfully deleted ${name}`)\ndiff --git a/apps/studio/components/interfaces/Database/Indexes/CreateIndexSidePanel.tsx b/apps/studio/components/interfaces/Database/Indexes/CreateIndexSidePanel.tsx\nindex a76f24f6ae7fb..557f9d92dc5b8 100644\n--- a/apps/studio/components/interfaces/Database/Indexes/CreateIndexSidePanel.tsx\n+++ b/apps/studio/components/interfaces/Database/Indexes/CreateIndexSidePanel.tsx\n@@ -78,7 +78,7 @@ const CreateIndexSidePanel = ({ visible, onClose }: CreateIndexSidePanelProps) =\n     connectionString: project?.connectionString,\n   })\n \n-  const { mutate: createIndex, isLoading: isExecuting } = useDatabaseIndexCreateMutation({\n+  const { mutate: createIndex, isPending: isExecuting } = useDatabaseIndexCreateMutation({\n     onSuccess: () => {\n       onClose()\n       toast.success(`Successfully created index`)\ndiff --git a/apps/studio/components/interfaces/Database/Indexes/Indexes.tsx b/apps/studio/components/interfaces/Database/Indexes/Indexes.tsx\nindex c10c7e8da9131..9adff97567c8b 100644\n--- a/apps/studio/components/interfaces/Database/Indexes/Indexes.tsx\n+++ b/apps/studio/components/interfaces/Database/Indexes/Indexes.tsx\n@@ -18,15 +18,15 @@ import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQuer\n import { useIsProtectedSchema } from 'hooks/useProtectedSchemas'\n import {\n   Button,\n+  Card,\n   Input,\n   SidePanel,\n   Table,\n   TableBody,\n   TableCell,\n   TableHead,\n-  TableRow,\n   TableHeader,\n-  Card,\n+  TableRow,\n } from 'ui'\n import ConfirmationModal from 'ui-patterns/Dialogs/ConfirmationModal'\n import { ProtectedSchemaWarning } from '../ProtectedSchemaWarning'\n@@ -83,7 +83,7 @@ const Indexes = () => {\n     connectionString: project?.connectionString,\n   })\n \n-  const { mutate: deleteIndex, isLoading: isExecuting } = useDatabaseIndexDeleteMutation({\n+  const { mutate: deleteIndex, isPending: isExecuting } = useDatabaseIndexDeleteMutation({\n     onSuccess: async () => {\n       setSelectedIndexNameToDelete(null)\n       toast.success('Successfully deleted index')\ndiff --git a/apps/studio/components/interfaces/Database/Publications/PublicationsTableItem.tsx b/apps/studio/components/interfaces/Database/Publications/PublicationsTableItem.tsx\nindex 62b689f984384..d550f90628b15 100644\n--- a/apps/studio/components/interfaces/Database/Publications/PublicationsTableItem.tsx\n+++ b/apps/studio/components/interfaces/Database/Publications/PublicationsTableItem.tsx\n@@ -33,7 +33,7 @@ export const PublicationsTableItem = ({\n     'publications'\n   )\n \n-  const { mutate: updatePublications, isLoading } = useDatabasePublicationUpdateMutation()\n+  const { mutate: updatePublications, isPending } = useDatabasePublicationUpdateMutation()\n \n   const toggleReplicationForTable = async (\n     table: PostgresTable,\n@@ -94,7 +94,7 @@ export const PublicationsTableItem = ({\n               <TooltipTrigger>\n                 <Switch\n                   size=\"small\"\n-                  disabled={!canUpdatePublications || isLoading || isProtected}\n+                  disabled={!canUpdatePublications || isPending || isProtected}\n                   checked={checked}\n                   onClick={() => toggleReplicationForTable(table, selectedPublication)}\n                 />\ndiff --git a/apps/studio/components/interfaces/Database/Roles/CreateRolePanel.tsx b/apps/studio/components/interfaces/Database/Roles/CreateRolePanel.tsx\nindex 7381c5968cf03..6d070ec4aa823 100644\n--- a/apps/studio/components/interfaces/Database/Roles/CreateRolePanel.tsx\n+++ b/apps/studio/components/interfaces/Database/Roles/CreateRolePanel.tsx\n@@ -53,7 +53,7 @@ export const CreateRolePanel = ({ visible, onClose }: CreateRolePanelProps) => {\n     resolver: zodResolver(FormSchema),\n   })\n \n-  const { mutate: createDatabaseRole, isLoading: isCreating } = useDatabaseRoleCreateMutation({\n+  const { mutate: createDatabaseRole, isPending: isCreating } = useDatabaseRoleCreateMutation({\n     onSuccess: (_, vars) => {\n       toast.success(`Successfully created new role: ${vars.payload.name}`)\n       handleClose()\ndiff --git a/apps/studio/components/interfaces/Database/Roles/DeleteRoleModal.tsx b/apps/studio/components/interfaces/Database/Roles/DeleteRoleModal.tsx\nindex 2b42240b506b4..4bc9d70584d18 100644\n--- a/apps/studio/components/interfaces/Database/Roles/DeleteRoleModal.tsx\n+++ b/apps/studio/components/interfaces/Database/Roles/DeleteRoleModal.tsx\n@@ -15,7 +15,7 @@ interface DeleteRoleModalProps {\n export const DeleteRoleModal = ({ role, visible, onClose, onDelete }: DeleteRoleModalProps) => {\n   const { data: project } = useSelectedProjectQuery()\n \n-  const { mutate: deleteDatabaseRole, isLoading: isDeleting } = useDatabaseRoleDeleteMutation({\n+  const { mutate: deleteDatabaseRole, isPending: isDeleting } = useDatabaseRoleDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully deleted role: ${role.name}`)\n       onClose()\ndiff --git a/apps/studio/components/interfaces/Database/Roles/RoleRow.tsx b/apps/studio/components/interfaces/Database/Roles/RoleRow.tsx\nindex c4c5b82dee420..b4d03690567f7 100644\n--- a/apps/studio/components/interfaces/Database/Roles/RoleRow.tsx\n+++ b/apps/studio/components/interfaces/Database/Roles/RoleRow.tsx\n@@ -31,7 +31,7 @@ export const RoleRow = ({ role, disabled = false, onSelectDelete }: RoleRowProps\n   const { data: project } = useSelectedProjectQuery()\n   const [isExpanded, setIsExpanded] = useState(false)\n \n-  const { mutate: updateDatabaseRole, isLoading: isUpdating } = useDatabaseRoleUpdateMutation()\n+  const { mutate: updateDatabaseRole, isPending: isUpdating } = useDatabaseRoleUpdateMutation()\n \n   const { isSuperuser, canLogin, canCreateRole, canCreateDb, isReplicationRole, canBypassRls } =\n     role\ndiff --git a/apps/studio/components/interfaces/Database/Triggers/TriggerSheet.tsx b/apps/studio/components/interfaces/Database/Triggers/TriggerSheet.tsx\nindex 4d5cf8d0f4af0..c14145482fd01 100644\n--- a/apps/studio/components/interfaces/Database/Triggers/TriggerSheet.tsx\n+++ b/apps/studio/components/interfaces/Database/Triggers/TriggerSheet.tsx\n@@ -92,7 +92,7 @@ export const TriggerSheet = ({\n \n   const [showFunctionSelector, setShowFunctionSelector] = useState(false)\n \n-  const { mutate: createDatabaseTrigger, isLoading: isCreating } = useDatabaseTriggerCreateMutation(\n+  const { mutate: createDatabaseTrigger, isPending: isCreating } = useDatabaseTriggerCreateMutation(\n     {\n       onSuccess: () => {\n         toast.success(`Successfully created trigger`)\n@@ -103,7 +103,7 @@ export const TriggerSheet = ({\n       },\n     }\n   )\n-  const { mutate: updateDatabaseTrigger, isLoading: isUpdating } = useDatabaseTriggerUpdateMutation(\n+  const { mutate: updateDatabaseTrigger, isPending: isUpdating } = useDatabaseTriggerUpdateMutation(\n     {\n       onSuccess: () => {\n         toast.success(`Successfully updated trigger`)\ndiff --git a/apps/studio/components/interfaces/Database/Triggers/TriggersList/TriggersList.tsx b/apps/studio/components/interfaces/Database/Triggers/TriggersList/TriggersList.tsx\nindex d4c4df241d439..f7c47373648f7 100644\n--- a/apps/studio/components/interfaces/Database/Triggers/TriggersList/TriggersList.tsx\n+++ b/apps/studio/components/interfaces/Database/Triggers/TriggersList/TriggersList.tsx\n@@ -1,28 +1,29 @@\n import type { PostgresTrigger } from '@supabase/postgres-meta'\n import { PermissionAction } from '@supabase/shared-types/out/constants'\n import { DatabaseZap, FunctionSquare, Plus, Search, Shield } from 'lucide-react'\n-import { useRef, useState } from 'react'\n import { parseAsBoolean, parseAsString, useQueryState } from 'nuqs'\n+import { useRef, useState } from 'react'\n import { toast } from 'sonner'\n \n+import { useIsInlineEditorEnabled } from 'components/interfaces/Account/Preferences/InlineEditorSettings'\n+import { ProtectedSchemaWarning } from 'components/interfaces/Database/ProtectedSchemaWarning'\n+import { DeleteTrigger } from 'components/interfaces/Database/Triggers/DeleteTrigger'\n+import { TriggerSheet } from 'components/interfaces/Database/Triggers/TriggerSheet'\n import { SIDEBAR_KEYS } from 'components/layouts/ProjectLayout/LayoutSidebar/LayoutSidebarProvider'\n import AlertError from 'components/ui/AlertError'\n import { ButtonTooltip } from 'components/ui/ButtonTooltip'\n import SchemaSelector from 'components/ui/SchemaSelector'\n-import { ProtectedSchemaWarning } from 'components/interfaces/Database/ProtectedSchemaWarning'\n-import { DeleteTrigger } from 'components/interfaces/Database/Triggers/DeleteTrigger'\n-import { TriggerSheet } from 'components/interfaces/Database/Triggers/TriggerSheet'\n import { GenericSkeletonLoader } from 'components/ui/ShimmeringLoader'\n-import { useDatabaseTriggersQuery } from 'data/database-triggers/database-triggers-query'\n import { useDatabaseTriggerDeleteMutation } from 'data/database-triggers/database-trigger-delete-mutation'\n+import { useDatabaseTriggersQuery } from 'data/database-triggers/database-triggers-query'\n import { useTablesQuery } from 'data/tables/tables-query'\n import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n+import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { useQuerySchemaState } from 'hooks/misc/useSchemaQueryState'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n-import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { useIsProtectedSchema, useProtectedSchemas } from 'hooks/useProtectedSchemas'\n-import { useIsInlineEditorEnabled } from 'components/interfaces/Account/Preferences/InlineEditorSettings'\n import { useAiAssistantStateSnapshot } from 'state/ai-assistant-state'\n+import { useEditorPanelStateSnapshot } from 'state/editor-panel-state'\n import { useSidebarManagerSnapshot } from 'state/sidebar-manager-state'\n import {\n   AiIconAnimation,\n@@ -35,7 +36,6 @@ import {\n   TableRow,\n } from 'ui'\n import { TriggerList } from './TriggerList'\n-import { useEditorPanelStateSnapshot } from 'state/editor-panel-state'\n import { generateTriggerCreateSQL } from './TriggerList.utils'\n \n export const TriggersList = () => {\n@@ -114,7 +114,7 @@ export const TriggersList = () => {\n       handleErrorOnDelete(deletingTriggerIdRef, selectedId, `Database Trigger not found`),\n   })\n \n-  const { mutate: deleteDatabaseTrigger, isLoading: isDeletingTrigger } =\n+  const { mutate: deleteDatabaseTrigger, isPending: isDeletingTrigger } =\n     useDatabaseTriggerDeleteMutation({\n       onSuccess: (_, variables) => {\n         toast.success(`Successfully removed ${variables.trigger.name}`)\ndiff --git a/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx b/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx\nindex 5ff32c1e12ff3..4de34f0e8550c 100644\n--- a/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx\n+++ b/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx\n@@ -225,13 +225,13 @@ export function DiskManagementForm() {\n   const isProjectRequestingDiskChanges = isRequestingChanges && !isProjectResizing\n   const noPermissions = isPermissionsLoaded && !canUpdateDiskConfiguration\n \n-  const { mutateAsync: updateDiskConfiguration, isLoading: isUpdatingDisk } =\n+  const { mutateAsync: updateDiskConfiguration, isPending: isUpdatingDisk } =\n     useUpdateDiskAttributesMutation({\n       // this is to suppress to toast message\n       onError: () => {},\n       onSuccess: () => setRefetchInterval(2000),\n     })\n-  const { mutateAsync: updateSubscriptionAddon, isLoading: isUpdatingCompute } =\n+  const { mutateAsync: updateSubscriptionAddon, isPending: isUpdatingCompute } =\n     useProjectAddonUpdateMutation({\n       // this is to suppress to toast message\n       onError: () => {},\n@@ -240,7 +240,7 @@ export function DiskManagementForm() {\n         if (projectRef) setProjectStatus({ ref: projectRef, status: PROJECT_STATUS.RESIZING })\n       },\n     })\n-  const { mutateAsync: updateDiskAutoscaleConfig, isLoading: isUpdatingDiskAutoscaleConfig } =\n+  const { mutateAsync: updateDiskAutoscaleConfig, isPending: isUpdatingDiskAutoscaleConfig } =\n     useUpdateDiskAutoscaleConfigMutation({\n       // this is to suppress to toast message\n       onError: () => {},\ndiff --git a/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionDetails.tsx b/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionDetails.tsx\nindex 9320f44a7e56c..541b73566c84a 100644\n--- a/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionDetails.tsx\n+++ b/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionDetails.tsx\n@@ -104,8 +104,8 @@ export const EdgeFunctionDetails = () => {\n     slug: functionSlug,\n   })\n \n-  const { mutate: updateEdgeFunction, isLoading: isUpdating } = useEdgeFunctionUpdateMutation()\n-  const { mutate: deleteEdgeFunction, isLoading: isDeleting } = useEdgeFunctionDeleteMutation({\n+  const { mutate: updateEdgeFunction, isPending: isUpdating } = useEdgeFunctionUpdateMutation()\n+  const { mutate: deleteEdgeFunction, isPending: isDeleting } = useEdgeFunctionDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully deleted \"${selectedFunction?.name}\"`)\n       router.push(`/project/${projectRef}/functions`)\ndiff --git a/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionTesterSheet.tsx b/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionTesterSheet.tsx\nindex 06585eba6e0bd..a4c8c3b5b1f16 100644\n--- a/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionTesterSheet.tsx\n+++ b/apps/studio/components/interfaces/Functions/EdgeFunctionDetails/EdgeFunctionTesterSheet.tsx\n@@ -96,7 +96,7 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n   const { serviceKey } = getKeys(apiKeys)\n \n   const { mutate: sendEvent } = useSendEventMutation()\n-  const { mutate: testEdgeFunction, isLoading } = useEdgeFunctionTestMutation({\n+  const { mutate: testEdgeFunction, isPending } = useEdgeFunctionTestMutation({\n     onSuccess: (res) => setResponse(res),\n     onError: (err) => {\n       setError(err instanceof Error ? err.message : 'An unknown error occurred')\n@@ -248,7 +248,7 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n                     {...field}\n                     size=\"tiny\"\n                     placeholder=\"Enter key...\"\n-                    disabled={isLoading}\n+                    disabled={isPending}\n                     className=\"h-auto py-2 font-mono rounded-none shadow-none bg-transparent border-l-0 border-r-1 border-t-0 border-b-0 border-border\"\n                   />\n                 </FormControl_Shadcn_>\n@@ -263,7 +263,7 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n                     {...field}\n                     size=\"tiny\"\n                     placeholder=\"Enter value...\"\n-                    disabled={isLoading}\n+                    disabled={isPending}\n                     className=\"h-auto py-2 font-mono rounded-none shadow-none bg-transparent border-none\"\n                   />\n                 </FormControl_Shadcn_>\n@@ -310,7 +310,7 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n                           <Select\n                             value={field.value}\n                             onValueChange={field.onChange}\n-                            disabled={isLoading}\n+                            disabled={isPending}\n                           >\n                             <SelectTrigger className=\"w-full\">\n                               <SelectValue placeholder=\"Select method\" />\n@@ -338,7 +338,7 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n                               {...field}\n                               placeholder=\"Request body (JSON)\"\n                               rows={3}\n-                              disabled={isLoading}\n+                              disabled={isPending}\n                               className=\"font-mono text-xs\"\n                             />\n                           </FormControl_Shadcn_>\n@@ -406,7 +406,7 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n                         </Tabs>\n                       )}\n                     </div>\n-                  ) : isLoading ? (\n+                  ) : isPending ? (\n                     <div className=\"h-full flex flex-col items-center justify-center gap-2\">\n                       <Loader2 size={24} className=\"text-foreground-muted animate-spin\" />\n                       <p className=\"text-sm text-foreground-light\">Sending request...</p>\n@@ -432,8 +432,8 @@ export const EdgeFunctionTesterSheet = ({ visible, onClose }: EdgeFunctionTester\n                 <Button\n                   type=\"primary\"\n                   htmlType=\"submit\"\n-                  loading={isLoading}\n-                  disabled={isLoading}\n+                  loading={isPending}\n+                  disabled={isPending}\n                   onClick={() =>\n                     sendEvent({\n                       action: 'edge_function_test_send_button_clicked',\ndiff --git a/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/AddNewSecretForm.tsx b/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/AddNewSecretForm.tsx\nindex 8365f779f0fcd..90134cff6921a 100644\n--- a/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/AddNewSecretForm.tsx\n+++ b/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/AddNewSecretForm.tsx\n@@ -5,11 +5,9 @@ import { toast } from 'sonner'\n import z from 'zod'\n \n import { useParams } from 'common'\n-import Panel from 'components/ui/Panel'\n import { useSecretsCreateMutation } from 'data/secrets/secrets-create-mutation'\n import { useSecretsQuery } from 'data/secrets/secrets-query'\n import { Eye, EyeOff, MinusCircle } from 'lucide-react'\n-import { DuplicateSecretWarningModal } from './DuplicateSecretWarningModal'\n import {\n   Button,\n   Card,\n@@ -25,6 +23,7 @@ import {\n   FormMessage_Shadcn_,\n } from 'ui'\n import { Input } from 'ui-patterns/DataInputs/Input'\n+import { DuplicateSecretWarningModal } from './DuplicateSecretWarningModal'\n \n type SecretPair = {\n   name: string\n@@ -127,7 +126,7 @@ const AddNewSecretForm = () => {\n     }\n   }\n \n-  const { mutate: createSecret, isLoading: isCreating } = useSecretsCreateMutation({\n+  const { mutate: createSecret, isPending: isCreating } = useSecretsCreateMutation({\n     onSuccess: (_, variables) => {\n       toast.success(`Successfully created new secret \"${variables.secrets[0].name}\"`)\n       // RHF recommends using setTimeout/useEffect to reset the form\ndiff --git a/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EdgeFunctionSecrets.tsx b/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EdgeFunctionSecrets.tsx\nindex 462be5e618bcf..f2676c19a5d0e 100644\n--- a/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EdgeFunctionSecrets.tsx\n+++ b/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EdgeFunctionSecrets.tsx\n@@ -8,7 +8,7 @@ import AlertError from 'components/ui/AlertError'\n import NoPermission from 'components/ui/NoPermission'\n import { GenericSkeletonLoader } from 'components/ui/ShimmeringLoader'\n import { useSecretsDeleteMutation } from 'data/secrets/secrets-delete-mutation'\n-import { ProjectSecret, useSecretsQuery } from 'data/secrets/secrets-query'\n+import { useSecretsQuery } from 'data/secrets/secrets-query'\n import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { Badge, Card, Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from 'ui'\n@@ -54,7 +54,7 @@ const EdgeFunctionSecrets = () => {\n         handleErrorOnDelete(deletingSecretNameRef, selectedId, `Secret not found`),\n     })\n \n-  const { mutate: deleteSecret, isLoading: isDeleting } = useSecretsDeleteMutation({\n+  const { mutate: deleteSecret, isPending: isDeleting } = useSecretsDeleteMutation({\n     onSuccess: (_, variables) => {\n       toast.success(`Successfully deleted ${variables.secrets[0]}`)\n       setSelectedSecretToDelete(null)\ndiff --git a/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EditSecretSheet.tsx b/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EditSecretSheet.tsx\nindex fe0f367da046f..5b7f4a1779bd9 100644\n--- a/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EditSecretSheet.tsx\n+++ b/apps/studio/components/interfaces/Functions/EdgeFunctionSecrets/EditSecretSheet.tsx\n@@ -61,7 +61,7 @@ export function EditSecretSheet({ secret, visible, onClose }: EditSecretSheetPro\n   const isValid = form.formState.isValid\n \n   const { ref: projectRef } = useParams()\n-  const { mutate: updateSecret, isLoading: isUpdating } = useSecretsCreateMutation({\n+  const { mutate: updateSecret, isPending: isUpdating } = useSecretsCreateMutation({\n     onSuccess: (_, variables) => {\n       toast.success(`Successfully updated secret \"${variables.secrets[0].name}\"`)\n       onClose()\ndiff --git a/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CreateCronJobSheet.tsx b/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CreateCronJobSheet.tsx\nindex 2605032b63138..c34a0ab0b9bf1 100644\n--- a/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CreateCronJobSheet.tsx\n+++ b/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CreateCronJobSheet.tsx\n@@ -108,7 +108,7 @@ export const CreateCronJobSheet = ({\n   const pgNetExtensionInstalled = pgNetExtension?.installed_version != undefined\n \n   const { mutate: sendEvent } = useSendEventMutation()\n-  const { mutate: upsertCronJob, isLoading: isUpserting } = useDatabaseCronJobCreateMutation()\n+  const { mutate: upsertCronJob, isPending: isUpserting } = useDatabaseCronJobCreateMutation()\n   const isLoading = isLoadingGetCronJob || isUpserting\n \n   const { can: canToggleExtensions } = useAsyncCheckPermissions(\ndiff --git a/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CronJobScheduleSection.tsx b/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CronJobScheduleSection.tsx\nindex f911e90b625aa..65b3754fb8e7d 100644\n--- a/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CronJobScheduleSection.tsx\n+++ b/apps/studio/components/interfaces/Integrations/CronJobs/CreateCronJobSheet/CronJobScheduleSection.tsx\n@@ -48,7 +48,7 @@ export const CronJobScheduleSection = ({ form, supportsSeconds }: CronJobSchedul\n     { name: 'Every Monday at 2 AM', expression: '0 2 * * 1' },\n   ] as const\n \n-  const { mutate: generateCronSyntax, isLoading: isGeneratingCron } = useSqlCronGenerateMutation({\n+  const { mutate: generateCronSyntax, isPending: isGeneratingCron } = useSqlCronGenerateMutation({\n     onSuccess: (expression) => {\n       form.setValue('schedule', expression, {\n         shouldValidate: true,\ndiff --git a/apps/studio/components/interfaces/Integrations/CronJobs/CronJobTableCell.tsx b/apps/studio/components/interfaces/Integrations/CronJobs/CronJobTableCell.tsx\nindex 1c43b1f139684..8883ad7c2db09 100644\n--- a/apps/studio/components/interfaces/Integrations/CronJobs/CronJobTableCell.tsx\n+++ b/apps/studio/components/interfaces/Integrations/CronJobs/CronJobTableCell.tsx\n@@ -103,13 +103,13 @@ export const CronJobTableCell = ({\n           ? getNextRun(schedule, latest_run)\n           : value\n \n-  const { mutate: runCronJob, isLoading: isRunning } = useDatabaseCronJobRunCommandMutation({\n+  const { mutate: runCronJob, isPending: isRunning } = useDatabaseCronJobRunCommandMutation({\n     onSuccess: () => {\n       toast.success(`Command from \"${jobname}\" ran successfully`)\n     },\n   })\n \n-  const { mutate: toggleDatabaseCronJob, isLoading: isToggling } = useDatabaseCronJobToggleMutation(\n+  const { mutate: toggleDatabaseCronJob, isPending: isToggling } = useDatabaseCronJobToggleMutation(\n     {\n       onSuccess: (_, vars) => {\n         toast.success(`Successfully ${vars.active ? 'enabled' : 'disabled'} \"${jobname}\"`)\ndiff --git a/apps/studio/components/interfaces/Integrations/CronJobs/DeleteCronJob.tsx b/apps/studio/components/interfaces/Integrations/CronJobs/DeleteCronJob.tsx\nindex fa85151327c17..cc9772e415ce7 100644\n--- a/apps/studio/components/interfaces/Integrations/CronJobs/DeleteCronJob.tsx\n+++ b/apps/studio/components/interfaces/Integrations/CronJobs/DeleteCronJob.tsx\n@@ -23,7 +23,7 @@ export const DeleteCronJob = ({ cronJob, visible, onClose, onDeleteStart }: Dele\n   const [searchQuery] = useQueryState('search', parseAsString.withDefault(''))\n \n   const { mutate: sendEvent } = useSendEventMutation()\n-  const { mutate: deleteDatabaseCronJob, isLoading } = useDatabaseCronJobDeleteMutation({\n+  const { mutate: deleteDatabaseCronJob, isPending } = useDatabaseCronJobDeleteMutation({\n     onSuccess: () => {\n       sendEvent({\n         action: 'cron_job_deleted',\n@@ -62,7 +62,7 @@ export const DeleteCronJob = ({ cronJob, visible, onClose, onDeleteStart }: Dele\n         }}\n         onConfirm={handleDelete}\n         title={`Delete the cron job`}\n-        loading={isLoading}\n+        loading={isPending}\n         confirmLabel={`Delete`}\n         alert={{ title: 'You cannot recover this cron job once deleted.' }}\n       />\n@@ -79,7 +79,7 @@ export const DeleteCronJob = ({ cronJob, visible, onClose, onDeleteStart }: Dele\n         cleanPointerEventsNoneOnBody()\n       }}\n       title=\"Delete this cron job\"\n-      loading={isLoading}\n+      loading={isPending}\n       confirmLabel={`Delete cron job ${cronJob.jobname}`}\n       confirmPlaceholder=\"Type in name of cron job\"\n       confirmString={cronJob.jobname ?? 'Unknown'}\ndiff --git a/apps/studio/components/interfaces/Integrations/Queues/CreateQueueSheet.tsx b/apps/studio/components/interfaces/Integrations/Queues/CreateQueueSheet.tsx\nindex 25cabbfd2337b..2cc4079a59c3a 100644\n--- a/apps/studio/components/interfaces/Integrations/Queues/CreateQueueSheet.tsx\n+++ b/apps/studio/components/interfaces/Integrations/Queues/CreateQueueSheet.tsx\n@@ -79,7 +79,7 @@ export const CreateQueueSheet = ({ visible, onClose }: CreateQueueSheetProps) =>\n     connectionString: project?.connectionString,\n   })\n \n-  const { mutate: createQueue, isLoading } = useDatabaseQueueCreateMutation()\n+  const { mutate: createQueue, isPending } = useDatabaseQueueCreateMutation()\n \n   const form = useForm<CreateQueueForm>({\n     resolver: zodResolver(FormSchema),\n@@ -313,18 +313,11 @@ export const CreateQueueSheet = ({ visible, onClose }: CreateQueueSheetProps) =>\n               type=\"default\"\n               htmlType=\"button\"\n               onClick={confirmOnClose}\n-              disabled={isLoading}\n+              disabled={isPending}\n             >\n               Cancel\n             </Button>\n-            <Button\n-              size=\"tiny\"\n-              type=\"primary\"\n-              form={FORM_ID}\n-              htmlType=\"submit\"\n-              disabled={isLoading}\n-              loading={isLoading}\n-            >\n+            <Button size=\"tiny\" type=\"primary\" form={FORM_ID} htmlType=\"submit\" loading={isPending}>\n               Create queue\n             </Button>\n           </SheetFooter>\ndiff --git a/apps/studio/components/interfaces/Integrations/Queues/QueueTab.tsx b/apps/studio/components/interfaces/Integrations/Queues/QueueTab.tsx\nindex 82ea63038760f..d37a0a6edb292 100644\n--- a/apps/studio/components/interfaces/Integrations/Queues/QueueTab.tsx\n+++ b/apps/studio/components/interfaces/Integrations/Queues/QueueTab.tsx\n@@ -78,7 +78,7 @@ export const QueueTab = () => {\n   )\n   const messages = useMemo(() => data?.pages.flatMap((p) => p), [data?.pages])\n \n-  const { mutate: updateTable, isLoading: isUpdatingTable } = useTableUpdateMutation({\n+  const { mutate: updateTable, isPending: isUpdatingTable } = useTableUpdateMutation({\n     onSettled: () => {\n       toast.success(`Successfully enabled RLS for ${queueName}`)\n       setRlsConfirmModalOpen(false)\ndiff --git a/apps/studio/components/interfaces/Integrations/Queues/SingleQueue/DeleteQueue.tsx b/apps/studio/components/interfaces/Integrations/Queues/SingleQueue/DeleteQueue.tsx\nindex e953d0b49ed05..7739b1bd4aa09 100644\n--- a/apps/studio/components/interfaces/Integrations/Queues/SingleQueue/DeleteQueue.tsx\n+++ b/apps/studio/components/interfaces/Integrations/Queues/SingleQueue/DeleteQueue.tsx\n@@ -15,7 +15,7 @@ export const DeleteQueue = ({ queueName, visible, onClose }: DeleteQueueProps) =\n   const router = useRouter()\n   const { data: project } = useSelectedProjectQuery()\n \n-  const { mutate: deleteDatabaseQueue, isLoading } = useDatabaseQueueDeleteMutation({\n+  const { mutate: deleteDatabaseQueue, isPending } = useDatabaseQueueDeleteMutation({\n     onSuccess: () => {\n       toast.success(`Successfully removed queue ${queueName}`)\n       router.push(`/project/${project?.ref}/integrati",
			"diffSize": 258216,
			"diffTruncated": true,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "6556e28ac151704fcb585e6e384784531305c0e1",
			"message": "fix: do not override authorization header for self-hosted in ai assistant (#40654)",
			"user": "aantti",
			"timestamp": "2025-11-20T15:40:51Z",
			"author": {
				"name": "Andrey A.",
				"email": "56412611+aantti@users.noreply.github.com",
				"username": "aantti"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx b/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx\nindex 4f4bf8a8bfc72..c075f57000bb3 100644\n--- a/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx\n+++ b/apps/studio/components/ui/AIAssistantPanel/AIAssistant.tsx\n@@ -220,7 +220,7 @@ export const AIAssistant = ({ className }: AIAssistantProps) => {\n             orgSlug: selectedOrganizationRef.current?.slug,\n             model: selectedModel,\n           },\n-          headers: { Authorization: authorizationHeader ?? '' },\n+          ...(IS_PLATFORM ? { headers: { Authorization: authorizationHeader ?? '' } } : {}),\n         }\n       },\n     }),\n",
			"diffSize": 691,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "f5d9cb1b60e57919cd799f5b3f7f489e3d4cc26c",
			"message": "feat: adds link conversation support form (#40553)\n\n* feat: adds link conversation support form\n\n* style: fixes prettier styling issues\n\n* fix: type checking errors\n\n* feat: adds redirect to 404 for self hosted\n\n* style: prettier formatting",
			"user": "barcofourie",
			"timestamp": "2025-11-20T15:23:20Z",
			"author": {
				"name": "barcofourie",
				"email": "barco.fourie@gmail.com",
				"username": "barcofourie"
			},
			"files": {
				"added": [
					"apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts",
					"apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx",
					"apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx",
					"apps/studio/data/feedback/link-support-ticket-mutation.ts",
					"apps/studio/pages/support/link.tsx"
				],
				"modified": [],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts\nnew file mode 100644\nindex 0000000000000..56b67ce690481\n--- /dev/null\n+++ b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.schema.ts\n@@ -0,0 +1,27 @@\n+import { z } from 'zod'\n+\n+import { CATEGORY_OPTIONS, type ExtendedSupportCategories } from './Support.constants'\n+import { NO_ORG_MARKER } from './SupportForm.utils'\n+\n+export const LinkSupportTicketFormSchema = z.object({\n+  conversation_id: z.string().min(1, 'Conversation ID is required'),\n+  organizationSlug: z\n+    .string()\n+    .min(1, 'Please select an organization')\n+    .refine((val) => val !== NO_ORG_MARKER, {\n+      message: 'Please select an organization',\n+    }),\n+  projectRef: z.string().optional(),\n+  category: z.enum(\n+    CATEGORY_OPTIONS.map((opt) => opt.value) as [\n+      ExtendedSupportCategories,\n+      ...ExtendedSupportCategories[],\n+    ],\n+    {\n+      required_error: 'Please select a category',\n+    }\n+  ),\n+  allowSupportAccess: z.boolean(),\n+})\n+\n+export type LinkSupportTicketFormValues = z.infer<typeof LinkSupportTicketFormSchema>\ndiff --git a/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx\nnew file mode 100644\nindex 0000000000000..65a36291d817c\n--- /dev/null\n+++ b/apps/studio/components/interfaces/Support/LinkSupportTicketForm.tsx\n@@ -0,0 +1,362 @@\n+import { zodResolver } from '@hookform/resolvers/zod'\n+import { Check, ChevronsUpDown, ChevronRight } from 'lucide-react'\n+import Link from 'next/link'\n+import { useRouter } from 'next/router'\n+import type { SubmitHandler } from 'react-hook-form'\n+import { useForm } from 'react-hook-form'\n+import { toast } from 'sonner'\n+\n+import { useLinkSupportTicketMutation } from 'data/feedback/link-support-ticket-mutation'\n+import { useOrganizationsQuery } from 'data/organizations/organizations-query'\n+import {\n+  Badge,\n+  Button,\n+  Collapsible_Shadcn_,\n+  CollapsibleContent_Shadcn_,\n+  CollapsibleTrigger_Shadcn_,\n+  CommandGroup_Shadcn_,\n+  CommandItem_Shadcn_,\n+  DialogSectionSeparator,\n+  FormControl_Shadcn_,\n+  FormField_Shadcn_,\n+  Form_Shadcn_,\n+  Input_Shadcn_,\n+  Select_Shadcn_,\n+  SelectContent_Shadcn_,\n+  SelectGroup_Shadcn_,\n+  SelectItem_Shadcn_,\n+  SelectTrigger_Shadcn_,\n+  SelectValue_Shadcn_,\n+  Switch,\n+  cn,\n+} from 'ui'\n+import { FormItemLayout } from 'ui-patterns/form/FormItemLayout/FormItemLayout'\n+import { OrganizationProjectSelector } from 'components/ui/OrganizationProjectSelector'\n+import ShimmeringLoader from 'ui-patterns/ShimmeringLoader'\n+import { CATEGORY_OPTIONS, type ExtendedSupportCategories } from './Support.constants'\n+import {\n+  LinkSupportTicketFormSchema,\n+  type LinkSupportTicketFormValues,\n+} from './LinkSupportTicketForm.schema'\n+import { NO_ORG_MARKER, NO_PROJECT_MARKER } from './SupportForm.utils'\n+\n+interface LinkSupportTicketFormProps {\n+  conversationId: string\n+}\n+\n+export function LinkSupportTicketForm({ conversationId }: LinkSupportTicketFormProps) {\n+  const router = useRouter()\n+  const { data: organizations } = useOrganizationsQuery()\n+\n+  const form = useForm<LinkSupportTicketFormValues>({\n+    resolver: zodResolver(LinkSupportTicketFormSchema),\n+    defaultValues: {\n+      conversation_id: conversationId,\n+      organizationSlug: NO_ORG_MARKER,\n+      projectRef: NO_PROJECT_MARKER,\n+      category: '' as any,\n+      allowSupportAccess: true,\n+    },\n+    mode: 'onSubmit',\n+    reValidateMode: 'onBlur',\n+  })\n+\n+  const { mutate: linkSupportTicket, isLoading } = useLinkSupportTicketMutation({\n+    onSuccess: () => {\n+      toast.success('Support ticket linked successfully!')\n+      router.push('/')\n+    },\n+    onError: (error) => {\n+      toast.error(`Failed to link support ticket: ${error.message}`)\n+    },\n+  })\n+\n+  const organizationSlug = form.watch('organizationSlug')\n+  const selectedOrgSlug = organizationSlug === NO_ORG_MARKER ? null : organizationSlug\n+\n+  const onSubmit: SubmitHandler<LinkSupportTicketFormValues> = (values) => {\n+    if (!organizations) {\n+      toast.error('Organizations not loaded. Please try again.')\n+      return\n+    }\n+\n+    const selectedOrg = organizations.find((org) => org.slug === values.organizationSlug)\n+    if (!selectedOrg) {\n+      toast.error('Selected organization not found. Please try again.')\n+      return\n+    }\n+\n+    linkSupportTicket({\n+      conversation_id: values.conversation_id,\n+      org_id: selectedOrg.id,\n+      project_ref:\n+        values.projectRef && values.projectRef !== NO_PROJECT_MARKER\n+          ? values.projectRef\n+          : undefined,\n+      category: values.category,\n+      allow_support_access: values.allowSupportAccess,\n+    })\n+  }\n+\n+  return (\n+    <Form_Shadcn_ {...form}>\n+      <form\n+        id=\"link-support-ticket-form\"\n+        onSubmit={form.handleSubmit(onSubmit)}\n+        className=\"flex flex-col gap-y-6\"\n+      >\n+        <h3 className=\"px-6 text-xl\">Link support ticket to account</h3>\n+\n+        <div className=\"px-6 flex flex-col gap-y-8\">\n+          <FormField_Shadcn_\n+            control={form.control}\n+            name=\"conversation_id\"\n+            render={({ field }) => (\n+              <FormItemLayout hideMessage layout=\"vertical\" label=\"Conversation ID\">\n+                <FormControl_Shadcn_>\n+                  <Input_Shadcn_ {...field} disabled readOnly />\n+                </FormControl_Shadcn_>\n+              </FormItemLayout>\n+            )}\n+          />\n+\n+          <FormField_Shadcn_\n+            control={form.control}\n+            name=\"organizationSlug\"\n+            render={({ field }) => {\n+              const { ref: _ref, ...fieldWithoutRef } = field\n+              return (\n+                <FormItemLayout layout=\"vertical\" label=\"Which organization is affected?\">\n+                  <FormControl_Shadcn_>\n+                    <Select_Shadcn_\n+                      {...fieldWithoutRef}\n+                      disabled={!organizations}\n+                      defaultValue={field.value}\n+                      onValueChange={(value) => {\n+                        const previousOrgSlug = form.getValues('organizationSlug')\n+                        field.onChange(value)\n+                        if (previousOrgSlug !== value) {\n+                          form.resetField('projectRef', { defaultValue: NO_PROJECT_MARKER })\n+                        }\n+                      }}\n+                    >\n+                      <SelectTrigger_Shadcn_ className=\"w-full\" aria-label=\"Select an organization\">\n+                        <SelectValue_Shadcn_ placeholder=\"Select an organization\">\n+                          {organizationSlug === NO_ORG_MARKER\n+                            ? 'Select an organization'\n+                            : organizations?.find((o) => o.slug === field.value)?.name}\n+                        </SelectValue_Shadcn_>\n+                      </SelectTrigger_Shadcn_>\n+                      <SelectContent_Shadcn_>\n+                        <SelectGroup_Shadcn_>\n+                          {organizations?.map((org) => (\n+                            <SelectItem_Shadcn_ key={org.slug} value={org.slug}>\n+                              {org.name}\n+                            </SelectItem_Shadcn_>\n+                          ))}\n+                        </SelectGroup_Shadcn_>\n+                      </SelectContent_Shadcn_>\n+                    </Select_Shadcn_>\n+                  </FormControl_Shadcn_>\n+                </FormItemLayout>\n+              )\n+            }}\n+          />\n+\n+          <FormField_Shadcn_\n+            control={form.control}\n+            name=\"projectRef\"\n+            render={({ field }) => (\n+              <FormItemLayout hideMessage layout=\"vertical\" label=\"Which project is affected?\">\n+                <FormControl_Shadcn_>\n+                  <OrganizationProjectSelector\n+                    key={selectedOrgSlug}\n+                    sameWidthAsTrigger\n+                    fetchOnMount\n+                    checkPosition=\"left\"\n+                    slug={\n+                      !selectedOrgSlug || selectedOrgSlug === NO_ORG_MARKER\n+                        ? undefined\n+                        : selectedOrgSlug\n+                    }\n+                    selectedRef={field.value}\n+                    onSelect={(project) => field.onChange(project.ref)}\n+                    renderTrigger={({ isLoading, project }) => {\n+                      return (\n+                        <Button\n+                          block\n+                          type=\"default\"\n+                          role=\"combobox\"\n+                          aria-label=\"Select a project\"\n+                          size=\"small\"\n+                          className=\"justify-between\"\n+                          iconRight={\n+                            <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n+                          }\n+                          disabled={!selectedOrgSlug}\n+                        >\n+                          {!selectedOrgSlug ? (\n+                            'Select an organization first'\n+                          ) : isLoading ? (\n+                            <ShimmeringLoader className=\"w-44 py-2\" />\n+                          ) : !field.value || field.value === NO_PROJECT_MARKER ? (\n+                            'No specific project'\n+                          ) : (\n+                            project?.name ?? 'Unknown project'\n+                          )}\n+                        </Button>\n+                      )\n+                    }}\n+                    renderActions={(setOpen) => (\n+                      <CommandGroup_Shadcn_>\n+                        <CommandItem_Shadcn_\n+                          className=\"w-full gap-x-2\"\n+                          onSelect={() => {\n+                            field.onChange(NO_PROJECT_MARKER)\n+                            setOpen(false)\n+                          }}\n+                        >\n+                          {field.value === NO_PROJECT_MARKER && <Check size={16} />}\n+                          <p className={field.value !== NO_PROJECT_MARKER ? 'ml-6' : ''}>\n+                            No specific project\n+                          </p>\n+                        </CommandItem_Shadcn_>\n+                      </CommandGroup_Shadcn_>\n+                    )}\n+                  />\n+                </FormControl_Shadcn_>\n+              </FormItemLayout>\n+            )}\n+          />\n+\n+          <FormField_Shadcn_\n+            control={form.control}\n+            name=\"category\"\n+            render={({ field }) => {\n+              const { ref: _ref, ...fieldWithoutRef } = field\n+              return (\n+                <FormItemLayout\n+                  hideMessage\n+                  layout=\"vertical\"\n+                  label=\"What are you having issues with?\"\n+                >\n+                  <FormControl_Shadcn_>\n+                    <Select_Shadcn_\n+                      {...fieldWithoutRef}\n+                      defaultValue={field.value}\n+                      onValueChange={field.onChange}\n+                    >\n+                      <SelectTrigger_Shadcn_ aria-label=\"Select an issue\" className=\"w-full\">\n+                        <SelectValue_Shadcn_ placeholder=\"Select an issue\">\n+                          {field.value\n+                            ? CATEGORY_OPTIONS.find((o) => o.value === field.value)?.label\n+                            : null}\n+                        </SelectValue_Shadcn_>\n+                      </SelectTrigger_Shadcn_>\n+                      <SelectContent_Shadcn_>\n+                        <SelectGroup_Shadcn_>\n+                          {CATEGORY_OPTIONS.filter((option) => !option.hidden).map((option) => (\n+                            <SelectItem_Shadcn_ key={option.value} value={option.value}>\n+                              {option.label}\n+                              <span className=\"block text-xs text-foreground-lighter\">\n+                                {option.description}\n+                              </span>\n+                            </SelectItem_Shadcn_>\n+                          ))}\n+                        </SelectGroup_Shadcn_>\n+                      </SelectContent_Shadcn_>\n+                    </Select_Shadcn_>\n+                  </FormControl_Shadcn_>\n+                </FormItemLayout>\n+              )\n+            }}\n+          />\n+        </div>\n+\n+        <DialogSectionSeparator />\n+\n+        <FormField_Shadcn_\n+          control={form.control}\n+          name=\"allowSupportAccess\"\n+          render={({ field }) => {\n+            return (\n+              <FormItemLayout\n+                hideMessage\n+                name=\"allowSupportAccess\"\n+                className=\"px-6\"\n+                layout=\"flex\"\n+                label={\n+                  <div className=\"flex items-center gap-x-2\">\n+                    <span className=\"text-foreground\">Allow support access to your project</span>\n+                    <Badge className=\"bg-opacity-100\">Recommended</Badge>\n+                  </div>\n+                }\n+                description={\n+                  <div className=\"flex flex-col\">\n+                    <span className=\"text-foreground-light\">\n+                      Human support and AI diagnostic access.\n+                    </span>\n+                    <Collapsible_Shadcn_ className=\"mt-2\">\n+                      <CollapsibleTrigger_Shadcn_\n+                        className={\n+                          'group flex items-center gap-x-1 group-data-[state=open]:text-foreground hover:text-foreground transition'\n+                        }\n+                      >\n+                        <ChevronRight\n+                          size={14}\n+                          className=\"transition-all group-data-[state=open]:rotate-90 text-foreground-muted -ml-1\"\n+                        />\n+                        <span className=\"text-sm\">More information</span>\n+                      </CollapsibleTrigger_Shadcn_>\n+                      <CollapsibleContent_Shadcn_ className=\"text-sm text-foreground-light mt-2 space-y-2\">\n+                        <p>\n+                          By enabling this, you grant permission for our support team to access your\n+                          project temporarily and, if applicable, to use AI tools to assist in\n+                          diagnosing and resolving issues. This access may involve analyzing\n+                          database configurations, query performance, and other relevant data to\n+                          expedite troubleshooting and enhance support accuracy.\n+                        </p>\n+                        <p>\n+                          We are committed to maintaining strict data privacy and security standards\n+                          in all support activities.{' '}\n+                          <Link\n+                            href=\"https://supabase.com/privacy\"\n+                            target=\"_blank\"\n+                            rel=\"noreferrer\"\n+                            className=\"text-foreground-light underline hover:text-foreground transition\"\n+                          >\n+                            Privacy Policy\n+                          </Link>\n+                        </p>\n+                      </CollapsibleContent_Shadcn_>\n+                    </Collapsible_Shadcn_>\n+                  </div>\n+                }\n+              >\n+                <Switch\n+                  size=\"large\"\n+                  id=\"allowSupportAccess\"\n+                  checked={field.value}\n+                  onCheckedChange={field.onChange}\n+                />\n+              </FormItemLayout>\n+            )\n+          }}\n+        />\n+\n+        <div className=\"px-6 pt-2\">\n+          <Button\n+            type=\"primary\"\n+            htmlType=\"submit\"\n+            size=\"large\"\n+            block\n+            disabled={isLoading}\n+            loading={isLoading}\n+          >\n+            Link support ticket to account\n+          </Button>\n+        </div>\n+      </form>\n+    </Form_Shadcn_>\n+  )\n+}\ndiff --git a/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx b/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx\nnew file mode 100644\nindex 0000000000000..7b0785034bc40\n--- /dev/null\n+++ b/apps/studio/components/interfaces/Support/LinkSupportTicketPage.tsx\n@@ -0,0 +1,44 @@\n+import { useRouter } from 'next/router'\n+import type { PropsWithChildren } from 'react'\n+\n+import { Admonition } from 'ui-patterns'\n+import { LinkSupportTicketForm } from './LinkSupportTicketForm'\n+\n+export function LinkSupportTicketPage() {\n+  return (\n+    <LinkSupportTicketPageWrapper>\n+      <LinkSupportTicketPageContent />\n+    </LinkSupportTicketPageWrapper>\n+  )\n+}\n+\n+function LinkSupportTicketPageContent() {\n+  const router = useRouter()\n+  const conversationId = router.query.conversationId as string | undefined\n+\n+  if (!conversationId) {\n+    return (\n+      <Admonition\n+        type=\"warning\"\n+        title=\"Missing conversation ID\"\n+        description=\"Please provide a conversationId in the URL to link your support ticket.\"\n+      />\n+    )\n+  }\n+\n+  return (\n+    <div className=\"min-w-full w-full space-y-12 rounded border bg-panel-body-light shadow-md py-8 border-default\">\n+      <LinkSupportTicketForm conversationId={conversationId} />\n+    </div>\n+  )\n+}\n+\n+function LinkSupportTicketPageWrapper({ children }: PropsWithChildren) {\n+  return (\n+    <div className=\"relative overflow-y-auto overflow-x-hidden\">\n+      <div className=\"mx-auto my-16 max-w-2xl w-full px-4 lg:px-6\">\n+        <div className=\"flex flex-col gap-y-8\">{children}</div>\n+      </div>\n+    </div>\n+  )\n+}\ndiff --git a/apps/studio/data/feedback/link-support-ticket-mutation.ts b/apps/studio/data/feedback/link-support-ticket-mutation.ts\nnew file mode 100644\nindex 0000000000000..f5d77a2974cd7\n--- /dev/null\n+++ b/apps/studio/data/feedback/link-support-ticket-mutation.ts\n@@ -0,0 +1,73 @@\n+import { useMutation } from '@tanstack/react-query'\n+import { toast } from 'sonner'\n+\n+import type { ExtendedSupportCategories } from 'components/interfaces/Support/Support.constants'\n+import { handleError, patch } from 'data/fetchers'\n+import type { ResponseError, UseCustomMutationOptions } from 'types'\n+\n+export type LinkSupportTicketVariables = {\n+  conversation_id: string\n+  org_id: number\n+  project_ref?: string\n+  category: ExtendedSupportCategories\n+  allow_support_access: boolean\n+}\n+\n+export async function linkSupportTicket({\n+  conversation_id,\n+  org_id,\n+  project_ref,\n+  category,\n+  allow_support_access,\n+}: LinkSupportTicketVariables) {\n+  const { data, error } = await patch(\n+    '/platform/feedback/conversations/{conversation_id}/custom-fields',\n+    {\n+      params: { path: { conversation_id } },\n+      body: {\n+        org_id,\n+        project_ref,\n+        category,\n+        allow_support_access,\n+      },\n+    }\n+  )\n+\n+  if (error) {\n+    handleError(error, {\n+      alwaysCapture: true,\n+      sentryContext: {\n+        tags: {\n+          linkSupportTicket: true,\n+        },\n+      },\n+    })\n+  }\n+  return data\n+}\n+\n+type LinkSupportTicketData = Awaited<ReturnType<typeof linkSupportTicket>>\n+\n+export const useLinkSupportTicketMutation = ({\n+  onSuccess,\n+  onError,\n+  ...options\n+}: Omit<\n+  UseCustomMutationOptions<LinkSupportTicketData, ResponseError, LinkSupportTicketVariables>,\n+  'mutationFn'\n+> = {}) => {\n+  return useMutation<LinkSupportTicketData, ResponseError, LinkSupportTicketVariables>({\n+    mutationFn: (vars) => linkSupportTicket(vars),\n+    async onSuccess(data, variables, context) {\n+      await onSuccess?.(data, variables, context)\n+    },\n+    async onError(data, variables, context) {\n+      if (onError === undefined) {\n+        toast.error(`Failed to link support ticket: ${data.message}`)\n+      } else {\n+        onError(data, variables, context)\n+      }\n+    },\n+    ...options,\n+  })\n+}\ndiff --git a/apps/studio/pages/support/link.tsx b/apps/studio/pages/support/link.tsx\nnew file mode 100644\nindex 0000000000000..107b0f9d82447\n--- /dev/null\n+++ b/apps/studio/pages/support/link.tsx\n@@ -0,0 +1,33 @@\n+import { useRouter } from 'next/router'\n+import type { ReactElement } from 'react'\n+import { useEffect } from 'react'\n+import { LinkSupportTicketPage } from 'components/interfaces/Support/LinkSupportTicketPage'\n+import AppLayout from 'components/layouts/AppLayout/AppLayout'\n+import DefaultLayout from 'components/layouts/DefaultLayout'\n+import { withAuth } from 'hooks/misc/withAuth'\n+import type { NextPageWithLayout } from 'types'\n+import { IS_PLATFORM } from 'lib/constants'\n+\n+const LinkSupportTicketPageRoute: NextPageWithLayout = () => {\n+  const router = useRouter()\n+\n+  useEffect(() => {\n+    if (!IS_PLATFORM) {\n+      router.push('/404')\n+    }\n+  }, [router])\n+\n+  if (!IS_PLATFORM) {\n+    return null\n+  }\n+\n+  return <LinkSupportTicketPage />\n+}\n+\n+LinkSupportTicketPageRoute.getLayout = (page: ReactElement) => (\n+  <AppLayout>\n+    <DefaultLayout>{page}</DefaultLayout>\n+  </AppLayout>\n+)\n+\n+export default withAuth(LinkSupportTicketPageRoute, { useHighestAAL: false })\n",
			"diffSize": 21267,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "a4b6c63928d86ea2aceab624fc0bd49f75e4b332",
			"message": "chore: Remove the download bucket object mutation (#40640)\n\nRemove the download bucket object mutation.",
			"user": "ivasilov",
			"timestamp": "2025-11-20T14:15:49Z",
			"author": {
				"name": "Ivan Vasilov",
				"email": "vasilov.ivan@gmail.com",
				"username": "ivasilov"
			},
			"files": {
				"added": [],
				"modified": [],
				"removed": [
					"apps/studio/data/storage/bucket-object-download-mutation.ts"
				]
			},
			"diff": "diff --git a/apps/studio/data/storage/bucket-object-download-mutation.ts b/apps/studio/data/storage/bucket-object-download-mutation.ts\ndeleted file mode 100644\nindex 7e9bcc3b4acec..0000000000000\n--- a/apps/studio/data/storage/bucket-object-download-mutation.ts\n+++ /dev/null\n@@ -1,54 +0,0 @@\n-import { useMutation } from '@tanstack/react-query'\n-import { toast } from 'sonner'\n-\n-import { components } from 'data/api'\n-import { fetchPost } from 'data/fetchers'\n-import { API_URL, IS_PLATFORM } from 'lib/constants'\n-import type { ResponseError, UseCustomMutationOptions } from 'types'\n-\n-type DownloadBucketObjectParams = {\n-  projectRef: string\n-  bucketId?: string\n-  path: string\n-  options?: components['schemas']['DownloadObjectBody']['options']\n-}\n-export const downloadBucketObject = async (\n-  { projectRef, bucketId, path, options }: DownloadBucketObjectParams,\n-  signal?: AbortSignal\n-) => {\n-  if (!bucketId) throw new Error('bucketId is required')\n-\n-  const response = await fetchPost(\n-    `${API_URL}${IS_PLATFORM ? '' : '/platform'}/storage/${projectRef}/buckets/${bucketId}/objects/download`,\n-    { path, options, abortSignal: signal }\n-  )\n-\n-  if (response.error) throw response.error\n-  return response\n-}\n-\n-type BucketObjectDeleteData = Awaited<ReturnType<typeof downloadBucketObject>>\n-\n-export const useBucketObjectDownloadMutation = ({\n-  onSuccess,\n-  onError,\n-  ...options\n-}: Omit<\n-  UseCustomMutationOptions<BucketObjectDeleteData, ResponseError, DownloadBucketObjectParams>,\n-  'mutationFn'\n-> = {}) => {\n-  return useMutation<BucketObjectDeleteData, ResponseError, DownloadBucketObjectParams>({\n-    mutationFn: (vars) => downloadBucketObject(vars),\n-    async onSuccess(data, variables, context) {\n-      await onSuccess?.(data, variables, context)\n-    },\n-    async onError(data, variables, context) {\n-      if (onError === undefined) {\n-        toast.error(`Failed to download bucket object: ${data.message}`)\n-      } else {\n-        onError(data, variables, context)\n-      }\n-    },\n-    ...options,\n-  })\n-}\n",
			"diffSize": 2052,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "c74796a63365cb8df8cad31d8257f5868d0b63da",
			"message": "Fix: Updated to remove approved PRs and conflicts (#40626)",
			"user": "awaseem",
			"timestamp": "2025-11-20T14:05:14Z",
			"author": {
				"name": "Ali Waseem",
				"email": "waseema393@gmail.com",
				"username": "awaseem"
			},
			"files": {
				"added": [],
				"modified": ["scripts/actions/find-stale-dashboard-prs.js"],
				"removed": []
			},
			"diff": "diff --git a/scripts/actions/find-stale-dashboard-prs.js b/scripts/actions/find-stale-dashboard-prs.js\nindex afd0d2efc85bd..e772025275ac8 100644\n--- a/scripts/actions/find-stale-dashboard-prs.js\n+++ b/scripts/actions/find-stale-dashboard-prs.js\n@@ -177,6 +177,18 @@ module.exports = async ({ github, context, core }) => {\n           )\n         }\n \n+        // Skip PRs that have already been actioned (reviewed)\n+        if (reviewStatus !== 'no-reviews') {\n+          console.log(`PR #${pr.number} has already been reviewed (${reviewStatus}), skipping...`)\n+          continue\n+        }\n+\n+        // Skip PRs with merge conflicts\n+        if (mergeableStatus === 'conflicts') {\n+          console.log(`PR #${pr.number} has merge conflicts, skipping...`)\n+          continue\n+        }\n+\n         stalePRs.push({\n           number: pr.number,\n           title: pr.title,\n",
			"diffSize": 873,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "69c54c2eaec6b9f638714c49f336355de3e44fb1",
			"message": "remove param routing on delete policies (#40649)",
			"user": "fsansalvadore",
			"timestamp": "2025-11-20T13:38:54Z",
			"author": {
				"name": "Francesco Sansalvadore",
				"email": "f.sansalvadore@gmail.com",
				"username": "fsansalvadore"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Auth/Policies/Policies.tsx",
					"apps/studio/components/interfaces/Auth/Policies/PolicyTableRow/index.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Auth/Policies/Policies.tsx b/apps/studio/components/interfaces/Auth/Policies/Policies.tsx\nindex d06c4508d7d16..8be311b6446c7 100644\n--- a/apps/studio/components/interfaces/Auth/Policies/Policies.tsx\n+++ b/apps/studio/components/interfaces/Auth/Policies/Policies.tsx\n@@ -1,4 +1,5 @@\n import type { PostgresPolicy } from '@supabase/postgres-meta'\n+import { isEmpty } from 'lodash'\n import Link from 'next/link'\n import { useCallback, useState } from 'react'\n import { toast } from 'sonner'\n@@ -10,6 +11,7 @@ import {\n } from 'components/interfaces/Auth/Policies/PolicyTableRow'\n import { ProtectedSchemaWarning } from 'components/interfaces/Database/ProtectedSchemaWarning'\n import { NoSearchResults } from 'components/ui/NoSearchResults'\n+import { useDatabasePolicyDeleteMutation } from 'data/database-policies/database-policy-delete-mutation'\n import { useTableUpdateMutation } from 'data/tables/table-update-mutation'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n import { Button, Card, CardContent } from 'ui'\n@@ -47,6 +49,8 @@ export const Policies = ({\n     name: string\n     rls_enabled: boolean\n   }>()\n+  const [selectedPolicyToDelete, setSelectedPolicyToDelete] = useState<any>({})\n+\n   const { mutate: updateTable } = useTableUpdateMutation({\n     onError: (error) => {\n       toast.error(`Failed to toggle RLS: ${error.message}`)\n@@ -56,7 +60,17 @@ export const Policies = ({\n     },\n   })\n \n+  const { mutate: deleteDatabasePolicy } = useDatabasePolicyDeleteMutation({\n+    onSuccess: () => {\n+      toast.success('Successfully deleted policy!')\n+    },\n+    onSettled: () => {\n+      closeConfirmModal()\n+    },\n+  })\n+\n   const closeConfirmModal = useCallback(() => {\n+    setSelectedPolicyToDelete({})\n     setSelectedTableToToggleRLS(undefined)\n   }, [])\n \n@@ -74,6 +88,10 @@ export const Policies = ({\n     [onSelectEditPolicyAI]\n   )\n \n+  const onSelectDeletePolicy = useCallback((policy: PostgresPolicy) => {\n+    setSelectedPolicyToDelete(policy)\n+  }, [])\n+\n   // Methods that involve some API\n   const onToggleRLS = async () => {\n     if (!selectedTableToToggleRLS) return console.error('Table is required')\n@@ -93,6 +111,15 @@ export const Policies = ({\n     })\n   }\n \n+  const onDeletePolicy = async () => {\n+    if (!project) return console.error('Project is required')\n+    deleteDatabasePolicy({\n+      projectRef: project.ref,\n+      connectionString: project.connectionString,\n+      originalPolicy: selectedPolicyToDelete,\n+    })\n+  }\n+\n   const handleCreatePolicy = useCallback(\n     (tableData: PolicyTableRowProps['table']) => {\n       onSelectCreatePolicy(tableData.name)\n@@ -134,6 +161,7 @@ export const Policies = ({\n                     onSelectToggleRLS={onSelectToggleRLS}\n                     onSelectCreatePolicy={handleCreatePolicy}\n                     onSelectEditPolicy={onSelectEditPolicy}\n+                    onSelectDeletePolicy={onSelectDeletePolicy}\n                   />\n                 </section>\n               )\n@@ -147,6 +175,17 @@ export const Policies = ({\n         ) : null}\n       </div>\n \n+      <ConfirmModal\n+        danger\n+        visible={!isEmpty(selectedPolicyToDelete)}\n+        title=\"Confirm to delete policy\"\n+        description={`This is permanent! Are you sure you want to delete the policy \"${selectedPolicyToDelete.name}\"`}\n+        buttonLabel=\"Delete\"\n+        buttonLoadingLabel=\"Deleting\"\n+        onSelectCancel={closeConfirmModal}\n+        onSelectConfirm={onDeletePolicy}\n+      />\n+\n       <ConfirmModal\n         danger={selectedTableToToggleRLS?.rls_enabled}\n         visible={selectedTableToToggleRLS !== undefined}\ndiff --git a/apps/studio/components/interfaces/Auth/Policies/PolicyTableRow/index.tsx b/apps/studio/components/interfaces/Auth/Policies/PolicyTableRow/index.tsx\nindex 1573edb0ad485..979b3061fb9d4 100644\n--- a/apps/studio/components/interfaces/Auth/Policies/PolicyTableRow/index.tsx\n+++ b/apps/studio/components/interfaces/Auth/Policies/PolicyTableRow/index.tsx\n@@ -37,6 +37,7 @@ export interface PolicyTableRowProps {\n   onSelectToggleRLS: (table: PolicyTable) => void\n   onSelectCreatePolicy: (table: PolicyTable) => void\n   onSelectEditPolicy: (policy: PostgresPolicy) => void\n+  onSelectDeletePolicy: (policy: PostgresPolicy) => void\n }\n \n const PolicyTableRowComponent = ({\n@@ -45,6 +46,7 @@ const PolicyTableRowComponent = ({\n   onSelectToggleRLS = noop,\n   onSelectCreatePolicy = noop,\n   onSelectEditPolicy = noop,\n+  onSelectDeletePolicy = noop,\n }: PolicyTableRowProps) => {\n   const { ref } = useParams()\n   const { data: project } = useSelectedProjectQuery()\n@@ -56,17 +58,6 @@ const PolicyTableRowComponent = ({\n     [getPoliciesForTable, table.schema, table.name]\n   )\n \n-  const deletingPolicyIdRef = useRef<string | null>(null)\n-\n-  const { setValue: setPolicyToDelete, value: policyToDelete } = useQueryStateWithSelect({\n-    urlKey: 'delete',\n-    select: (id: string) =>\n-      id ? policies?.find((policy) => policy.id.toString() === id) : undefined,\n-    enabled: !!policies,\n-    onError: (_error, selectedId) =>\n-      handleErrorOnDelete(deletingPolicyIdRef, selectedId, `Policy not found`),\n-  })\n-\n   // [Joshen] Changes here are so that warnings are more accurate and granular instead of purely relying if RLS is disabled or enabled\n   // The following scenarios are technically okay if the table has RLS disabled, in which it won't be publicly readable / writable\n   // - If the schema is not exposed through the API via Postgrest\n@@ -97,141 +88,96 @@ const PolicyTableRowComponent = ({\n \n   const showPolicies = !isPoliciesLoading && !isPoliciesError\n \n-  const { mutate: deleteDatabasePolicy } = useDatabasePolicyDeleteMutation({\n-    onSuccess: () => {\n-      toast.success('Successfully deleted policy!')\n-    },\n-    onSettled: () => {\n-      closeConfirmModal()\n-    },\n-    onError: () => {\n-      deletingPolicyIdRef.current = null\n-    },\n-  })\n-\n-  const closeConfirmModal = useCallback(() => {\n-    setPolicyToDelete(null)\n-  }, [])\n-\n-  const onSelectDeletePolicy = useCallback((policy: PostgresPolicy) => {\n-    setPolicyToDelete(policy.id.toString())\n-  }, [])\n-\n-  const onDeletePolicy = async () => {\n-    if (!project) return console.error('Project is required')\n-    if (!policyToDelete) return console.error('Policy is required')\n-\n-    deletingPolicyIdRef.current = policyToDelete.id.toString()\n-    deleteDatabasePolicy({\n-      projectRef: project.ref,\n-      connectionString: project.connectionString,\n-      originalPolicy: policyToDelete,\n-    })\n-  }\n-\n   return (\n-    <>\n-      <Card className={cn(isPubliclyReadableWritable && 'border-warning-500')}>\n-        <CardHeader\n-          className={cn(\n-            'py-3 px-4',\n-            (isPubliclyReadableWritable || rlsEnabledNoPolicies || !isTableExposedThroughAPI) &&\n-              'border-b-0'\n-          )}\n+    <Card className={cn(isPubliclyReadableWritable && 'border-warning-500')}>\n+      <CardHeader\n+        className={cn(\n+          'py-3 px-4',\n+          (isPubliclyReadableWritable || rlsEnabledNoPolicies || !isTableExposedThroughAPI) &&\n+            'border-b-0'\n+        )}\n+      >\n+        <PolicyTableRowHeader\n+          table={table}\n+          isLocked={isLocked}\n+          onSelectToggleRLS={onSelectToggleRLS}\n+          onSelectCreatePolicy={onSelectCreatePolicy}\n+        />\n+      </CardHeader>\n+\n+      {!isTableExposedThroughAPI && (\n+        <Admonition\n+          showIcon={false}\n+          type=\"warning\"\n+          className=\"mb-0 border-0 border-y rounded-none [&>div]:text-foreground-light h-[50px] py-0 flex items-center\"\n+        >\n+          No data will be selectable via Supabase APIs as this schema is not exposed. You may\n+          configure this in your project's{' '}\n+          <InlineLink href={`/project/${ref}/settings/api`}>API settings</InlineLink>.\n+        </Admonition>\n+      )}\n+\n+      {(isPubliclyReadableWritable || rlsEnabledNoPolicies) && isTableExposedThroughAPI && (\n+        <Alert_Shadcn_\n+          className=\"border-0 rounded-none mb-0 border-y h-[50px] py-0 flex items-center\"\n+          variant={isPubliclyReadableWritable ? 'warning' : 'default'}\n         >\n-          <PolicyTableRowHeader\n-            table={table}\n-            isLocked={isLocked}\n-            onSelectToggleRLS={onSelectToggleRLS}\n-            onSelectCreatePolicy={onSelectCreatePolicy}\n+          <AlertDescription_Shadcn_>\n+            {isPubliclyReadableWritable\n+              ? \"Anyone with your project's anonymous key can read, modify, or delete your data.\"\n+              : 'No data will be selectable via Supabase APIs because RLS is enabled but no policies have been created yet.'}\n+          </AlertDescription_Shadcn_>\n+        </Alert_Shadcn_>\n+      )}\n+\n+      {isPoliciesLoading && (\n+        <CardContent>\n+          <ShimmeringLoader />\n+        </CardContent>\n+      )}\n+\n+      {isPoliciesError && (\n+        <CardContent>\n+          <AlertError\n+            className=\"border-0 rounded-none\"\n+            error={policiesError}\n+            subject=\"Failed to retrieve policies\"\n           />\n-        </CardHeader>\n-\n-        {!isTableExposedThroughAPI && (\n-          <Admonition\n-            showIcon={false}\n-            type=\"warning\"\n-            className=\"mb-0 border-0 border-y rounded-none [&>div]:text-foreground-light h-[50px] py-0 flex items-center\"\n-          >\n-            No data will be selectable via Supabase APIs as this schema is not exposed. You may\n-            configure this in your project's{' '}\n-            <InlineLink href={`/project/${ref}/settings/api`}>API settings</InlineLink>.\n-          </Admonition>\n-        )}\n-\n-        {(isPubliclyReadableWritable || rlsEnabledNoPolicies) && isTableExposedThroughAPI && (\n-          <Alert_Shadcn_\n-            className=\"border-0 rounded-none mb-0 border-y h-[50px] py-0 flex items-center\"\n-            variant={isPubliclyReadableWritable ? 'warning' : 'default'}\n-          >\n-            <AlertDescription_Shadcn_>\n-              {isPubliclyReadableWritable\n-                ? \"Anyone with your project's anonymous key can read, modify, or delete your data.\"\n-                : 'No data will be selectable via Supabase APIs because RLS is enabled but no policies have been created yet.'}\n-            </AlertDescription_Shadcn_>\n-          </Alert_Shadcn_>\n-        )}\n-\n-        {isPoliciesLoading && (\n-          <CardContent>\n-            <ShimmeringLoader />\n-          </CardContent>\n-        )}\n-\n-        {isPoliciesError && (\n-          <CardContent>\n-            <AlertError\n-              className=\"border-0 rounded-none\"\n-              error={policiesError}\n-              subject=\"Failed to retrieve policies\"\n-            />\n-          </CardContent>\n-        )}\n-\n-        {showPolicies && (\n-          <CardContent className=\"p-0\">\n-            {policies.length === 0 ? (\n-              <p className=\"text-foreground-lighter text-sm p-4\">No policies created yet</p>\n-            ) : (\n-              <Table className=\"table-fixed\">\n-                <TableHeader>\n-                  <TableRow>\n-                    <TableHead className=\"w-[40%]\">Name</TableHead>\n-                    <TableHead className=\"w-[20%]\">Command</TableHead>\n-                    <TableHead className=\"w-[30%]\">Applied to</TableHead>\n-                    <TableHead className=\"text-right\">\n-                      <span className=\"sr-only\">Actions</span>\n-                    </TableHead>\n-                  </TableRow>\n-                </TableHeader>\n-                <TableBody>\n-                  {policies.map((policy) => (\n-                    <PolicyRow\n-                      key={policy.id}\n-                      policy={policy}\n-                      isLocked={isTableLocked}\n-                      onSelectEditPolicy={onSelectEditPolicy}\n-                      onSelectDeletePolicy={onSelectDeletePolicy}\n-                    />\n-                  ))}\n-                </TableBody>\n-              </Table>\n-            )}\n-          </CardContent>\n-        )}\n-      </Card>\n-\n-      <ConfirmModal\n-        danger\n-        visible={!!policyToDelete}\n-        title=\"Confirm to delete policy\"\n-        description={`This is permanent! Are you sure you want to delete the policy \"${policyToDelete?.name}\"`}\n-        buttonLabel=\"Delete\"\n-        buttonLoadingLabel=\"Deleting\"\n-        onSelectCancel={closeConfirmModal}\n-        onSelectConfirm={onDeletePolicy}\n-      />\n-    </>\n+        </CardContent>\n+      )}\n+\n+      {showPolicies && (\n+        <CardContent className=\"p-0\">\n+          {policies.length === 0 ? (\n+            <p className=\"text-foreground-lighter text-sm p-4\">No policies created yet</p>\n+          ) : (\n+            <Table className=\"table-fixed\">\n+              <TableHeader>\n+                <TableRow>\n+                  <TableHead className=\"w-[40%]\">Name</TableHead>\n+                  <TableHead className=\"w-[20%]\">Command</TableHead>\n+                  <TableHead className=\"w-[30%]\">Applied to</TableHead>\n+                  <TableHead className=\"text-right\">\n+                    <span className=\"sr-only\">Actions</span>\n+                  </TableHead>\n+                </TableRow>\n+              </TableHeader>\n+              <TableBody>\n+                {policies.map((policy) => (\n+                  <PolicyRow\n+                    key={policy.id}\n+                    policy={policy}\n+                    isLocked={isTableLocked}\n+                    onSelectEditPolicy={onSelectEditPolicy}\n+                    onSelectDeletePolicy={onSelectDeletePolicy}\n+                  />\n+                ))}\n+              </TableBody>\n+            </Table>\n+          )}\n+        </CardContent>\n+      )}\n+    </Card>\n   )\n }\n \n",
			"diffSize": 13793,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "a40ccc4b4538c077423fab84c848ced75900c569",
			"message": "chore: Clean `onSuccess` and `onError` props on `useQuery` (#40641)\n\n* Remove all onSuccess and onErrors from useQuery.\n\n* Minor fixes to all refetchInterval.\n\n* Fix smaller type issues.",
			"user": "ivasilov",
			"timestamp": "2025-11-20T13:08:56Z",
			"author": {
				"name": "Ivan Vasilov",
				"email": "vasilov.ivan@gmail.com",
				"username": "ivasilov"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Database/RestoreToNewProject/RestoreToNewProject.tsx",
					"apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx",
					"apps/studio/components/interfaces/Home/ServiceStatus.tsx",
					"apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx",
					"apps/studio/components/interfaces/Reports/ReportBlock/ReportBlock.tsx",
					"apps/studio/components/interfaces/Reports/SharedAPIReport/SharedAPIReport.constants.ts",
					"apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainConfig.tsx",
					"apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DeployNewReplicaPanel.tsx",
					"apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/InstanceConfiguration.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/NamespaceWithTables/index.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/useAnalyticsBucketWrapperInstance.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/useS3VectorsWrapperInstance.tsx",
					"apps/studio/components/layouts/ProjectLayout/BuildingState.tsx",
					"apps/studio/components/layouts/ProjectLayout/PausedState/PauseDisabledState.tsx",
					"apps/studio/components/layouts/ProjectLayout/PausingState.tsx",
					"apps/studio/components/layouts/ProjectLayout/RestoringState.tsx",
					"apps/studio/data/config/jwt-secret-updating-status-query.ts",
					"apps/studio/data/config/project-settings-v2-query.ts",
					"apps/studio/data/config/project-upgrade-status-query.ts",
					"apps/studio/data/projects/org-projects-infinite-query.ts",
					"apps/studio/data/projects/project-detail-query.ts",
					"apps/studio/hooks/misc/withAuth.tsx",
					"apps/studio/lib/profile.tsx",
					"apps/studio/pages/integrations/vercel/[slug]/deploy-button/new-project.tsx",
					"apps/studio/pages/project/[ref]/database/column-privileges.tsx",
					"apps/studio/pages/project/[ref]/observability/index.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Database/RestoreToNewProject/RestoreToNewProject.tsx b/apps/studio/components/interfaces/Database/RestoreToNewProject/RestoreToNewProject.tsx\nindex 7f3d0363c01e0..a04ce4010d2d0 100644\n--- a/apps/studio/components/interfaces/Database/RestoreToNewProject/RestoreToNewProject.tsx\n+++ b/apps/studio/components/interfaces/Database/RestoreToNewProject/RestoreToNewProject.tsx\n@@ -1,7 +1,7 @@\n import { PermissionAction } from '@supabase/shared-types/out/constants'\n import { Loader2 } from 'lucide-react'\n import Link from 'next/link'\n-import { useState } from 'react'\n+import { useEffect, useState } from 'react'\n \n import { PITRForm } from 'components/interfaces/Database/Backups/PITR/PITRForm'\n import { BackupsList } from 'components/interfaces/Database/Backups/RestoreToNewProject/BackupsList'\n@@ -28,7 +28,7 @@ import {\n import { DOCS_URL, PROJECT_STATUS } from 'lib/constants'\n import { getDatabaseMajorVersion } from 'lib/helpers'\n import { Alert_Shadcn_, AlertDescription_Shadcn_, AlertTitle_Shadcn_, Button } from 'ui'\n-import { Admonition } from 'ui-patterns'\n+import { Admonition } from 'ui-patterns/admonition'\n import { PreviousRestoreItem } from './PreviousRestoreItem'\n \n export const RestoreToNewProject = () => {\n@@ -75,6 +75,7 @@ export const RestoreToNewProject = () => {\n     data: cloneStatus,\n     refetch: refetchCloneStatus,\n     isLoading: cloneStatusLoading,\n+    isSuccess: isCloneStatusSuccess,\n   } = useCloneStatusQuery(\n     {\n       projectRef: project?.ref,\n@@ -82,16 +83,20 @@ export const RestoreToNewProject = () => {\n     {\n       refetchInterval,\n       refetchOnWindowFocus: false,\n-      onSuccess: (data) => {\n-        const hasTransientState = data?.clones.some((c) => c.status === 'IN_PROGRESS')\n-        if (!hasTransientState) setRefetchInterval(false)\n-      },\n       enabled: PHYSICAL_BACKUPS_ENABLED || PITR_ENABLED,\n     }\n   )\n   const IS_CLONED_PROJECT = cloneStatus?.cloned_from?.source_project?.ref ? true : false\n   const isLoading = !isPermissionsLoaded || cloneBackupsLoading || cloneStatusLoading\n \n+  useEffect(() => {\n+    if (!isCloneStatusSuccess) return\n+    const hasTransientState = cloneStatus.clones.some((c) => c.status === 'IN_PROGRESS')\n+    if (!hasTransientState) {\n+      setRefetchInterval(false)\n+    }\n+  }, [cloneStatus?.clones, isCloneStatusSuccess])\n+\n   const previousClones = cloneStatus?.clones\n   const isRestoring = previousClones?.some((c) => c.status === 'IN_PROGRESS')\n   const restoringClone = previousClones?.find((c) => c.status === 'IN_PROGRESS')\ndiff --git a/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx b/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx\nindex b86b291ce5399..5ff32c1e12ff3 100644\n--- a/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx\n+++ b/apps/studio/components/interfaces/DiskManagement/DiskManagementForm.tsx\n@@ -24,6 +24,7 @@ import { useProjectAddonUpdateMutation } from 'data/subscriptions/project-addon-\n import { useProjectAddonsQuery } from 'data/subscriptions/project-addons-query'\n import { AddonVariantId } from 'data/subscriptions/types'\n import { useResourceWarningsQuery } from 'data/usage/resource-warnings-query'\n+import { useCheckEntitlements } from 'hooks/misc/useCheckEntitlements'\n import { useAsyncCheckPermissions } from 'hooks/misc/useCheckPermissions'\n import { useSelectedOrganizationQuery } from 'hooks/misc/useSelectedOrganization'\n import {\n@@ -64,7 +65,6 @@ import {\n } from './ui/DiskManagement.constants'\n import { NoticeBar } from './ui/NoticeBar'\n import { SpendCapDisabledSection } from './ui/SpendCapDisabledSection'\n-import { useCheckEntitlements } from 'hooks/misc/useCheckEntitlements'\n \n export function DiskManagementForm() {\n   const { ref: projectRef } = useParams()\n@@ -104,29 +104,10 @@ export function DiskManagementForm() {\n     {\n       refetchInterval,\n       refetchOnWindowFocus: false,\n-      onSuccess: (data) => {\n-        // @ts-ignore\n-        const { type, iops, throughput_mbps, size_gb } = data?.attributes ?? { size_gb: 0 }\n-        const formValues = {\n-          storageType: type,\n-          provisionedIOPS: iops,\n-          throughput: throughput_mbps,\n-          totalSize: size_gb,\n-        }\n-\n-        if (!('requested_modification' in data)) {\n-          if (refetchInterval !== false) {\n-            form.reset(formValues)\n-            setRefetchInterval(false)\n-            toast.success('Disk configuration changes have been successfully applied!')\n-          }\n-        } else {\n-          setRefetchInterval(2000)\n-        }\n-      },\n       enabled: project != null && isAws,\n     }\n   )\n+\n   const { isSuccess: isAddonsSuccess } = useProjectAddonsQuery({ projectRef })\n   const { isWithinCooldownWindow, isSuccess: isCooldownSuccess } =\n     useRemainingDurationForDiskAttributeUpdate({\n@@ -173,6 +154,28 @@ export function DiskManagementForm() {\n     reValidateMode: 'onChange',\n   })\n \n+  useEffect(() => {\n+    if (!isDiskAttributesSuccess) return\n+    // @ts-ignore\n+    const { type, iops, throughput_mbps, size_gb } = data?.attributes ?? { size_gb: 0 }\n+    const formValues = {\n+      storageType: type,\n+      provisionedIOPS: iops,\n+      throughput: throughput_mbps,\n+      totalSize: size_gb,\n+    }\n+\n+    if (!('requested_modification' in data)) {\n+      if (refetchInterval !== false) {\n+        form.reset(formValues)\n+        setRefetchInterval(false)\n+        toast.success('Disk configuration changes have been successfully applied!')\n+      }\n+    } else {\n+      setRefetchInterval(2000)\n+    }\n+  }, [data, isDiskAttributesSuccess, form, refetchInterval])\n+\n   const { computeSize: modifiedComputeSize } = form.watch()\n \n   // We only support disk configurations for >=Large instances\ndiff --git a/apps/studio/components/interfaces/Home/ServiceStatus.tsx b/apps/studio/components/interfaces/Home/ServiceStatus.tsx\nindex a0c6dc343e4f2..95226b175ed6f 100644\n--- a/apps/studio/components/interfaces/Home/ServiceStatus.tsx\n+++ b/apps/studio/components/interfaces/Home/ServiceStatus.tsx\n@@ -123,7 +123,9 @@ export const ServiceStatus = () => {\n       projectRef: ref,\n     },\n     {\n-      refetchInterval: (data) => (data?.some((service) => !service.healthy) ? 5000 : false),\n+      refetchInterval: (data) => {\n+        return data?.some((service) => !service.healthy) ? 5000 : false\n+      },\n     }\n   )\n   const { data: edgeFunctionsStatus, refetch: refetchEdgeFunctionServiceStatus } =\n@@ -132,7 +134,9 @@ export const ServiceStatus = () => {\n         projectRef: ref,\n       },\n       {\n-        refetchInterval: (data) => (!data?.healthy ? 5000 : false),\n+        refetchInterval: (data) => {\n+          return !data?.healthy ? 5000 : false\n+        },\n       }\n     )\n \ndiff --git a/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx b/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\nindex 23d77e00f5706..62278cfabeb3b 100644\n--- a/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\n+++ b/apps/studio/components/interfaces/HomeNew/ServiceStatus.tsx\n@@ -109,7 +109,11 @@ export const ServiceStatus = () => {\n   // [Joshen] Need pooler service check eventually\n   const { data: status, isLoading } = useProjectServiceStatusQuery(\n     { projectRef: ref },\n-    { refetchInterval: (data) => (data?.some((service) => !service.healthy) ? 5000 : false) }\n+    {\n+      refetchInterval: (data) => {\n+        return data?.some((service) => !service.healthy) ? 5000 : false\n+      },\n+    }\n   )\n   const { data: edgeFunctionsStatus } = useEdgeFunctionServiceStatusQuery(\n     { projectRef: ref },\ndiff --git a/apps/studio/components/interfaces/Reports/ReportBlock/ReportBlock.tsx b/apps/studio/components/interfaces/Reports/ReportBlock/ReportBlock.tsx\nindex e70d6e2ae3649..cd2f16e973a2f 100644\n--- a/apps/studio/components/interfaces/Reports/ReportBlock/ReportBlock.tsx\n+++ b/apps/studio/components/interfaces/Reports/ReportBlock/ReportBlock.tsx\n@@ -1,5 +1,5 @@\n import { X } from 'lucide-react'\n-import { useCallback, useState } from 'react'\n+import { useCallback, useEffect, useState } from 'react'\n import { toast } from 'sonner'\n \n import { useParams } from 'common'\n@@ -49,7 +49,7 @@ export const ReportBlock = ({\n \n   const isSnippet = item.attribute.startsWith('snippet_')\n \n-  const { data, error, isLoading } = useContentIdQuery(\n+  const { data, error, isLoading, isSuccess } = useContentIdQuery(\n     { projectRef, id: item.id },\n     {\n       enabled: isSnippet && !!item.id,\n@@ -60,13 +60,9 @@ export const ReportBlock = ({\n         if (failureCount >= 2) return false\n         return true\n       },\n-      onSuccess: (contentData) => {\n-        if (!isSnippet) return\n-        const fetchedSql = (contentData?.content as SqlSnippets.Content | undefined)?.sql\n-        if (fetchedSql) runQuery('select', fetchedSql)\n-      },\n     }\n   )\n+\n   const sql = isSnippet ? (data?.content as SqlSnippets.Content)?.sql : undefined\n   const chartConfig = { ...DEFAULT_CHART_CONFIG, ...(item.chartConfig ?? {}) }\n   const isDeprecatedChart = DEPRECATED_REPORTS.includes(item.attribute)\n@@ -131,6 +127,15 @@ export const ReportBlock = ({\n     [projectRef, readOnlyConnectionString, postgresConnectionString, executeSql]\n   )\n \n+  useEffect(() => {\n+    if (!isSuccess) return\n+    if (!isSnippet) return\n+    const fetchedSql = (data?.content as SqlSnippets.Content | undefined)?.sql\n+    if (fetchedSql) {\n+      runQuery('select', fetchedSql)\n+    }\n+  }, [data, isSuccess, runQuery, isSnippet])\n+\n   const sqlHasChanged = useChangedSync(sql)\n   const isRefreshingChanged = useChangedSync(isRefreshing)\n   if (sqlHasChanged || (isRefreshingChanged && isRefreshing)) {\ndiff --git a/apps/studio/components/interfaces/Reports/SharedAPIReport/SharedAPIReport.constants.ts b/apps/studio/components/interfaces/Reports/SharedAPIReport/SharedAPIReport.constants.ts\nindex 768925edf862e..2684c59b5697b 100644\n--- a/apps/studio/components/interfaces/Reports/SharedAPIReport/SharedAPIReport.constants.ts\n+++ b/apps/studio/components/interfaces/Reports/SharedAPIReport/SharedAPIReport.constants.ts\n@@ -1,11 +1,12 @@\n-import { get } from 'data/fetchers'\n-import { generateRegexpWhere } from '../Reports.constants'\n-import { ReportFilterItem } from '../Reports.types'\n-import { useQueries, useQueryClient } from '@tanstack/react-query'\n import * as Sentry from '@sentry/nextjs'\n+import { useQueries, useQueryClient } from '@tanstack/react-query'\n+import { isEqual } from 'lodash'\n import { useState } from 'react'\n+\n import { useParams } from 'common'\n-import { isEqual } from 'lodash'\n+import { get } from 'data/fetchers'\n+import { generateRegexpWhere } from '../Reports.constants'\n+import { ReportFilterItem } from '../Reports.types'\n \n export const SHARED_API_REPORT_SQL = {\n   totalRequests: {\n@@ -303,7 +304,7 @@ export const useSharedAPIReport = ({\n \n   const error = keys.reduce(\n     (acc, key, i) => {\n-      acc[key] = queries[i].error as string\n+      acc[key] = queries[i].error as unknown as string\n       return acc\n     },\n     {} as { [K in keyof typeof SHARED_API_REPORT_SQL]: string }\ndiff --git a/apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainConfig.tsx b/apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainConfig.tsx\nindex 5c1078f72e6d1..a3b2c3d553e9a 100644\n--- a/apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainConfig.tsx\n+++ b/apps/studio/components/interfaces/Settings/General/CustomDomainConfig/CustomDomainConfig.tsx\n@@ -39,7 +39,7 @@ export const CustomDomainConfig = () => {\n   } = useCustomDomainsQuery(\n     { projectRef: ref },\n     {\n-      refetchInterval(data) {\n+      refetchInterval: (data) => {\n         // while setting up the ssl certificate, we want to poll every 5 seconds\n         if (data?.customDomain?.ssl.status) {\n           return 10000 // 10 seconds\ndiff --git a/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DeployNewReplicaPanel.tsx b/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DeployNewReplicaPanel.tsx\nindex 3d975a7696167..a17cc594e5833 100644\n--- a/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DeployNewReplicaPanel.tsx\n+++ b/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/DeployNewReplicaPanel.tsx\n@@ -125,7 +125,7 @@ const DeployNewReplicaPanel = ({\n   const [selectedRegion, setSelectedRegion] = useState<string>(defaultRegion)\n   const [selectedCompute, setSelectedCompute] = useState(defaultCompute)\n \n-  useProjectDetailQuery(\n+  const { data: projectDetail, isSuccess: isProjectDetailSuccess } = useProjectDetailQuery(\n     { ref: projectRef },\n     {\n       refetchInterval,\n@@ -136,6 +136,13 @@ const DeployNewReplicaPanel = ({\n     }\n   )\n \n+  useEffect(() => {\n+    if (!isProjectDetailSuccess) return\n+    if (projectDetail.is_physical_backups_enabled) {\n+      setRefetchInterval(false)\n+    }\n+  }, [projectDetail?.is_physical_backups_enabled, isProjectDetailSuccess])\n+\n   const { mutate: enablePhysicalBackups, isLoading: isEnabling } = useEnablePhysicalBackupsMutation(\n     {\n       onSuccess: () => {\ndiff --git a/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/InstanceConfiguration.tsx b/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/InstanceConfiguration.tsx\nindex 336708e60850f..579c84cf36394 100644\n--- a/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/InstanceConfiguration.tsx\n+++ b/apps/studio/components/interfaces/Settings/Infrastructure/InfrastructureConfiguration/InstanceConfiguration.tsx\n@@ -3,7 +3,7 @@ import { partition } from 'lodash'\n import { ChevronDown, Globe2, Loader2, Network } from 'lucide-react'\n import { useTheme } from 'next-themes'\n import Link from 'next/link'\n-import { useEffect, useMemo, useRef, useState } from 'react'\n+import { useEffect, useMemo, useState } from 'react'\n import ReactFlow, { Background, Edge, ReactFlowProvider, useReactFlow } from 'reactflow'\n import 'reactflow/dist/style.css'\n \n@@ -54,8 +54,7 @@ const InstanceConfigurationUI = ({ diagramOnly = false }: InstanceConfigurationU\n   const isOrioleDb = useIsOrioleDb()\n   const { resolvedTheme } = useTheme()\n   const { ref: projectRef } = useParams()\n-  const numTransition = useRef<number>()\n-  const { data: project, isLoading: isLoadingProject } = useSelectedProjectQuery()\n+  const { isLoading: isLoadingProject } = useSelectedProjectQuery()\n \n   const isAws = useIsAwsCloudProvider()\n   const { infrastructureReadReplicas } = useIsFeatureEnabled(['infrastructure:read_replicas'])\n@@ -63,7 +62,7 @@ const InstanceConfigurationUI = ({ diagramOnly = false }: InstanceConfigurationU\n   const [view, setView] = useState<'flow' | 'map'>('flow')\n   const [showDeleteAllModal, setShowDeleteAllModal] = useState(false)\n   const { showNewReplicaPanel, setShowNewReplicaPanel } = useShowNewReplicaPanel()\n-  const [refetchInterval, setRefetchInterval] = useState<number | boolean>(10000)\n+  const [refetchInterval, setRefetchInterval] = useState<number | false>(10000)\n   const [newReplicaRegion, setNewReplicaRegion] = useState<AWS_REGIONS_KEYS>()\n   const [selectedReplicaToDrop, setSelectedReplicaToDrop] = useState<Database>()\n   const [selectedReplicaToRestart, setSelectedReplicaToRestart] = useState<Database>()\n@@ -74,9 +73,7 @@ const InstanceConfigurationUI = ({ diagramOnly = false }: InstanceConfigurationU\n     data: loadBalancers,\n     refetch: refetchLoadBalancers,\n     isSuccess: isSuccessLoadBalancers,\n-  } = useLoadBalancersQuery({\n-    projectRef,\n-  })\n+  } = useLoadBalancersQuery({ projectRef })\n   const {\n     data,\n     error,\n@@ -84,50 +81,57 @@ const InstanceConfigurationUI = ({ diagramOnly = false }: InstanceConfigurationU\n     isLoading,\n     isError,\n     isSuccess: isSuccessReplicas,\n-  } = useReadReplicasQuery({\n-    projectRef,\n-  })\n+  } = useReadReplicasQuery({ projectRef })\n   const [[primary], replicas] = useMemo(\n     () => partition(data ?? [], (db) => db.identifier === projectRef),\n     [data, projectRef]\n   )\n \n-  useReadReplicasStatusesQuery(\n-    { projectRef },\n-    {\n-      refetchInterval: refetchInterval as any,\n-      refetchOnWindowFocus: false,\n-      onSuccess: async (res) => {\n-        const fixedStatues = [\n-          REPLICA_STATUS.ACTIVE_HEALTHY,\n-          REPLICA_STATUS.ACTIVE_UNHEALTHY,\n-          REPLICA_STATUS.INIT_READ_REPLICA_FAILED,\n-        ]\n-        const replicasInTransition = res.filter((db) => {\n-          const { status } = db.replicaInitializationStatus || {}\n-          return (\n-            !fixedStatues.includes(db.status) || status === ReplicaInitializationStatus.InProgress\n-          )\n-        })\n-        const hasTransientStatus = replicasInTransition.length > 0\n+  const { data: replicasStatuses, isSuccess: isSuccessReplicasStatuses } =\n+    useReadReplicasStatusesQuery(\n+      { projectRef },\n+      {\n+        refetchInterval: refetchInterval,\n+        refetchOnWindowFocus: false,\n+      }\n+    )\n \n-        // If any replica's status has changed, refetch databases\n-        if (\n-          numTransition.current !== replicasInTransition.length ||\n-          res.length !== (data ?? []).length\n-        ) {\n-          numTransition.current = replicasInTransition.length\n-          await refetchReplicas()\n-          setTimeout(() => refetchLoadBalancers(), 2000)\n-        }\n+  const numReplicas = useMemo(() => data?.length ?? 0, [data])\n+  useEffect(() => {\n+    if (!isSuccessReplicasStatuses) return\n+    const refetch = async () => {\n+      const fixedStatues = [\n+        REPLICA_STATUS.ACTIVE_HEALTHY,\n+        REPLICA_STATUS.ACTIVE_UNHEALTHY,\n+        REPLICA_STATUS.INIT_READ_REPLICA_FAILED,\n+      ]\n+      const replicasInTransition = replicasStatuses.filter((db) => {\n+        const { status } = db.replicaInitializationStatus || {}\n+        return (\n+          !fixedStatues.includes(db.status) || status === ReplicaInitializationStatus.InProgress\n+        )\n+      })\n+      const hasTransientStatus = replicasInTransition.length > 0\n+\n+      // If any replica's status has changed, refetch databases\n+      if (replicasStatuses.length !== numReplicas) {\n+        await refetchReplicas()\n+        setTimeout(() => refetchLoadBalancers(), 2000)\n+      }\n \n-        // If all replicas are active healthy, stop fetching statuses\n-        if (!hasTransientStatus) {\n-          setRefetchInterval(false)\n-        }\n-      },\n+      // If all replicas are active healthy, stop fetching statuses\n+      if (!hasTransientStatus) {\n+        setRefetchInterval(false)\n+      }\n     }\n-  )\n+    refetch()\n+  }, [\n+    numReplicas,\n+    isSuccessReplicasStatuses,\n+    refetchLoadBalancers,\n+    refetchReplicas,\n+    replicasStatuses,\n+  ])\n \n   const backgroundPatternColor =\n     resolvedTheme === 'dark' ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 0, 0, 0.4)'\ndiff --git a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/NamespaceWithTables/index.tsx b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/NamespaceWithTables/index.tsx\nindex ac3cb1721012e..41f4eee9ad7ae 100644\n--- a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/NamespaceWithTables/index.tsx\n+++ b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/NamespaceWithTables/index.tsx\n@@ -72,7 +72,8 @@ export const NamespaceWithTables = ({\n       projectRef,\n     },\n     {\n-      refetchInterval: (data = []) => {\n+      refetchInterval: (_data) => {\n+        const data = _data ?? []\n         if (pollIntervalNamespaceTables === 0) return false\n \n         const publicationTables = publication?.tables ?? []\ndiff --git a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx\nindex f5aa488a70cac..5bac33e4abe49 100644\n--- a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx\n+++ b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx\n@@ -122,7 +122,8 @@ export const AnalyticBucketDetails = () => {\n       warehouse: wrapperValues.warehouse,\n     },\n     {\n-      refetchInterval: (data = []) => {\n+      refetchInterval: (_data) => {\n+        const data = _data ?? []\n         if (pollIntervalNamespaces === 0) return false\n \n         const publicationTableSchemas = publication?.tables.map((x) => x.schema) ?? []\ndiff --git a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/useAnalyticsBucketWrapperInstance.tsx b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/useAnalyticsBucketWrapperInstance.tsx\nindex 795b2b810115e..904aff4879610 100644\n--- a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/useAnalyticsBucketWrapperInstance.tsx\n+++ b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/useAnalyticsBucketWrapperInstance.tsx\n@@ -5,13 +5,13 @@ import {\n   getWrapperMetaForWrapper,\n   wrapperMetaComparator,\n } from 'components/interfaces/Integrations/Wrappers/Wrappers.utils'\n-import { type FDW, useFDWsQuery } from 'data/fdw/fdws-query'\n+import { useFDWsQuery } from 'data/fdw/fdws-query'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n import { getAnalyticsBucketFDWName } from './AnalyticsBucketDetails.utils'\n \n export const useAnalyticsBucketWrapperInstance = (\n   { bucketId }: { bucketId?: string },\n-  options?: { enabled?: boolean; refetchInterval?: (data: FDW[] | undefined) => number | false }\n+  options?: { enabled?: boolean }\n ) => {\n   const { data: project, isLoading: isLoadingProject } = useSelectedProjectQuery()\n \n@@ -21,11 +21,7 @@ export const useAnalyticsBucketWrapperInstance = (\n       projectRef: project?.ref,\n       connectionString: project?.connectionString,\n     },\n-    {\n-      enabled: defaultEnabled && !!bucketId,\n-      refetchInterval: (data) =>\n-        !!options?.refetchInterval ? options.refetchInterval(data) : false,\n-    }\n+    { enabled: defaultEnabled && !!bucketId }\n   )\n \n   const icebergWrapper = useMemo(() => {\ndiff --git a/apps/studio/components/interfaces/Storage/VectorBuckets/useS3VectorsWrapperInstance.tsx b/apps/studio/components/interfaces/Storage/VectorBuckets/useS3VectorsWrapperInstance.tsx\nindex ad110ddc018cf..6de0785647488 100644\n--- a/apps/studio/components/interfaces/Storage/VectorBuckets/useS3VectorsWrapperInstance.tsx\n+++ b/apps/studio/components/interfaces/Storage/VectorBuckets/useS3VectorsWrapperInstance.tsx\n@@ -5,26 +5,20 @@ import {\n   WRAPPERS,\n } from 'components/interfaces/Integrations/Wrappers/Wrappers.constants'\n import { wrapperMetaComparator } from 'components/interfaces/Integrations/Wrappers/Wrappers.utils'\n-import { type FDW, useFDWsQuery } from 'data/fdw/fdws-query'\n+import { useFDWsQuery } from 'data/fdw/fdws-query'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n import { getVectorBucketFDWName } from './VectorBuckets.utils'\n \n-export const useS3VectorsWrapperInstance = (\n-  { bucketId }: { bucketId?: string },\n-  options?: { enabled?: boolean; refetchInterval?: (data: FDW[] | undefined) => number | false }\n-) => {\n+export const useS3VectorsWrapperInstance = ({ bucketId }: { bucketId?: string }) => {\n   const { data: project, isLoading: isLoadingProject } = useSelectedProjectQuery()\n \n-  const defaultEnabled = options?.enabled ?? true\n   const { data, isLoading: isLoadingFDWs } = useFDWsQuery(\n     {\n       projectRef: project?.ref,\n       connectionString: project?.connectionString,\n     },\n     {\n-      enabled: defaultEnabled && !!bucketId,\n-      refetchInterval: (data) =>\n-        !!options?.refetchInterval ? options.refetchInterval(data) : false,\n+      enabled: !!bucketId,\n     }\n   )\n \ndiff --git a/apps/studio/components/layouts/ProjectLayout/BuildingState.tsx b/apps/studio/components/layouts/ProjectLayout/BuildingState.tsx\nindex 5093a6af9b3f5..b370556cea56e 100644\n--- a/apps/studio/components/layouts/ProjectLayout/BuildingState.tsx\n+++ b/apps/studio/components/layouts/ProjectLayout/BuildingState.tsx\n@@ -1,5 +1,6 @@\n import { ArrowRight, Loader2 } from 'lucide-react'\n import Link from 'next/link'\n+import { useEffect } from 'react'\n \n import { useParams } from 'common'\n import { ClientLibrary } from 'components/interfaces/Home/ClientLibrary'\n@@ -30,22 +31,32 @@ const BuildingState = () => {\n     'project_homepage:client_libraries',\n   ])\n \n-  useProjectStatusQuery(\n+  const { data: projectStatusData, isSuccess: isProjectStatusSuccess } = useProjectStatusQuery(\n     { projectRef: ref },\n     {\n       enabled: project?.status !== PROJECT_STATUS.ACTIVE_HEALTHY,\n-      refetchInterval: (res) => {\n-        return res?.status === PROJECT_STATUS.ACTIVE_HEALTHY ? false : 4000\n-      },\n-      onSuccess: async (res) => {\n-        if (res.status === PROJECT_STATUS.ACTIVE_HEALTHY) {\n-          if (ref) await invalidateProjectDetailsQuery(ref)\n-          await invalidateProjectsQuery()\n-        }\n+      refetchInterval: (data) => {\n+        return data?.status === PROJECT_STATUS.ACTIVE_HEALTHY ? false : 4000\n       },\n     }\n   )\n \n+  useEffect(() => {\n+    if (!isProjectStatusSuccess) return\n+    if (projectStatusData?.status === PROJECT_STATUS.ACTIVE_HEALTHY) {\n+      if (ref) {\n+        invalidateProjectDetailsQuery(ref)\n+      }\n+      invalidateProjectsQuery()\n+    }\n+  }, [\n+    isProjectStatusSuccess,\n+    projectStatusData,\n+    ref,\n+    invalidateProjectDetailsQuery,\n+    invalidateProjectsQuery,\n+  ])\n+\n   if (project === undefined) return null\n \n   return (\ndiff --git a/apps/studio/components/layouts/ProjectLayout/PausedState/PauseDisabledState.tsx b/apps/studio/components/layouts/ProjectLayout/PausedState/PauseDisabledState.tsx\nindex 965f16e067844..51e89c816db2c 100644\n--- a/apps/studio/components/layouts/ProjectLayout/PausedState/PauseDisabledState.tsx\n+++ b/apps/studio/components/layouts/ProjectLayout/PausedState/PauseDisabledState.tsx\n@@ -1,5 +1,5 @@\n import { ChevronDown, Download, ExternalLink } from 'lucide-react'\n-import { useState } from 'react'\n+import { useEffect, useState } from 'react'\n import { toast } from 'sonner'\n \n import { useParams } from 'common'\n@@ -35,21 +35,24 @@ export const PauseDisabledState = () => {\n   )\n   const latestBackup = pauseStatus?.latest_downloadable_backup_id\n \n-  const { data: storageArchive } = useStorageArchiveQuery(\n+  const { data: storageArchive, isSuccess: isStorageArchiveSuccess } = useStorageArchiveQuery(\n     { projectRef: ref },\n     {\n       refetchInterval,\n       refetchOnWindowFocus: false,\n-      onSuccess: (data) => {\n-        if (data.fileUrl && refetchInterval !== false) {\n-          toast.success('Downloading storage objects', { id: toastId })\n-          setToastId(undefined)\n-          setRefetchInterval(false)\n-          downloadStorageArchive(data.fileUrl)\n-        }\n-      },\n     }\n   )\n+\n+  useEffect(() => {\n+    if (!isStorageArchiveSuccess) return\n+    if (storageArchive.fileUrl && refetchInterval !== false) {\n+      toast.success('Downloading storage objects', { id: toastId })\n+      setToastId(undefined)\n+      setRefetchInterval(false)\n+      downloadStorageArchive(storageArchive.fileUrl)\n+    }\n+  }, [isStorageArchiveSuccess, storageArchive, refetchInterval])\n+\n   const storageArchiveUrl = storageArchive?.fileUrl\n \n   const { mutate: downloadBackup } = useBackupDownloadMutation({\ndiff --git a/apps/studio/components/layouts/ProjectLayout/PausingState.tsx b/apps/studio/components/layouts/ProjectLayout/PausingState.tsx\nindex 8da3e98a85503..07509eb308fc8 100644\n--- a/apps/studio/components/layouts/ProjectLayout/PausingState.tsx\n+++ b/apps/studio/components/layouts/ProjectLayout/PausingState.tsx\n@@ -19,22 +19,32 @@ const PausingState = ({ project }: PausingStateProps) => {\n   const { invalidateProjectsQuery } = useInvalidateProjectsInfiniteQuery()\n   const { invalidateProjectDetailsQuery } = useInvalidateProjectDetailsQuery()\n \n-  useProjectStatusQuery(\n+  const { data: projectStatusData, isSuccess: isProjectStatusSuccess } = useProjectStatusQuery(\n     { projectRef: ref },\n     {\n       enabled: startPolling,\n-      refetchInterval: (res) => {\n-        return res?.status === PROJECT_STATUS.INACTIVE ? false : 2000\n-      },\n-      onSuccess: async (res) => {\n-        if (res.status === PROJECT_STATUS.INACTIVE) {\n-          if (ref) await invalidateProjectDetailsQuery(ref)\n-          await invalidateProjectsQuery()\n-        }\n+      refetchInterval: (data) => {\n+        return data?.status === PROJECT_STATUS.INACTIVE ? false : 2000\n       },\n     }\n   )\n \n+  useEffect(() => {\n+    if (!isProjectStatusSuccess) return\n+    if (projectStatusData?.status === PROJECT_STATUS.INACTIVE) {\n+      if (ref) {\n+        invalidateProjectDetailsQuery(ref)\n+      }\n+      invalidateProjectsQuery()\n+    }\n+  }, [\n+    isProjectStatusSuccess,\n+    projectStatusData,\n+    ref,\n+    invalidateProjectDetailsQuery,\n+    invalidateProjectsQuery,\n+  ])\n+\n   useEffect(() => {\n     setTimeout(() => setStartPolling(true), 4000)\n   }, [])\ndiff --git a/apps/studio/components/layouts/ProjectLayout/RestoringState.tsx b/apps/studio/components/layouts/ProjectLayout/RestoringState.tsx\nindex 3dd61bc05b43d..d39bd4a382f4f 100644\n--- a/apps/studio/components/layouts/ProjectLayout/RestoringState.tsx\n+++ b/apps/studio/components/layouts/ProjectLayout/RestoringState.tsx\n@@ -1,5 +1,5 @@\n import { CheckCircle, Download, Loader } from 'lucide-react'\n-import { useState } from 'react'\n+import { useEffect, useState } from 'react'\n \n import { SupportCategories } from '@supabase/shared-types/out/constants'\n import { useParams } from 'common'\n@@ -12,6 +12,7 @@ import { useProjectStatusQuery } from 'data/projects/project-status-query'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n import { PROJECT_STATUS } from 'lib/constants'\n import { Button } from 'ui'\n+import status from 'http-status'\n \n const RestoringState = () => {\n   const { ref } = useParams()\n@@ -26,23 +27,27 @@ const RestoringState = () => {\n \n   const { invalidateProjectDetailsQuery } = useInvalidateProjectDetailsQuery()\n \n-  useProjectStatusQuery(\n+  const { data: projectStatusData, isSuccess: isProjectStatusSuccess } = useProjectStatusQuery(\n     { projectRef: ref },\n     {\n       enabled: project?.status !== PROJECT_STATUS.ACTIVE_HEALTHY,\n-      refetchInterval: (res) => {\n-        return res?.status === PROJECT_STATUS.ACTIVE_HEALTHY ? false : 4000\n-      },\n-      onSuccess: async (res) => {\n-        if (res.status === PROJECT_STATUS.ACTIVE_HEALTHY) {\n-          setIsCompleted(true)\n-        } else {\n-          if (ref) invalidateProjectDetailsQuery(ref)\n-        }\n+      refetchInterval: (data) => {\n+        return data?.status === PROJECT_STATUS.ACTIVE_HEALTHY ? false : 4000\n       },\n     }\n   )\n \n+  useEffect(() => {\n+    if (!isProjectStatusSuccess) return\n+    if (projectStatusData.status === PROJECT_STATUS.ACTIVE_HEALTHY) {\n+      setIsCompleted(true)\n+    } else {\n+      if (ref) {\n+        invalidateProjectDetailsQuery(ref)\n+      }\n+    }\n+  }, [isProjectStatusSuccess, projectStatusData, ref, invalidateProjectDetailsQuery])\n+\n   const { mutate: downloadBackup, isLoading: isDownloading } = useBackupDownloadMutation({\n     onSuccess: (res) => {\n       const { fileUrl } = res\ndiff --git a/apps/studio/data/config/jwt-secret-updating-status-query.ts b/apps/studio/data/config/jwt-secret-updating-status-query.ts\nindex 2aa7cbe86bede..6e7e4831e5539 100644\n--- a/apps/studio/data/config/jwt-secret-updating-status-query.ts\n+++ b/apps/studio/data/config/jwt-secret-updating-status-query.ts\n@@ -1,5 +1,7 @@\n import { JwtSecretUpdateStatus } from '@supabase/shared-types/out/events'\n import { useQuery, useQueryClient } from '@tanstack/react-query'\n+import { useEffect } from 'react'\n+\n import { get, handleError } from 'data/fetchers'\n import { UseCustomQueryOptions } from 'types'\n import { configKeys } from './keys'\n@@ -54,7 +56,7 @@ export const useJwtSecretUpdatingStatusQuery = <TData = JwtSecretUpdatingStatusD\n ) => {\n   const client = useQueryClient()\n \n-  return useQuery<JwtSecretUpdatingStatusData, JwtSecretUpdatingStatusError, TData>({\n+  const query = useQuery({\n     queryKey: configKeys.jwtSecretUpdatingStatus(projectRef),\n     queryFn: ({ signal }) => getJwtSecretUpdatingStatus({ projectRef }, signal),\n     enabled: enabled && typeof projectRef !== 'undefined',\n@@ -69,9 +71,14 @@ export const useJwtSecretUpdatingStatusQuery = <TData = JwtSecretUpdatingStatusD\n \n       return interval\n     },\n-    onSuccess() {\n-      client.invalidateQueries(configKeys.postgrest(projectRef))\n-    },\n+\n     ...options,\n   })\n+\n+  useEffect(() => {\n+    if (!query.isSuccess) return\n+    client.invalidateQueries({ queryKey: configKeys.postgrest(projectRef) })\n+  }, [query.isSuccess, projectRef, client])\n+\n+  return query\n }\ndiff --git a/apps/studio/data/config/project-settings-v2-query.ts b/apps/studio/data/config/project-settings-v2-query.ts\nindex f43729766e0ef..4bced094db3d5 100644\n--- a/apps/studio/data/config/project-settings-v2-query.ts\n+++ b/apps/studio/data/config/project-settings-v2-query.ts\n@@ -54,7 +54,7 @@ export const useProjectSettingsV2Query = <TData = ProjectSettingsData>(\n     queryFn: ({ signal }) => getProjectSettings({ projectRef }, signal),\n     enabled: enabled && typeof projectRef !== 'undefined',\n     refetchInterval(_data) {\n-      const data = _data as ProjectSettings | undefined\n+      const data = _data as ProjectSettingsData | undefined\n       const apiKeys = data?.service_api_keys ?? []\n       const interval =\n         canReadAPIKeys && data?.status !== 'INACTIVE' && apiKeys.length === 0 ? 2000 : 0\ndiff --git a/apps/studio/data/config/project-upgrade-status-query.ts b/apps/studio/data/config/project-upgrade-status-query.ts\nindex a2eb8233f18e3..98b22b8e614d3 100644\n--- a/apps/studio/data/config/project-upgrade-status-query.ts\n+++ b/apps/studio/data/config/project-upgrade-status-query.ts\n@@ -1,9 +1,11 @@\n import { DatabaseUpgradeStatus } from '@supabase/shared-types/out/events'\n import { useQuery, useQueryClient } from '@tanstack/react-query'\n+import { useEffect } from 'react'\n+\n import { get, handleError } from 'data/fetchers'\n import { PROJECT_STATUS } from 'lib/constants'\n-import { configKeys } from './keys'\n import { UseCustomQueryOptions } from 'types'\n+import { configKeys } from './keys'\n \n export type ProjectUpgradingStatusVariables = {\n   projectRef?: string\n@@ -43,7 +45,7 @@ export const useProjectUpgradingStatusQuery = <TData = ProjectUpgradingStatusDat\n ) => {\n   const client = useQueryClient()\n \n-  return useQuery<ProjectUpgradingStatusData, ProjectUpgradingStatusError, TData>({\n+  const query = useQuery({\n     queryKey: configKeys.upgradeStatus(projectRef),\n     queryFn: ({ signal }) => getProjectUpgradingStatus({ projectRef, trackingId }, signal),\n     enabled: enabled && typeof projectRef !== 'undefined',\n@@ -62,12 +64,17 @@ export const useProjectUpgradingStatusQuery = <TData = ProjectUpgradingStatusDat\n \n       return interval\n     },\n-    onSuccess(data) {\n-      const response = data as unknown as ProjectUpgradingStatusData\n-      if (response.databaseUpgradeStatus?.status === DatabaseUpgradeStatus.Upgraded) {\n-        client.invalidateQueries(configKeys.upgradeEligibility(projectRef))\n-      }\n-    },\n+\n     ...options,\n   })\n+\n+  useEffect(() => {\n+    if (!query.isSuccess) return\n+    const response = query.data as unknown as ProjectUpgradingStatusData\n+    if (response.databaseUpgradeStatus?.status === DatabaseUpgradeStatus.Upgraded) {\n+      client.invalidateQueries({ queryKey: configKeys.upgradeEligibility(projectRef) })\n+    }\n+  }, [query.isSuccess, query.data, projectRef, client])\n+\n+  return query\n }\ndiff --git a/apps/studio/data/projects/org-projects-infinite-query.ts b/apps/studio/data/projects/org-projects-infinite-query.ts\nindex ea367e8d11042..855fbf61c1169 100644\n--- a/apps/studio/data/projects/org-projects-infinite-query.ts\n+++ b/apps/studio/data/projects/org-projects-infinite-query.ts\n@@ -1,4 +1,5 @@\n import { useInfiniteQuery, useQueryClient } from '@tanstack/react-query'\n+import { useCallback } from 'react'\n \n import { components } from 'api-types'\n import { get, handleError } from 'data/fetchers'\n@@ -93,8 +94,8 @@ export const getComputeSize = (project: OrgProject) => {\n \n export const useInvalidateProjectsInfiniteQuery = () => {\n   const queryClient = useQueryClient()\n-  const invalidateProjectsQuery = () => {\n+  const invalidateProjectsQuery = useCallback(() => {\n     return queryClient.invalidateQueries({ queryKey: [INFINITE_PROJECTS_KEY_PREFIX] })\n-  }\n+  }, [queryClient])\n   return { invalidateProjectsQuery }\n }\ndiff --git a/apps/studio/data/projects/project-detail-query.ts b/apps/studio/data/projects/project-detail-query.ts\nindex 8ba90592c07a3..432833bfa7077 100644\n--- a/apps/studio/data/projects/project-detail-query.ts\n+++ b/apps/studio/data/projects/project-detail-query.ts\n@@ -1,4 +1,5 @@\n import { QueryClient, useQuery, useQueryClient } from '@tanstack/react-query'\n+import { useCallback } from 'react'\n \n import type { components } from 'data/api'\n import { get, handleError, isValidConnString } from 'data/fetchers'\n@@ -74,9 +75,12 @@ export function prefetchProjectDetail(client: QueryClient, { ref }: ProjectDetai\n export const useInvalidateProjectDetailsQuery = () => {\n   const queryClient = useQueryClient()\n \n-  const invalidateProjectDetailsQuery = (ref: string) => {\n-    return queryClient.invalidateQueries({ queryKey: projectKeys.detail(ref) })\n-  }\n+  const invalidateProjectDetailsQuery = useCallback(\n+    (ref: string) => {\n+      return queryClient.invalidateQueries({ queryKey: projectKeys.detail(ref) })\n+    },\n+    [queryClient]\n+  )\n \n   return { invalidateProjectDetailsQuery }\n }\ndiff --git a/apps/studio/hooks/misc/withAuth.tsx b/apps/studio/hooks/misc/withAuth.tsx\nindex e88fd610ae4fd..2e4588f21ed94 100644\n--- a/apps/studio/hooks/misc/withAuth.tsx\n+++ b/apps/studio/hooks/misc/withAuth.tsx\n@@ -39,21 +39,30 @@ export function withAuth<T>(\n     const timeoutIdRef = useRef<NodeJS.Timeout | null>(null)\n     const [isSessionTimeoutModalOpen, setIsSessionTimeoutModalOpen] = useState(false)\n \n-    const { isLoading: isAALLoading, data: aalData } = useAuthenticatorAssuranceLevelQuery({\n-      onError(error) {\n+    const {\n+      isLoading: isAALLoading,\n+      data: aalData,\n+      isError: isErrorAAL,\n+      error: errorAAL,\n+    } = useAuthenticatorAssuranceLevelQuery()\n+\n+    useEffect(() => {\n+      if (isErrorAAL) {\n         toast.error(\n-          `Failed to fetch authenticator assurance level: ${error.message}. Try refreshing your browser, or reach out to us via a support ticket if the issue persists`\n+          `Failed to fetch authenticator assurance level: ${errorAAL?.message}. Try refreshing your browser, or reach out to us via a support ticket if the issue persists`\n         )\n-      },\n-    })\n+      }\n+    }, [isErrorAAL, errorAAL])\n \n-    usePermissionsQuery({\n-      onError(error: any) {\n+    const { isError: isErrorPermissions, error: errorPermissions } = usePermissionsQuery()\n+\n+    useEffect(() => {\n+      if (isErrorPermissions) {\n         toast.error(\n-          `Failed to fetch permissions: ${error.message}. Try refreshing your browser, or reach out to us via a support ticket if the issue persists`\n+          `Failed to fetch permissions: ${errorPermissions?.message}. Try refreshing your browser, or reach out to us via a support ticket if the issue persists`\n         )\n-      },\n-    })\n+      }\n+    }, [isErrorPermissions, errorPermissions])\n \n     const isLoggedIn = Boolean(session)\n     const isFinishedLoading = !isLoading && !isAALLoading\ndiff --git a/apps/studio/lib/profile.tsx b/apps/studio/lib/profile.tsx\nindex 1970d60ad2d86..0a971f27bf336 100644\n--- a/apps/studio/lib/profile.tsx\n+++ b/apps/studio/lib/profile.tsx\n@@ -1,6 +1,6 @@\n import * as Sentry from '@sentry/nextjs'\n import { useRouter } from 'next/router'\n-import { PropsWithChildren, createContext, useContext, useMemo } from 'react'\n+import { PropsWithChildren, createContext, useContext, useEffect, useMemo } from 'react'\n import { toast } from 'sonner'\n \n import { useIsLoggedIn, useUser } from 'common'\n@@ -77,22 +77,24 @@ export const ProfileProvider = ({ children }: PropsWithChildren<{}>) => {\n     isSuccess,\n   } = useProfileQuery({\n     enabled: isLoggedIn,\n-    onError(err) {\n-      // if the user does not yet exist, create a profile for them\n-      if (err.message === \"User's profile not found\") {\n-        createProfile()\n-      }\n-\n-      // [Alaister] If the user has a bad auth token, auth-js won't know about it\n-      // and will think the user is authenticated. Since fetching the profile happens\n-      // on every page load, we can check for a 401 here and sign the user out if\n-      // they have a bad token.\n-      if (err.code === 401) {\n-        signOut().then(() => router.push('/sign-in'))\n-      }\n-    },\n   })\n \n+  useEffect(() => {\n+    if (!isError) return\n+    // if the user does not yet exist, create a profile for them\n+    if (error?.message === \"User's profile not found\") {\n+      createProfile()\n+    }\n+\n+    // [Alaister] If the user has a bad auth token, auth-js won't know about it\n+    // and will think the user is authenticated. Since fetching the profile happens\n+    // on every page load, we can check for a 401 here and sign the user out if\n+    // they have a bad token.\n+    if (error?.code === 401) {\n+      signOut().then(() => router.push('/sign-in'))\n+    }\n+  }, [error, signOut, router, createProfile, isError])\n+\n   const { isInitialLoading: isLoadingPermissions } = usePermissionsQuery({ enabled: isLoggedIn })\n \n   const value = useMemo(() => {\ndiff --git a/apps/studio/pages/integrations/vercel/[slug]/deploy-button/new-project.tsx b/apps/studio/pages/integrations/vercel/[slug]/deploy-button/new-project.tsx\nindex d96812b48ada5..49beed946d27d 100644\n--- a/apps/studio/pages/integrations/vercel/[slug]/deploy-button/new-project.tsx\n+++ b/apps/studio/pages/integrations/vercel/[slug]/deploy-button/new-project.tsx\n@@ -1,5 +1,5 @@\n import { useParams } from 'common'\n-import { ChangeEvent, useState } from 'react'\n+import { ChangeEvent, useEffect, useState } from 'react'\n import { toast } from 'sonner'\n import { Alert, Button, Checkbox, Input, Listbox } from 'ui'\n \n@@ -152,7 +152,7 @@ const CreateProject = () => {\n   }\n \n   // Wait for the new project to be created before creating the connection\n-  useProjectSettingsV2Query(\n+  const { data, isSuccess } = useProjectSettingsV2Query(\n     { projectRef: newProjectRef },\n     {\n       enabled: newProjectRef !== undefined,\n@@ -160,46 +160,50 @@ const CreateProject = () => {\n       refetchInterval: (data) => {\n         return ((data?.service_api_keys ?? []).length ?? 0) > 0 ? false : 1000\n       },\n-      async onSuccess(data) {\n-        const isReady = (data?.service_api_keys ?? []).length > 0\n+    }\n+  )\n+  useEffect(() => {\n+    if (!isSuccess) return\n+    const onSuccessFunc = async () => {\n+      const isReady = (data.service_api_keys ?? []).length > 0\n \n-        if (!isReady || !organizationIntegration || !foreignProjectId || !newProjectRef) {\n-          return\n-        }\n+      if (!isReady || !organizationIntegration || !foreignProjectId || !newProjectRef) {\n+        return\n+      }\n \n-        const projectDetails = vercelProjects?.find((x: any) => x.id === foreignProjectId)\n+      const projectDetails = vercelProjects?.find((x: any) => x.id === foreignProjectId)\n \n-        try {\n-          const { id: connectionId } = await createConnections({\n-            organizationIntegrationId: organizationIntegration?.id,\n-            connection: {\n-              foreign_project_id: foreignProjectId,\n-              supabase_project_ref: newProjectRef,\n-              integration_id: '0',\n-              metadata: {\n-                ...projectDetails,\n-                supabaseConfig: {\n-                  projectEnvVars: {\n-                    write: true,\n-                  },\n+      try {\n+        await createConnections({\n+          organizationIntegrationId: organizationIntegration?.id,\n+          connection: {\n+            foreign_project_id: foreignProjectId,\n+            supabase_project_ref: newProjectRef,\n+            integration_id: '0',\n+            metadata: {\n+              ...projectDetails,\n+              supabaseConfig: {\n+                projectEnvVars: {\n+                  write: true,\n                 },\n               },\n             },\n-            orgSlug: selectedOrganization?.slug,\n-          })\n-        } catch (error) {\n-          console.error('An error occurred during createConnections:', error)\n-          return\n-        }\n+          },\n+          orgSlug: selectedOrganization?.slug,\n+        })\n+      } catch (error) {\n+        console.error('An error occurred during createConnections:', error)\n+        return\n+      }\n \n-        snapshot.setLoading(false)\n+      snapshot.setLoading(false)\n \n-        if (next && isVercelUrl(next)) {\n-          window.location.href = next\n-        }\n-      },\n+      if (next && isVercelUrl(next)) {\n+        window.location.href = next\n+      }\n     }\n-  )\n+    onSuccessFunc()\n+  }, [data, isSuccess])\n \n   return (\n     <div>\ndiff --git a/apps/studio/pages/project/[ref]/database/column-privileges.tsx b/apps/studio/pages/project/[ref]/database/column-privileges.tsx\nindex 6b39bbab9f22d..a2921a2cd6c4f 100644\n--- a/apps/studio/pages/project/[ref]/database/column-privileges.tsx\n+++ b/apps/studio/pages/project/[ref]/database/column-privileges.tsx\n@@ -1,7 +1,7 @@\n import { LOCAL_STORAGE_KEYS, useParams } from 'common'\n import { AlertCircle, XIcon } from 'lucide-react'\n import Link from 'next/link'\n-import { useCallback, useMemo, useState } from 'react'\n+import { useCallback, useEffect, useMemo, useState } from 'react'\n import { toast } from 'sonner'\n \n import {\n@@ -47,23 +47,24 @@ const PrivilegesPage: NextPageWithLayout = () => {\n   const [selectedTable, setSelectedTable] = useState<string | undefined>(paramTable)\n   const [selectedRole, setSelectedRole] = useState<string>('authenticated')\n \n-  const { data: tableList, isLoading: isLoadingTables } = useTablesQuery(\n-    {\n-      projectRef: project?.ref,\n-      connectionString: project?.connectionString,\n-    },\n-    {\n-      onSuccess(data) {\n-        const tables = data\n-          .filter((table) => table.schema === selectedSchema)\n-          .map((table) => table.name)\n-\n-        if (tables[0] && selectedTable === undefined) {\n-          setSelectedTable(tables[0])\n-        }\n-      },\n+  const {\n+    data: tableList,\n+    isLoading: isLoadingTables,\n+    isSuccess: isSuccessTables,\n+  } = useTablesQuery({\n+    projectRef: project?.ref,\n+    connectionString: project?.connectionString,\n+  })\n+\n+  useEffect(() => {\n+    if (!isSuccessTables) return\n+    const tables = tableList\n+      .filter((table) => table.schema === selectedSchema)\n+      .map((table) => table.name)\n+    if (tables[0] && selectedTable === undefined) {\n+      setSelectedTable(tables[0])\n     }\n-  )\n+  }, [isSuccessTables, tableList, selectedSchema, selectedTable])\n \n   const { data: allRoles, isLoading: isLoadingRoles } = useDatabaseRolesQuery({\n     projectRef: project?.ref,\ndiff --git a/apps/studio/pages/project/[ref]/observability/index.tsx b/apps/studio/pages/project/[ref]/observability/index.tsx\nindex 522f1772c44bd..67cf5b12f8ce5 100644\n--- a/apps/studio/pages/project/[ref]/observability/index.tsx\n+++ b/apps/studio/pages/project/[ref]/observability/index.tsx\n@@ -1,6 +1,6 @@\n import { PermissionAction } from '@supabase/shared-types/out/constants'\n import { useRouter } from 'next/router'\n-import { useState } from 'react'\n+import { useEffect, useState } from 'react'\n \n import { useParams } from 'common'\n import { CreateReportModal } from 'components/interfaces/Reports/CreateReportModal'\n@@ -20,21 +20,20 @@ export const UserReportPage: NextPageWithLayout = () => {\n   const { profile } = useProfile()\n   const [showCreateReportModal, setShowCreateReportModal] = useState(false)\n \n-  const { isLoading } = useContentQuery(\n-    {\n-      projectRef: ref,\n-      type: 'report',\n-    },\n-    {\n-      onSuccess: (data) => {\n-        const reports = data.content\n-          .filter((x) => x.type === 'report')\n-          .sort((a, b) => a.name.localeCompare(b.name))\n-        if (reports.length >= 1) router.push(`/project/${ref}/observability/${reports[0].id}`)\n-        if (reports.length === 0) router.push(`/project/${ref}/observability/api-overview`)\n-      },\n-    }\n-  )\n+  const { isLoading, isSuccess, data } = useContentQuery({\n+    projectRef: ref,\n+    type: 'report',\n+  })\n+\n+  useEffect(() => {\n+    if (!isSuccess) return\n+\n+    const reports = data.content\n+      .filter((x) => x.type === 'report')\n+      .sort((a, b) => a.name.localeCompare(b.name))\n+    if (reports.length >= 1) router.push(`/project/${ref}/observability/${reports[0].id}`)\n+    if (reports.length === 0) router.push(`/project/${ref}/observability/api-overview`)\n+  }, [isSuccess, data, router, ref])\n \n   const { can: canCreateReport } = useAsyncCheckPermissions(\n     PermissionAction.CREATE,\n",
			"diffSize": 49552,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "1d73d0c36e1326af485a0d1fe066a5b9ef583464",
			"message": "chore: entitlement checks for log drains (#40589)\n\n* feat: integrate entitlement checks for log drains functionality\n\n- Added useCheckEntitlements hook to LogDrains and LogDrainsSettings components.\n- Updated logic to enable log drains based on entitlement access instead of organization plan.\n- Adjusted loading states to handle entitlement checks appropriately.\n\n* fixes",
			"user": "ignaciodob",
			"timestamp": "2025-11-20T12:16:53Z",
			"author": {
				"name": "Ignacio Dobronich",
				"email": "ignacio@dobronich.com",
				"username": "ignaciodob"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/LogDrains/LogDrains.tsx",
					"apps/studio/pages/project/[ref]/settings/log-drains.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/LogDrains/LogDrains.tsx b/apps/studio/components/interfaces/LogDrains/LogDrains.tsx\nindex 2cde18f44f70d..cae9260be8da7 100644\n--- a/apps/studio/components/interfaces/LogDrains/LogDrains.tsx\n+++ b/apps/studio/components/interfaces/LogDrains/LogDrains.tsx\n@@ -29,6 +29,7 @@ import { LOG_DRAIN_TYPES, LogDrainType } from './LogDrains.constants'\n import { LogDrainsCard } from './LogDrainsCard'\n import { LogDrainsEmpty } from './LogDrainsEmpty'\n import { VoteLink } from './VoteLink'\n+import { useCheckEntitlements } from 'hooks/misc/useCheckEntitlements'\n \n export function LogDrains({\n   onNewDrainClick,\n@@ -37,8 +38,8 @@ export function LogDrains({\n   onNewDrainClick: (src: LogDrainType) => void\n   onUpdateDrainClick: (drain: LogDrainData) => void\n }) {\n-  const { isLoading: orgPlanLoading, plan } = useCurrentOrgPlan()\n-  const logDrainsEnabled = !orgPlanLoading && (plan?.id === 'team' || plan?.id === 'enterprise')\n+  const { hasAccess: hasAccessToLogDrains, isLoading: isLoadingEntitlement } =\n+    useCheckEntitlements('log_drains')\n   const track = useTrack()\n   const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false)\n   const [selectedLogDrain, setSelectedLogDrain] = useState<LogDrainData | null>(null)\n@@ -52,7 +53,7 @@ export function LogDrains({\n   } = useLogDrainsQuery(\n     { ref },\n     {\n-      enabled: logDrainsEnabled,\n+      enabled: hasAccessToLogDrains,\n     }\n   )\n   const sentryEnabled = useFlag('SentryLogDrain')\n@@ -70,11 +71,7 @@ export function LogDrains({\n     },\n   })\n \n-  if (!orgPlanLoading && !logDrainsEnabled) {\n-    return <LogDrainsEmpty />\n-  }\n-\n-  if (isLoading || orgPlanLoading) {\n+  if (isLoading || isLoadingEntitlement) {\n     return (\n       <div>\n         <GenericSkeletonLoader />\n@@ -82,6 +79,10 @@ export function LogDrains({\n     )\n   }\n \n+  if (!isLoadingEntitlement && !hasAccessToLogDrains) {\n+    return <LogDrainsEmpty />\n+  }\n+\n   if (!isLoading && !hasLogDrains) {\n     return (\n       <>\ndiff --git a/apps/studio/pages/project/[ref]/settings/log-drains.tsx b/apps/studio/pages/project/[ref]/settings/log-drains.tsx\nindex 744ac8f4ebe1b..1674d5bd8bcb3 100644\n--- a/apps/studio/pages/project/[ref]/settings/log-drains.tsx\n+++ b/apps/studio/pages/project/[ref]/settings/log-drains.tsx\n@@ -33,6 +33,7 @@ import { PageLayout } from 'components/layouts/PageLayout/PageLayout'\n import { ChevronDown } from 'lucide-react'\n import { cloneElement } from 'react'\n import ConfirmationModal from 'ui-patterns/Dialogs/ConfirmationModal'\n+import { useCheckEntitlements } from 'hooks/misc/useCheckEntitlements'\n \n const LogDrainsSettings: NextPageWithLayout = () => {\n   const { can: canManageLogDrains, isLoading: isLoadingPermissions } = useAsyncCheckPermissions(\n@@ -48,11 +49,13 @@ const LogDrainsSettings: NextPageWithLayout = () => {\n     useState<LogDrainCreateVariables | null>(null)\n   const [mode, setMode] = useState<'create' | 'update'>('create')\n \n-  const { plan, isLoading: planLoading } = useCurrentOrgPlan()\n+  const { hasAccess: hasAccessToLogDrains, isLoading: isLoadingEntitlement } =\n+    useCheckEntitlements('log_drains')\n \n-  const logDrainsEnabled = !planLoading && (plan?.id === 'team' || plan?.id === 'enterprise')\n-\n-  const { data: logDrains } = useLogDrainsQuery({ ref }, { enabled: logDrainsEnabled })\n+  const { data: logDrains } = useLogDrainsQuery(\n+    { ref },\n+    { enabled: !isLoadingEntitlement && hasAccessToLogDrains }\n+  )\n \n   const { mutate: createLogDrain, isLoading: createLoading } = useCreateLogDrainMutation({\n     onSuccess: () => {\n@@ -178,7 +181,7 @@ const LogDrainsSettings: NextPageWithLayout = () => {\n   )\n \n   // [kemal]: Ordinarily <PageLayout /> would be bundled with the getLayout function below, however in this case we need access to some bits for the \"Add destination\" button to render as part of the in-built page header in <PageLayout />.\n-  if (logDrainsEnabled && !planLoading) {\n+  if (!isLoadingEntitlement && hasAccessToLogDrains) {\n     return (\n       <PageLayout\n         title=\"Log Drains\"\n@@ -188,7 +191,7 @@ const LogDrainsSettings: NextPageWithLayout = () => {\n             {!(logDrains?.length === 0) && (\n               <div className=\"flex items-center\">\n                 <Button\n-                  disabled={!logDrainsEnabled || !canManageLogDrains}\n+                  disabled={!hasAccessToLogDrains || !canManageLogDrains}\n                   onClick={() => {\n                     setSelectedLogDrain(null)\n                     setMode('create')\n",
			"diffSize": 4535,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "0f8f77134aa2cf7dbe84c6ad92f417a199c5eee4",
			"message": "chore: Update Supabase URL in analytics bucket guide (#40616)\n\n* Update Supabase URL in analytics bucket guide\n\n* style: line breaks in code blocks\n\n---------\n\nCo-authored-by: Charis Lam <26616127+charislam@users.noreply.github.com>",
			"user": "ivasilov",
			"timestamp": "2025-11-20T10:02:15Z",
			"author": {
				"name": "Ivan Vasilov",
				"email": "vasilov.ivan@gmail.com",
				"username": "ivasilov"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/docs/content/guides/storage/analytics/creating-analytics-buckets.mdx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/docs/content/guides/storage/analytics/creating-analytics-buckets.mdx b/apps/docs/content/guides/storage/analytics/creating-analytics-buckets.mdx\nindex a37c854c99455..16f0b3831a0d4 100644\n--- a/apps/docs/content/guides/storage/analytics/creating-analytics-buckets.mdx\n+++ b/apps/docs/content/guides/storage/analytics/creating-analytics-buckets.mdx\n@@ -16,12 +16,17 @@ You can create an Analytics Bucket using either the Supabase SDK or the Supabase\n \n ### Using the Supabase SDK\n \n+{/* prettier-ignore */}\n ```ts\n import { createClient } from '@supabase/supabase-js'\n \n-const supabase = createClient('https://xyzcompany.supabase.co', 'publishable-or-anon-key')\n+const supabase = createClient(\n+  'https://your-project.supabase.co',\n+  'publishable-or-anon-key'\n+)\n \n-const { data, error } = await supabase.storage.analytics.createBucket('analytics-data')\n+const { data, error } =\n+  await supabase.storage.analytics.createBucket('analytics-data')\n ```\n \n ### Using the Supabase Dashboard\n",
			"diffSize": 1005,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "b3706fcc144e5ba522777701d2d928d3fc36a3f0",
			"message": "param routing: storage buckets (#40559)\n\n* param routing: storage buckets\n* update CreateBucketModal test to work with nuqs\n\n---------\n\nCo-authored-by: Ali Waseem <waseema393@gmail.com>",
			"user": "fsansalvadore",
			"timestamp": "2025-11-20T08:43:31Z",
			"author": {
				"name": "Francesco Sansalvadore",
				"email": "f.sansalvadore@gmail.com",
				"username": "fsansalvadore"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx",
					"apps/studio/components/interfaces/Storage/AnalyticsBuckets/CreateAnalyticsBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/CreateBucketModal.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorBucketDialog.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx",
					"apps/studio/components/interfaces/Storage/VectorBuckets/VectorBucketDetails.tsx",
					"apps/studio/components/interfaces/Storage/__tests__/CreateBucketModal.test.tsx",
					"apps/studio/components/interfaces/Storage/__tests__/DeleteBucketModal.test.tsx",
					"apps/studio/pages/project/[ref]/storage/files/buckets/[bucketId].tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx\nindex be540ab147369..f5aa488a70cac 100644\n--- a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx\n+++ b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/AnalyticsBucketDetails/index.tsx\n@@ -3,6 +3,7 @@ import { Loader2, SquarePlus } from 'lucide-react'\n import Link from 'next/link'\n import { useRouter } from 'next/router'\n import { useEffect, useMemo, useState } from 'react'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n \n import { useParams } from 'common'\n import { INTEGRATIONS } from 'components/interfaces/Integrations/Landing/Integrations.constants'\n@@ -53,7 +54,10 @@ export const AnalyticBucketDetails = () => {\n     isError: isErrorBucket,\n   } = useSelectedAnalyticsBucket()\n \n-  const [modal, setModal] = useState<'delete' | null>(null)\n+  const [showDeleteModal, setShowDeleteModal] = useQueryState(\n+    'delete',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n   // [Joshen] Namespaces are now created asynchronously when the pipeline is started, so long poll after\n   // updating connected tables until namespaces are updated\n   // Namespace would just be the schema (Which is currently limited to public)\n@@ -331,7 +335,7 @@ export const AnalyticBucketDetails = () => {\n                 <Button\n                   type=\"danger\"\n                   disabled={!bucket?.name || !isSuccessBucket}\n-                  onClick={() => setModal('delete')}\n+                  onClick={() => setShowDeleteModal(true)}\n                 >\n                   Delete bucket\n                 </Button>\n@@ -342,9 +346,9 @@ export const AnalyticBucketDetails = () => {\n       )}\n \n       <DeleteAnalyticsBucketModal\n-        visible={modal === `delete`}\n+        visible={showDeleteModal}\n         bucketId={bucket?.name}\n-        onClose={() => setModal(null)}\n+        onClose={() => setShowDeleteModal(false)}\n         onSuccess={() => router.push(`/project/${projectRef}/storage/analytics`)}\n       />\n     </>\ndiff --git a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/CreateAnalyticsBucketModal.tsx b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/CreateAnalyticsBucketModal.tsx\nindex e49a3035251f8..8fac15884b7c3 100644\n--- a/apps/studio/components/interfaces/Storage/AnalyticsBuckets/CreateAnalyticsBucketModal.tsx\n+++ b/apps/studio/components/interfaces/Storage/AnalyticsBuckets/CreateAnalyticsBucketModal.tsx\n@@ -6,6 +6,7 @@ import { useState } from 'react'\n import { SubmitHandler, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import z from 'zod'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n \n import { useParams } from 'common'\n import { ButtonTooltip } from 'components/ui/ButtonTooltip'\n@@ -103,7 +104,10 @@ export const CreateAnalyticsBucketModal = ({\n   const { extension: wrappersExtension, state: wrappersExtensionState } =\n     useIcebergWrapperExtension()\n \n-  const [visible, setVisible] = useState(false)\n+  const [visible, setVisible] = useQueryState(\n+    'new',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n \n   const { data: buckets = [], isLoading } = useAnalyticsBucketsQuery({ projectRef: ref })\n   const icebergCatalogEnabled = useIsAnalyticsBucketsEnabled({ projectRef: ref })\ndiff --git a/apps/studio/components/interfaces/Storage/CreateBucketModal.tsx b/apps/studio/components/interfaces/Storage/CreateBucketModal.tsx\nindex a9b8eb011bb22..f9f6757980123 100644\n--- a/apps/studio/components/interfaces/Storage/CreateBucketModal.tsx\n+++ b/apps/studio/components/interfaces/Storage/CreateBucketModal.tsx\n@@ -5,6 +5,7 @@ import { useState } from 'react'\n import { SubmitHandler, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import z from 'zod'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n \n import { useParams } from 'common'\n import { StorageSizeUnits } from 'components/interfaces/Storage/StorageSettings/StorageSettings.constants'\n@@ -99,7 +100,10 @@ export const CreateBucketModal = ({\n   const { ref } = useParams()\n   const { data: org } = useSelectedOrganizationQuery()\n \n-  const [visible, setVisible] = useState(false)\n+  const [visible, setVisible] = useQueryState(\n+    'new',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n   const [selectedUnit, setSelectedUnit] = useState<string>(StorageSizeUnits.MB)\n   const [hasAllowedMimeTypes, setHasAllowedMimeTypes] = useState(false)\n \ndiff --git a/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorBucketDialog.tsx b/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorBucketDialog.tsx\nindex 34f3a3b6692fa..41f02b87e4030 100644\n--- a/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorBucketDialog.tsx\n+++ b/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorBucketDialog.tsx\n@@ -5,6 +5,7 @@ import { useEffect, useState } from 'react'\n import { SubmitHandler, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import z from 'zod'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n \n import { useParams } from 'common'\n import { ButtonTooltip } from 'components/ui/ButtonTooltip'\n@@ -69,7 +70,10 @@ export const CreateVectorBucketDialog = () => {\n   const { data: project } = useSelectedProjectQuery()\n   const [isLoading, setIsLoading] = useState(false)\n \n-  const [visible, setVisible] = useState(false)\n+  const [visible, setVisible] = useQueryState(\n+    'new',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n   const { can: canCreateBuckets } = useAsyncCheckPermissions(PermissionAction.STORAGE_WRITE, '*')\n \n   const { data } = useVectorBucketsQuery({ projectRef: ref })\ndiff --git a/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx b/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx\nindex fe9d82bffa2e3..964c2864bf05e 100644\n--- a/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx\n+++ b/apps/studio/components/interfaces/Storage/VectorBuckets/CreateVectorTableSheet.tsx\n@@ -5,6 +5,7 @@ import { useEffect, useState } from 'react'\n import { SubmitHandler, useFieldArray, useForm } from 'react-hook-form'\n import { toast } from 'sonner'\n import z from 'zod'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n \n import { ButtonTooltip } from 'components/ui/ButtonTooltip'\n import { DocsButton } from 'components/ui/DocsButton'\n@@ -106,7 +107,10 @@ interface CreateVectorTableSheetProps {\n export const CreateVectorTableSheet = ({ bucketName }: CreateVectorTableSheetProps) => {\n   const { data: project } = useSelectedProjectQuery()\n \n-  const [visible, setVisible] = useState(false)\n+  const [visible, setVisible] = useQueryState(\n+    'newTable',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n   const { can: canCreateBuckets } = useAsyncCheckPermissions(PermissionAction.STORAGE_WRITE, '*')\n \n   const { data: wrapperInstance } = useS3VectorsWrapperInstance({ bucketId: bucketName })\ndiff --git a/apps/studio/components/interfaces/Storage/VectorBuckets/VectorBucketDetails.tsx b/apps/studio/components/interfaces/Storage/VectorBuckets/VectorBucketDetails.tsx\nindex 5ac57c708fb7f..b09d31dd93d9d 100644\n--- a/apps/studio/components/interfaces/Storage/VectorBuckets/VectorBucketDetails.tsx\n+++ b/apps/studio/components/interfaces/Storage/VectorBuckets/VectorBucketDetails.tsx\n@@ -1,8 +1,9 @@\n import { Eye, MoreVertical, Search, Trash2 } from 'lucide-react'\n import Link from 'next/link'\n import { useRouter } from 'next/router'\n-import { useState } from 'react'\n+import { useRef, useState } from 'react'\n import { toast } from 'sonner'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n \n import { useParams } from 'common'\n import { WrapperMeta } from 'components/interfaces/Integrations/Wrappers/Wrappers.types'\n@@ -24,6 +25,7 @@ import {\n   VectorBucketIndex,\n } from 'data/storage/vector-buckets-indexes-query'\n import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n+import { handleErrorOnDelete, useQueryStateWithSelect } from 'hooks/misc/useQueryStateWithSelect'\n import { DOCS_URL } from 'lib/constants'\n import {\n   Button,\n@@ -57,9 +59,14 @@ export const VectorBucketDetails = () => {\n   // [Joshen] Use the list buckets to verify that the bucket exists first before fetching bucket details\n   const { data: _bucket, isSuccess } = useSelectedVectorBucket()\n \n+  // Track the ID being deleted to exclude it from error checking\n+  const deletingTableIdRef = useRef<string | null>(null)\n+\n   const [filterString, setFilterString] = useState('')\n-  const [showDeleteModal, setShowDeleteModal] = useState(false)\n-  const [selectedTableToDelete, setSelectedTableToDelete] = useState<VectorBucketIndex>()\n+  const [showDeleteModal, setShowDeleteModal] = useQueryState(\n+    'delete',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n \n   const {\n     data: bucket,\n@@ -77,6 +84,15 @@ export const VectorBucketDetails = () => {\n   })\n   const allIndexes = data?.indexes ?? []\n \n+  const { setValue: setSelectedTableToDelete, value: selectedTableToDelete } =\n+    useQueryStateWithSelect({\n+      urlKey: 'deleteTable',\n+      select: (id: string) => (id ? allIndexes.find((index) => index.indexName === id) : undefined),\n+      enabled: !!allIndexes.length,\n+      onError: (_error, selectedId) =>\n+        handleErrorOnDelete(deletingTableIdRef, selectedId, `Table not found`),\n+    })\n+\n   const filteredList =\n     filterString.length === 0\n       ? allIndexes\n@@ -240,7 +256,7 @@ export const VectorBucketDetails = () => {\n                                       className=\"flex items-center space-x-2\"\n                                       onClick={(e) => {\n                                         e.stopPropagation()\n-                                        setSelectedTableToDelete(index)\n+                                        setSelectedTableToDelete(index.indexName)\n                                       }}\n                                     >\n                                       <Trash2 size={12} />\n@@ -289,7 +305,7 @@ export const VectorBucketDetails = () => {\n       <DeleteVectorTableModal\n         visible={!!selectedTableToDelete}\n         table={selectedTableToDelete}\n-        onClose={() => setSelectedTableToDelete(undefined)}\n+        onClose={() => setSelectedTableToDelete(null)}\n       />\n \n       <DeleteVectorBucketModal\ndiff --git a/apps/studio/components/interfaces/Storage/__tests__/CreateBucketModal.test.tsx b/apps/studio/components/interfaces/Storage/__tests__/CreateBucketModal.test.tsx\nindex 02705cc63066b..1527dac75c2f4 100644\n--- a/apps/studio/components/interfaces/Storage/__tests__/CreateBucketModal.test.tsx\n+++ b/apps/studio/components/interfaces/Storage/__tests__/CreateBucketModal.test.tsx\n@@ -4,8 +4,7 @@ import { beforeEach, describe, expect, it, vi } from 'vitest'\n \n import { ProjectContextProvider } from 'components/layouts/ProjectLayout/ProjectContext'\n import { addAPIMock } from 'tests/lib/msw'\n-\n-import { render } from 'tests/helpers'\n+import { customRender } from 'tests/lib/custom-render'\n import { routerMock } from 'tests/lib/route-mock'\n import { CreateBucketModal } from '../CreateBucketModal'\n \n@@ -41,15 +40,19 @@ describe(`CreateBucketModal`, () => {\n   })\n \n   it(`renders a dialog with a form`, async () => {\n-    render(\n+    customRender(\n       <ProjectContextProvider projectRef=\"default\">\n         <CreateBucketModal />\n-      </ProjectContextProvider>\n+      </ProjectContextProvider>,\n+      {\n+        nuqs: {\n+          searchParams: {\n+            new: 'true',\n+          },\n+        },\n+      }\n     )\n \n-    const dialogTrigger = screen.getByRole(`button`, { name: `New bucket` })\n-    await userEvent.click(dialogTrigger)\n-\n     await waitFor(() => {\n       expect(screen.getByRole(`dialog`)).toBeInTheDocument()\n     })\ndiff --git a/apps/studio/components/interfaces/Storage/__tests__/DeleteBucketModal.test.tsx b/apps/studio/components/interfaces/Storage/__tests__/DeleteBucketModal.test.tsx\nindex 8ec31935b7850..fa0f4fe3252c1 100644\n--- a/apps/studio/components/interfaces/Storage/__tests__/DeleteBucketModal.test.tsx\n+++ b/apps/studio/components/interfaces/Storage/__tests__/DeleteBucketModal.test.tsx\n@@ -6,7 +6,7 @@ import { beforeEach, describe, expect, it, vi } from 'vitest'\n \n import { ProjectContextProvider } from 'components/layouts/ProjectLayout/ProjectContext'\n import { Bucket } from 'data/storage/buckets-query'\n-import { render } from 'tests/helpers'\n+import { customRender } from 'tests/lib/custom-render'\n import { addAPIMock } from 'tests/lib/msw'\n import { routerMock } from 'tests/lib/route-mock'\n import { DeleteBucketModal } from '../DeleteBucketModal'\n@@ -104,13 +104,13 @@ describe(`DeleteBucketModal`, () => {\n \n   it(`renders a confirmation dialog`, async () => {\n     const onClose = vi.fn()\n-    render(<Page onClose={onClose} />)\n+    customRender(<Page onClose={onClose} />)\n \n     const openButton = screen.getByRole(`button`, { name: `Open` })\n     await userEvent.click(openButton)\n     await screen.findByRole(`dialog`)\n \n-    const input = screen.getByPlaceholderText(/Type/)\n+    const input = screen.getByPlaceholderText(`Type bucket name`)\n     await userEvent.type(input, `test`)\n \n     const confirmButton = screen.getByRole(`button`, { name: `Delete bucket` })\ndiff --git a/apps/studio/pages/project/[ref]/storage/files/buckets/[bucketId].tsx b/apps/studio/pages/project/[ref]/storage/files/buckets/[bucketId].tsx\nindex 50c27db6ef80c..c6d497d12a269 100644\n--- a/apps/studio/pages/project/[ref]/storage/files/buckets/[bucketId].tsx\n+++ b/apps/studio/pages/project/[ref]/storage/files/buckets/[bucketId].tsx\n@@ -1,7 +1,8 @@\n import { ChevronDown, FolderOpen, Settings, Shield, Trash2 } from 'lucide-react'\n import Link from 'next/link'\n import { useRouter } from 'next/router'\n-import { useEffect, useState } from 'react'\n+import { useEffect } from 'react'\n+import { parseAsBoolean, useQueryState } from 'nuqs'\n import { toast } from 'sonner'\n \n import { useParams } from 'common'\n@@ -32,7 +33,19 @@ const BucketPage: NextPageWithLayout = () => {\n   const router = useRouter()\n   const { bucketId, ref } = useParams()\n   const { data: bucket, error, isSuccess, isError } = useSelectedBucket()\n-  const [modal, setModal] = useState<'edit' | 'empty' | 'delete' | null>(null)\n+\n+  const [showEditModal, setShowEditModal] = useQueryState(\n+    'edit',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n+  const [showEmptyModal, setShowEmptyModal] = useQueryState(\n+    'empty',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n+  const [showDeleteModal, setShowDeleteModal] = useQueryState(\n+    'delete',\n+    parseAsBoolean.withDefault(false).withOptions({ history: 'push', clearOnDefault: true })\n+  )\n \n   const { getPolicyCount } = useStoragePolicyCounts(bucket ? [bucket as Bucket] : [])\n   const policyCount = bucket ? getPolicyCount(bucket.id) : 0\n@@ -108,7 +121,7 @@ const BucketPage: NextPageWithLayout = () => {\n               <DropdownMenuContent align=\"end\" className=\"w-40\">\n                 <DropdownMenuItem\n                   className=\"flex items-center space-x-2\"\n-                  onClick={() => setModal('edit')}\n+                  onClick={() => setShowEditModal(true)}\n                 >\n                   <Settings size={12} />\n                   <p>Bucket settings</p>\n@@ -116,14 +129,14 @@ const BucketPage: NextPageWithLayout = () => {\n                 <DropdownMenuSeparator />\n                 <DropdownMenuItem\n                   className=\"flex items-center space-x-2\"\n-                  onClick={() => setModal('empty')}\n+                  onClick={() => setShowEmptyModal(true)}\n                 >\n                   <FolderOpen size={12} />\n                   <p>Empty bucket</p>\n                 </DropdownMenuItem>\n                 <DropdownMenuItem\n                   className=\"flex items-center space-x-2\"\n-                  onClick={() => setModal('delete')}\n+                  onClick={() => setShowDeleteModal(true)}\n                 >\n                   <Trash2 size={12} />\n                   <p>Delete bucket</p>\n@@ -141,19 +154,19 @@ const BucketPage: NextPageWithLayout = () => {\n       {bucket && (\n         <>\n           <EditBucketModal\n-            visible={modal === 'edit'}\n+            visible={showEditModal}\n             bucket={bucket}\n-            onClose={() => setModal(null)}\n+            onClose={() => setShowEditModal(false)}\n           />\n           <EmptyBucketModal\n-            visible={modal === 'empty'}\n+            visible={showEmptyModal}\n             bucket={bucket}\n-            onClose={() => setModal(null)}\n+            onClose={() => setShowEmptyModal(false)}\n           />\n           <DeleteBucketModal\n-            visible={modal === 'delete'}\n+            visible={showDeleteModal}\n             bucket={bucket}\n-            onClose={() => setModal(null)}\n+            onClose={() => setShowDeleteModal(false)}\n           />\n         </>\n       )}\n",
			"diffSize": 17521,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "8b586a8253ec0a068f1e9cc396f74aa0bc058cf1",
			"message": "feat: processing invoice status (#40605)",
			"user": "kevcodez",
			"timestamp": "2025-11-20T04:09:36Z",
			"author": {
				"name": "Kevin Grneberg",
				"email": "k.grueneberg1994@gmail.com",
				"username": "kevcodez"
			},
			"files": {
				"added": [],
				"modified": [
					"apps/studio/components/interfaces/Billing/InvoiceStatusBadge.tsx",
					"apps/studio/components/interfaces/Billing/Invoices.types.ts",
					"apps/studio/components/interfaces/Organization/InvoicesSettings/InvoicesSettings.tsx",
					"packages/api-types/types/platform.d.ts"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/studio/components/interfaces/Billing/InvoiceStatusBadge.tsx b/apps/studio/components/interfaces/Billing/InvoiceStatusBadge.tsx\nindex 2fe2dd3c9ee76..1360bca87e6ce 100644\n--- a/apps/studio/components/interfaces/Billing/InvoiceStatusBadge.tsx\n+++ b/apps/studio/components/interfaces/Billing/InvoiceStatusBadge.tsx\n@@ -1,26 +1,24 @@\n+import { InlineLink } from 'components/ui/InlineLink'\n import { Badge, Tooltip, TooltipContent, TooltipTrigger } from 'ui'\n import { InvoiceStatus } from './Invoices.types'\n \n interface InvoiceStatusBadgeProps {\n   status: InvoiceStatus\n   paymentAttempted: boolean\n+  paymentProcessing: boolean\n }\n \n const invoiceStatusMapping: Record<\n   InvoiceStatus,\n   { label: string; badgeVariant: React.ComponentProps<typeof Badge>['variant'] }\n > = {\n-  [InvoiceStatus.DRAFT]: {\n-    label: 'Upcoming',\n-    badgeVariant: 'warning',\n-  },\n   [InvoiceStatus.PAID]: {\n     label: 'Paid',\n     badgeVariant: 'brand',\n   },\n   [InvoiceStatus.VOID]: {\n     label: 'Forgiven',\n-    badgeVariant: 'brand',\n+    badgeVariant: 'warning',\n   },\n \n   // We do not want to overcomplicate it for the user, so we'll treat uncollectible/open/issued the same from a user perspective\n@@ -39,8 +37,17 @@ const invoiceStatusMapping: Record<\n   },\n }\n \n-const InvoiceStatusBadge = ({ status, paymentAttempted }: InvoiceStatusBadgeProps) => {\n-  const statusMapping = invoiceStatusMapping[status]\n+const InvoiceStatusBadge = ({\n+  status,\n+  paymentAttempted,\n+  paymentProcessing,\n+}: InvoiceStatusBadgeProps) => {\n+  const statusMapping = paymentProcessing\n+    ? {\n+        label: 'Processing',\n+        badgeVariant: 'warning' as React.ComponentProps<typeof Badge>['variant'],\n+      }\n+    : invoiceStatusMapping[status]\n \n   return (\n     <Tooltip>\n@@ -53,9 +60,25 @@ const InvoiceStatusBadge = ({ status, paymentAttempted }: InvoiceStatusBadgeProp\n           {statusMapping?.label || status}\n         </Badge>\n       </TooltipTrigger>\n-      <TooltipContent side=\"bottom\">\n+      <TooltipContent side=\"bottom\" className=\"max-w-sm\">\n         {[InvoiceStatus.OPEN, InvoiceStatus.ISSUED, InvoiceStatus.UNCOLLECTIBLE].includes(status) &&\n-          (paymentAttempted ? (\n+          (paymentProcessing ? (\n+            <div className=\"space-y-1\">\n+              <p className=\"text-xs text-foreground\">\n+                While most credit card payments get processed instantly, some Indian credit card\n+                providers may take up to 72 hours. Your card issuer has neither confirmed nor denied\n+                the payment and we have to wait until the card issuer processed the payment.\n+              </p>\n+\n+              <p className=\"text-xs text-foreground\">\n+                If you run into this, we recommend{' '}\n+                <InlineLink href=\"https://supabase.com/docs/guides/platform/credits#credit-top-ups\">\n+                  topping up your credits\n+                </InlineLink>{' '}\n+                in advance to avoid running into this in the future.\n+              </p>\n+            </div>\n+          ) : paymentAttempted ? (\n             <p className=\"text-xs text-foreground\">\n               We were not able to collect the payment. Make sure you have a valid payment method and\n               enough funds. Outstanding invoices may cause restrictions. You can manually pay the\n@@ -69,12 +92,6 @@ const InvoiceStatusBadge = ({ status, paymentAttempted }: InvoiceStatusBadgeProp\n             </p>\n           ))}\n \n-        {status === InvoiceStatus.DRAFT && (\n-          <p className=\"text-xs text-foreground\">\n-            The invoice will soon be finalized and charged for.\n-          </p>\n-        )}\n-\n         {status === InvoiceStatus.PAID && (\n           <p className=\"text-xs text-foreground\">\n             The invoice has been paid successfully. No action is required on your side.\ndiff --git a/apps/studio/components/interfaces/Billing/Invoices.types.ts b/apps/studio/components/interfaces/Billing/Invoices.types.ts\nindex 64e1d3555d2dc..b3734b0307809 100644\n--- a/apps/studio/components/interfaces/Billing/Invoices.types.ts\n+++ b/apps/studio/components/interfaces/Billing/Invoices.types.ts\n@@ -1,5 +1,4 @@\n export enum InvoiceStatus {\n-  DRAFT = 'draft',\n   PAID = 'paid',\n   VOID = 'void',\n   UNCOLLECTIBLE = 'uncollectible',\ndiff --git a/apps/studio/components/interfaces/Organization/InvoicesSettings/InvoicesSettings.tsx b/apps/studio/components/interfaces/Organization/InvoicesSettings/InvoicesSettings.tsx\nindex 0eaea6050a5ea..ca876d5639e3e 100644\n--- a/apps/studio/components/interfaces/Organization/InvoicesSettings/InvoicesSettings.tsx\n+++ b/apps/studio/components/interfaces/Organization/InvoicesSettings/InvoicesSettings.tsx\n@@ -147,11 +147,13 @@ export const InvoicesSettings = () => {\n                       <InvoiceStatusBadge\n                         status={x.status as InvoiceStatus}\n                         paymentAttempted={x.payment_attempted}\n+                        paymentProcessing={x.payment_is_processing}\n                       />\n                     </Table.td>\n                     <Table.td className=\"align-right\">\n                       <div className=\"flex items-center justify-end space-x-2\">\n                         {x.amount_due > 0 &&\n+                          !x.payment_is_processing &&\n                           [\n                             InvoiceStatus.UNCOLLECTIBLE,\n                             InvoiceStatus.OPEN,\ndiff --git a/packages/api-types/types/platform.d.ts b/packages/api-types/types/platform.d.ts\nindex 81755a605d59e..e4413322a9876 100644\n--- a/packages/api-types/types/platform.d.ts\n+++ b/packages/api-types/types/platform.d.ts\n@@ -6882,6 +6882,7 @@ export interface components {\n       invoice_pdf: string\n       number: string\n       payment_attempted: boolean\n+      payment_is_processing: boolean\n       period_end: number\n       status: string\n       subscription: string | null\n",
			"diffSize": 5913,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "076a2529ebf624538f2913c0b8baf246f3c49c6a",
			"message": "feat(connect): add telemetry tracking and command menu actions (#40611)",
			"user": "pamelachia",
			"timestamp": "2025-11-20T03:25:13Z",
			"author": {
				"name": "Pamela Chia",
				"email": "pamelachiamayyee@gmail.com",
				"username": "pamelachia"
			},
			"files": {
				"added": [
					"apps/studio/components/interfaces/Connect/Connect.Commands.tsx"
				],
				"modified": [
					"apps/docs/features/ui/McpConfigPanel.tsx",
					"apps/studio/components/interfaces/App/CommandMenu/CommandMenu.tsx",
					"apps/studio/components/interfaces/Connect/Connect.tsx",
					"apps/studio/components/interfaces/Connect/Connect.types.ts",
					"apps/studio/components/interfaces/Connect/ConnectTabContent.tsx",
					"apps/studio/components/interfaces/Connect/DatabaseConnectionString.tsx",
					"apps/studio/components/interfaces/Connect/McpTabContent.tsx",
					"packages/common/telemetry-constants.ts",
					"packages/ui-patterns/src/McpUrlBuilder/McpConfigPanel.tsx",
					"packages/ui-patterns/src/McpUrlBuilder/components/McpConfigurationDisplay.tsx",
					"packages/ui-patterns/src/McpUrlBuilder/constants.tsx",
					"packages/ui-patterns/src/McpUrlBuilder/types.ts",
					"packages/ui/src/components/SimpleCodeBlock/SimpleCodeBlock.tsx"
				],
				"removed": []
			},
			"diff": "diff --git a/apps/docs/features/ui/McpConfigPanel.tsx b/apps/docs/features/ui/McpConfigPanel.tsx\nindex 629a15537b05f..fa954c0c8a081 100644\n--- a/apps/docs/features/ui/McpConfigPanel.tsx\n+++ b/apps/docs/features/ui/McpConfigPanel.tsx\n@@ -19,11 +19,12 @@ import {\n   ScrollArea,\n } from 'ui'\n import { Admonition } from 'ui-patterns'\n-import { McpConfigPanel as McpConfigPanelBase } from 'ui-patterns/McpUrlBuilder'\n+import { McpConfigPanel as McpConfigPanelBase, type McpClient } from 'ui-patterns/McpUrlBuilder'\n import ShimmeringLoader from 'ui-patterns/ShimmeringLoader'\n import { useDebounce } from '~/hooks/useDebounce'\n import { useIntersectionObserver } from '~/hooks/useIntersectionObserver'\n import { useProjectsInfiniteQuery } from '~/lib/fetch/projects-infinite'\n+import { useSendTelemetryEvent } from '~/lib/telemetry'\n \n type PlatformType = (typeof PLATFORMS)[number]['value']\n \n@@ -260,11 +261,57 @@ function PlatformSelector({\n export function McpConfigPanel() {\n   const [selectedProject, setSelectedProject] = useState<{ ref: string; name: string } | null>(null)\n   const [selectedPlatform, setSelectedPlatform] = useState<'hosted' | 'local'>('hosted')\n+  const [selectedClient, setSelectedClient] = useState<McpClient | null>(null)\n   const { theme } = useTheme()\n+  const sendTelemetryEvent = useSendTelemetryEvent()\n \n   const isPlatform = selectedPlatform === 'hosted'\n   const project = isPlatform ? selectedProject : null\n \n+  const handleCopy = (type?: 'url' | 'json' | 'command') => {\n+    let connectionType: string\n+    switch (type) {\n+      case 'command':\n+        connectionType = 'Command Line'\n+        break\n+      case 'json':\n+        connectionType = 'JSON'\n+        break\n+      case 'url':\n+      default:\n+        connectionType = 'MCP URL'\n+        break\n+    }\n+\n+    sendTelemetryEvent({\n+      action: 'connection_string_copied',\n+      properties: {\n+        connectionTab: 'MCP',\n+        selectedItem: selectedClient?.label,\n+        connectionType,\n+        source: 'docs',\n+      },\n+      groups: {\n+        ...(project?.ref && { project: project.ref }),\n+      } as any,\n+    })\n+  }\n+\n+  const handleInstall = () => {\n+    if (selectedClient?.label) {\n+      sendTelemetryEvent({\n+        action: 'mcp_install_button_clicked',\n+        properties: {\n+          client: selectedClient.label,\n+          source: 'docs',\n+        },\n+        groups: {\n+          ...(project?.ref && { project: project.ref }),\n+        } as any,\n+      })\n+    }\n+  }\n+\n   return (\n     <>\n       <div className=\"not-prose\">\n@@ -288,6 +335,9 @@ export function McpConfigPanel() {\n           projectRef={project?.ref}\n           theme={theme as 'light' | 'dark'}\n           isPlatform={isPlatform}\n+          onCopyCallback={handleCopy}\n+          onInstallCallback={handleInstall}\n+          onClientSelect={setSelectedClient}\n         />\n       </div>\n       {isPlatform && (\ndiff --git a/apps/studio/components/interfaces/App/CommandMenu/CommandMenu.tsx b/apps/studio/components/interfaces/App/CommandMenu/CommandMenu.tsx\nindex a52b21a92f6b2..057d3b7d70dfb 100644\n--- a/apps/studio/components/interfaces/App/CommandMenu/CommandMenu.tsx\n+++ b/apps/studio/components/interfaces/App/CommandMenu/CommandMenu.tsx\n@@ -1,5 +1,6 @@\n import { IS_PLATFORM } from 'common'\n import { useBranchCommands } from 'components/interfaces/BranchManagement/Branch.Commands'\n+import { useConnectCommands } from 'components/interfaces/Connect/Connect.Commands'\n import {\n   useQueryTableCommands,\n   useSnippetCommands,\n@@ -20,6 +21,7 @@ import { orderCommandSectionsByPriority } from './ordering'\n export default function StudioCommandMenu() {\n   useApiKeysCommands()\n   useApiUrlCommand()\n+  useConnectCommands()\n   useProjectLevelTableEditorCommands()\n   useProjectSwitchCommand()\n   useConfigureOrganizationCommand()\ndiff --git a/apps/studio/components/interfaces/Connect/Connect.Commands.tsx b/apps/studio/components/interfaces/Connect/Connect.Commands.tsx\nnew file mode 100644\nindex 0000000000000..6a370317080cf\n--- /dev/null\n+++ b/apps/studio/components/interfaces/Connect/Connect.Commands.tsx\n@@ -0,0 +1,60 @@\n+import { Plug } from 'lucide-react'\n+import { useRouter } from 'next/router'\n+import { useSelectedProjectQuery } from 'hooks/misc/useSelectedProject'\n+import { PROJECT_STATUS } from 'lib/constants'\n+import type { ICommand } from 'ui-patterns/CommandMenu'\n+import { useRegisterCommands, useSetCommandMenuOpen } from 'ui-patterns/CommandMenu'\n+import { COMMAND_MENU_SECTIONS } from 'components/interfaces/App/CommandMenu/CommandMenu.utils'\n+import { orderCommandSectionsByPriority } from 'components/interfaces/App/CommandMenu/ordering'\n+\n+export function useConnectCommands() {\n+  const router = useRouter()\n+  const setIsOpen = useSetCommandMenuOpen()\n+  const { data: selectedProject } = useSelectedProjectQuery()\n+  const isActiveHealthy = selectedProject?.status === PROJECT_STATUS.ACTIVE_HEALTHY\n+\n+  useRegisterCommands(\n+    COMMAND_MENU_SECTIONS.ACTIONS,\n+    [\n+      {\n+        id: 'connect-to-project',\n+        name: 'Connect to your project',\n+        action: () => {\n+          // Open the Connect dialog by setting the showConnect query param\n+          router.push(\n+            {\n+              pathname: router.pathname,\n+              query: { ...router.query, showConnect: 'true' },\n+            },\n+            undefined,\n+            { shallow: true }\n+          )\n+          setIsOpen(false)\n+        },\n+        icon: () => <Plug className=\"rotate-90\" />,\n+      },\n+      {\n+        id: 'connect-mcp',\n+        name: 'Connect via MCP',\n+        action: () => {\n+          // Open the Connect dialog with MCP tab\n+          router.push(\n+            {\n+              pathname: router.pathname,\n+              query: { ...router.query, showConnect: 'true', connectTab: 'mcp' },\n+            },\n+            undefined,\n+            { shallow: true }\n+          )\n+          setIsOpen(false)\n+        },\n+        icon: () => <Plug className=\"rotate-90\" />,\n+      },\n+    ] as ICommand[],\n+    {\n+      enabled: !!selectedProject && isActiveHealthy,\n+      orderSection: orderCommandSectionsByPriority,\n+      sectionMeta: { priority: 2 },\n+    }\n+  )\n+}\ndiff --git a/apps/studio/components/interfaces/Connect/Connect.tsx b/apps/studio/components/interfaces/Connect/Connect.tsx\nindex 86c648b974607..3a3eb2ae7cb7d 100644\n--- a/apps/studio/components/interfaces/Connect/Connect.tsx\n+++ b/apps/studio/components/interfaces/Connect/Connect.tsx\n@@ -411,6 +411,18 @@ export const Connect = () => {\n               )\n             }\n \n+            const connectionTabMap: Record<\n+              string,\n+              'App Frameworks' | 'Mobile Frameworks' | 'ORMs'\n+            > = {\n+              frameworks: 'App Frameworks',\n+              mobiles: 'Mobile Frameworks',\n+              orms: 'ORMs',\n+            }\n+            const connectionTab = connectionTabMap[type.key] || 'App Frameworks'\n+            const selectedFrameworkOrTool =\n+              connectionObject.find((item) => item.key === selectedParent)?.label || ''\n+\n             return (\n               <TabsContent_Shadcn_\n                 key={`content-${type.key}`}\n@@ -467,6 +479,8 @@ export const Connect = () => {\n                 <ConnectTabContent\n                   projectKeys={projectKeys}\n                   filePath={filePath}\n+                  connectionTab={connectionTab}\n+                  selectedFrameworkOrTool={selectedFrameworkOrTool}\n                   className=\"rounded-b-none\"\n                 />\n                 <Panel.Notice\ndiff --git a/apps/studio/components/interfaces/Connect/Connect.types.ts b/apps/studio/components/interfaces/Connect/Connect.types.ts\nindex 78e379f6a8c72..d75a5df614d26 100644\n--- a/apps/studio/components/interfaces/Connect/Connect.types.ts\n+++ b/apps/studio/components/interfaces/Connect/Connect.types.ts\n@@ -18,4 +18,6 @@ export interface ContentFileProps {\n     ipv4SupportedForDedicatedPooler: boolean\n     direct?: string\n   }\n+  connectionTab: 'App Frameworks' | 'Mobile Frameworks' | 'ORMs'\n+  onCopy?: () => void\n }\ndiff --git a/apps/studio/components/interfaces/Connect/ConnectTabContent.tsx b/apps/studio/components/interfaces/Connect/ConnectTabContent.tsx\nindex 3667d93dd4838..59dce1062d612 100644\n--- a/apps/studio/components/interfaces/Connect/ConnectTabContent.tsx\n+++ b/apps/studio/components/interfaces/Connect/ConnectTabContent.tsx\n@@ -9,7 +9,8 @@ import { useSupavisorConfigurationQuery } from 'data/database/supavisor-configur\n import { useProjectAddonsQuery } from 'data/subscriptions/project-addons-query'\n import { useSelectedOrganizationQuery } from 'hooks/misc/useSelectedOrganization'\n import { pluckObjectFields } from 'lib/helpers'\n-import { cn } from 'ui'\n+import { useTrack } from 'lib/telemetry/track'\n+import { cn, CopyCallbackContext } from 'ui'\n import { getAddons } from '../Billing/Subscription/Subscription.utils'\n import type { projectKeys } from './Connect.types'\n import { getConnectionStrings } from './DatabaseSettings.utils'\n@@ -17,6 +18,8 @@ import { getConnectionStrings } from './DatabaseSettings.utils'\n interface ConnectContentTabProps extends HTMLAttributes<HTMLDivElement> {\n   projectKeys: projectKeys\n   filePath: string\n+  connectionTab: 'App Frameworks' | 'Mobile Frameworks' | 'ORMs'\n+  selectedFrameworkOrTool: string\n   connectionStringPooler?: {\n     transactionShared: string\n     sessionShared: string\n@@ -28,11 +31,32 @@ interface ConnectContentTabProps extends HTMLAttributes<HTMLDivElement> {\n }\n \n export const ConnectTabContent = forwardRef<HTMLDivElement, ConnectContentTabProps>(\n-  ({ projectKeys, filePath, ...props }, ref) => {\n+  ({ projectKeys, filePath, connectionTab, selectedFrameworkOrTool, ...props }, ref) => {\n     const { ref: projectRef } = useParams()\n+    const track = useTrack()\n     const { data: selectedOrg } = useSelectedOrganizationQuery()\n     const allowPgBouncerSelection = useMemo(() => selectedOrg?.plan.id !== 'free', [selectedOrg])\n \n+    const handleCopy = () => {\n+      const trackingProperties: {\n+        connectionTab: 'App Frameworks' | 'Mobile Frameworks' | 'ORMs'\n+        selectedItem: string\n+        connectionType?: string\n+        lang?: string\n+      } = {\n+        connectionTab,\n+        selectedItem: selectedFrameworkOrTool,\n+      }\n+\n+      // Only include connectionType and lang for App Frameworks and Mobile Frameworks\n+      if (connectionTab !== 'ORMs') {\n+        trackingProperties.connectionType = 'Framework snippet'\n+        trackingProperties.lang = filePath.split('/').pop() ?? 'unknown'\n+      }\n+\n+      track('connection_string_copied', trackingProperties)\n+    }\n+\n     const { data: settings } = useProjectSettingsV2Query({ projectRef })\n     const { data: pgbouncerConfig } = usePgbouncerConfigQuery({ projectRef })\n     const { data: supavisorConfig } = useSupavisorConfigurationQuery({ projectRef })\n@@ -84,18 +108,23 @@ export const ConnectTabContent = forwardRef<HTMLDivElement, ConnectContentTabPro\n \n     return (\n       <div ref={ref} {...props} className={cn('border rounded-lg', props.className)}>\n-        <ContentFile\n-          projectKeys={projectKeys}\n-          filePath={filePath}\n-          connectionStringPooler={{\n-            transactionShared: connectionStringsShared.pooler.uri,\n-            sessionShared: connectionStringsShared.pooler.uri.replace('6543', '5432'),\n-            transactionDedicated: connectionStringsDedicated?.pooler.uri,\n-            sessionDedicated: connectionStringsDedicated?.pooler.uri.replace('6543', '5432'),\n-            ipv4SupportedForDedicatedPooler: !!ipv4Addon,\n-            direct: connectionStringsShared.direct.uri,\n-          }}\n-        />\n+        <CopyCallbackContext.Provider value={handleCopy}>\n+          <ContentFile\n+            projectKeys={projectKeys}\n+            filePath={filePath}\n+            connectionTab={connectionTab}\n+            selectedFrameworkOrTool={selectedFrameworkOrTool}\n+            connectionStringPooler={{\n+              transactionShared: connectionStringsShared.pooler.uri,\n+              sessionShared: connectionStringsShared.pooler.uri.replace('6543', '5432'),\n+              transactionDedicated: connectionStringsDedicated?.pooler.uri,\n+              sessionDedicated: connectionStringsDedicated?.pooler.uri.replace('6543', '5432'),\n+              ipv4SupportedForDedicatedPooler: !!ipv4Addon,\n+              direct: connectionStringsShared.direct.uri,\n+            }}\n+            onCopy={handleCopy}\n+          />\n+        </CopyCallbackContext.Provider>\n       </div>\n     )\n   }\ndiff --git a/apps/studio/components/interfaces/Connect/DatabaseConnectionString.tsx b/apps/studio/components/interfaces/Connect/DatabaseConnectionString.tsx\nindex 72ad757d9a824..31b71135184a6 100644\n--- a/apps/studio/components/interfaces/Connect/DatabaseConnectionString.tsx\n+++ b/apps/studio/components/interfaces/Connect/DatabaseConnectionString.tsx\n@@ -209,7 +209,12 @@ export const DatabaseConnectionString = () => {\n     const lang = connectionInfo?.lang ?? 'Unknown'\n     sendEvent({\n       action: 'connection_string_copied',\n-      properties: { connectionType, lang, connectionMethod: connectionStringMethod },\n+      properties: {\n+        connectionType,\n+        lang,\n+        connectionMethod: connectionStringMethod,\n+        connectionTab: 'Connection String',\n+      },\n       groups: { project: projectRef ?? 'Unknown', organization: org?.slug ?? 'Unknown' },\n     })\n   }\ndiff --git a/apps/studio/components/interfaces/Connect/McpTabContent.tsx b/apps/studio/components/interfaces/Connect/McpTabContent.tsx\nindex bbb9beeb64024..941e2e3e8c9cf 100644\n--- a/apps/studio/components/interfaces/Connect/McpTabContent.tsx\n+++ b/apps/studio/components/interfaces/Connect/McpTabContent.tsx\n@@ -2,8 +2,10 @@ import { IS_PLATFORM, useParams } from 'common'\n import Panel from 'components/ui/Panel'\n import ShimmeringLoader from 'components/ui/ShimmeringLoader'\n import { BASE_PATH } from 'lib/constants'\n+import { useTrack } from 'lib/telemetry/track'\n import { useTheme } from 'next-themes'\n-import { McpConfigPanel } from 'ui-patterns/McpUrlBuilder'\n+import { useState } from 'react'\n+import { McpConfigPanel, type McpClient } from 'ui-patterns/McpUrlBuilder'\n import type { projectKeys } from './Connect.types'\n \n export const McpTabContent = ({ projectKeys }: { projectKeys: projectKeys }) => {\n@@ -37,6 +39,40 @@ const McpTabContentInnerLoaded = ({\n   projectKeys: projectKeys\n }) => {\n   const { resolvedTheme } = useTheme()\n+  const track = useTrack()\n+  const [selectedClient, setSelectedClient] = useState<McpClient | null>(null)\n+\n+  const handleCopy = (type?: 'url' | 'json' | 'command') => {\n+    let connectionType: string\n+    switch (type) {\n+      case 'command':\n+        connectionType = 'Command Line'\n+        break\n+      case 'json':\n+        connectionType = 'JSON'\n+        break\n+      case 'url':\n+      default:\n+        connectionType = 'MCP URL'\n+        break\n+    }\n+\n+    track('connection_string_copied', {\n+      connectionTab: 'MCP',\n+      selectedItem: selectedClient?.label,\n+      connectionType,\n+      source: 'studio',\n+    })\n+  }\n+\n+  const handleInstall = () => {\n+    if (selectedClient?.label) {\n+      track('mcp_install_button_clicked', {\n+        client: selectedClient.label,\n+        source: 'studio',\n+      })\n+    }\n+  }\n \n   return (\n     <McpConfigPanel\n@@ -45,6 +81,9 @@ const McpTabContentInnerLoaded = ({\n       theme={resolvedTheme as 'light' | 'dark'}\n       isPlatform={IS_PLATFORM}\n       apiUrl={projectKeys.apiUrl ?? undefined}\n+      onCopyCallback={handleCopy}\n+      onInstallCallback={handleInstall}\n+      onClientSelect={setSelectedClient}\n     />\n   )\n }\ndiff --git a/packages/common/telemetry-constants.ts b/packages/common/telemetry-constants.ts\nindex 335e300108d96..767ce07df87bd 100644\n--- a/packages/common/telemetry-constants.ts\n+++ b/packages/common/telemetry-constants.ts\n@@ -69,17 +69,53 @@ export interface ConnectionStringCopiedEvent {\n   action: 'connection_string_copied'\n   properties: {\n     /**\n-     * Method selected by user, e.g. URI, PSQL, SQLAlchemy, etc.\n+     * Method selected by user, e.g. URI, PSQL, SQLAlchemy, MCP URL, Framework snippet, Command Line, JSON, etc.\n+     * Required for Connection String, App Frameworks, and Mobile Frameworks tabs\n      */\n-    connectionType: string\n+    connectionType?: string\n     /**\n-     * Language of the code block if selected, e.g. bash, go\n+     * Language of the code block if selected, e.g. bash, go, http, typescript\n+     * Required for Connection String, App Frameworks, and Mobile Frameworks tabs\n      */\n-    lang: string\n+    lang?: string\n     /**\n      * Connection Method, e.g. direct, transaction_pooler, session_pooler\n+     * Only used for Connection String tab\n      */\n-    connectionMethod: 'direct' | 'transaction_pooler' | 'session_pooler'\n+    connectionMethod?: 'direct' | 'transaction_pooler' | 'session_pooler'\n+    /**\n+     * Tab from which the connection string was copied\n+     */\n+    connectionTab: 'Connection String' | 'App Frameworks' | 'Mobile Frameworks' | 'ORMs' | 'MCP'\n+    /**\n+     * Selected framework, tool, or client (e.g., 'Next.js', 'Prisma', 'Cursor')\n+     */\n+    selectedItem?: string\n+    /**\n+     * Source of the event, either 'studio' or 'docs'\n+     */\n+    source?: 'studio' | 'docs'\n+  }\n+  groups: TelemetryGroups\n+}\n+\n+/**\n+ * User clicked the MCP install button (one-click installation for Cursor or VS Code).\n+ *\n+ * @group Events\n+ * @source studio, docs\n+ */\n+export interface McpInstallButtonClickedEvent {\n+  action: 'mcp_install_button_clicked'\n+  properties: {\n+    /**\n+     * The MCP client that was selected (e.g., 'Cursor', 'VS Code')\n+     */\n+    client: string\n+    /**\n+     * Source of the event, either 'studio' or 'docs'\n+     */\n+    source?: 'studio' | 'docs'\n   }\n   groups: TelemetryGroups\n }\n@@ -2320,6 +2356,7 @@ export type TelemetryEvent =\n   | SignUpEvent\n   | SignInEvent\n   | ConnectionStringCopiedEvent\n+  | McpInstallButtonClickedEvent\n   | ApiDocsOpenedEvent\n   | ApiDocsCodeCopyButtonClickedEvent\n   | CronJobCreatedEvent\ndiff --git a/packages/ui-patterns/src/McpUrlBuilder/McpConfigPanel.tsx b/packages/ui-patterns/src/McpUrlBuilder/McpConfigPanel.tsx\nindex c6463094a940e..11ab2f94d1373 100644\n--- a/packages/ui-patterns/src/McpUrlBuilder/McpConfigPanel.tsx\n+++ b/packages/ui-patterns/src/McpUrlBuilder/McpConfigPanel.tsx\n@@ -17,6 +17,8 @@ export interface McpConfigPanelProps {\n   projectRef?: string\n   initialSelectedClient?: McpClient\n   onClientSelect?: (client: McpClient) => void\n+  onCopyCallback?: (type?: 'url' | 'json' | 'command') => void\n+  onInstallCallback?: () => void\n   theme?: 'light' | 'dark'\n   className?: string\n   isPlatform: boolean // For docs this is controlled by state, for studio by environment variable\n@@ -28,6 +30,8 @@ export function McpConfigPanel({\n   projectRef,\n   initialSelectedClient,\n   onClientSelect,\n+  onCopyCallback,\n+  onInstallCallback,\n   className,\n   theme = 'dark',\n   isPlatform,\n@@ -93,6 +97,7 @@ export function McpConfigPanel({\n             hideLineNumbers\n             language=\"http\"\n             className=\"max-h-64 overflow-y-auto\"\n+            onCopyCallback={() => onCopyCallback?.('url')}\n           >\n             {mcpUrl}\n           </CodeBlock>\n@@ -122,6 +127,8 @@ export function McpConfigPanel({\n           basePath={basePath}\n           selectedClient={selectedClient}\n           clientConfig={clientConfig}\n+          onCopyCallback={onCopyCallback}\n+          onInstallCallback={onInstallCallback}\n         />\n       </div>\n     </div>\ndiff --git a/packages/ui-patterns/src/McpUrlBuilder/components/McpConfigurationDisplay.tsx b/packages/ui-patterns/src/McpUrlBuilder/components/McpConfigurationDisplay.tsx\nindex da996a49ad115..81a39fba1b408 100644\n--- a/packages/ui-patterns/src/McpUrlBuilder/components/McpConfigurationDisplay.tsx\n+++ b/packages/ui-patterns/src/McpUrlBuilder/components/McpConfigurationDisplay.tsx\n@@ -13,6 +13,8 @@ interface McpConfigurationDisplayProps {\n   className?: string\n   theme?: 'light' | 'dark'\n   basePath: string\n+  onCopyCallback?: (type?: 'url' | 'json' | 'command') => void\n+  onInstallCallback?: () => void\n }\n \n export function McpConfigurationDisplay({\n@@ -21,6 +23,8 @@ export function McpConfigurationDisplay({\n   className,\n   theme = 'dark',\n   basePath,\n+  onCopyCallback,\n+  onInstallCallback,\n }: McpConfigurationDisplayProps) {\n   const mcpButtonData = getMcpButtonData({\n     basePath,\n@@ -40,6 +44,7 @@ export function McpConfigurationDisplay({\n               target=\"_blank\"\n               rel=\"noopener noreferrer\"\n               className=\"flex items-center gap-2 [&>span]:flex [&>span]:items-center [&>span]:gap-2\"\n+              onClick={onInstallCallback}\n             >\n               <Image\n                 src={mcpButtonData.imageSrc}\n@@ -54,7 +59,8 @@ export function McpConfigurationDisplay({\n         </>\n       )}\n \n-      {selectedClient.primaryInstructions && selectedClient.primaryInstructions(clientConfig)}\n+      {selectedClient.primaryInstructions &&\n+        selectedClient.primaryInstructions(clientConfig, onCopyCallback)}\n \n       {selectedClient.configFile && (\n         <div className=\"text-xs text-foreground-light\">\n@@ -73,9 +79,11 @@ export function McpConfigurationDisplay({\n         language=\"json\"\n         className=\"max-h-64 overflow-y-auto\"\n         focusable={false}\n+        onCopyCallback={() => onCopyCallback?.('json')}\n       />\n \n-      {selectedClient.alternateInstructions && selectedClient.alternateInstructions(clientConfig)}\n+      {selectedClient.alternateInstructions &&\n+        selectedClient.alternateInstructions(clientConfig, onCopyCallback)}\n \n       {(selectedClient.docsUrl || selectedClient.externalDocsUrl) && (\n         <div className=\"flex items-center gap-2 text-xs text-foreground-light\">\ndiff --git a/packages/ui-patterns/src/McpUrlBuilder/constants.tsx b/packages/ui-patterns/src/McpUrlBuilder/constants.tsx\nindex e507b6266c6b0..1dae9d1bc0668 100644\n--- a/packages/ui-patterns/src/McpUrlBuilder/constants.tsx\n+++ b/packages/ui-patterns/src/McpUrlBuilder/constants.tsx\n@@ -108,7 +108,7 @@ export const MCP_CLIENTS: McpClient[] = [\n         },\n       }\n     },\n-    alternateInstructions: () => (\n+    alternateInstructions: (_config, _onCopy) => (\n       <p className=\"text-xs text-foreground-light\">\n         Windsurf does not currently support remote MCP servers over HTTP transport. You need to use\n         the mcp-remote package as a proxy.\n@@ -131,7 +131,7 @@ export const MCP_CLIENTS: McpClient[] = [\n         },\n       }\n     },\n-    primaryInstructions: (_config) => {\n+    primaryInstructions: (_config, onCopy) => {\n       const config = _config as ClaudeCodeMcpConfig\n       const command = `claude mcp add --scope project --transport http supabase \"${config.mcpServers.supabase.url}\"`\n       return (\n@@ -146,17 +146,24 @@ export const MCP_CLIENTS: McpClient[] = [\n             // This is a no-op but the CodeBlock component is designed to output\n             // inline code if no className is given\n             className=\"block\"\n+            onCopyCallback={() => onCopy?.('command')}\n           />\n         </div>\n       )\n     },\n-    alternateInstructions: () => (\n+    alternateInstructions: (_config, onCopy) => (\n       <div className=\"space-y-2\">\n         <p className=\"text-xs text-foreground-light\">\n           After configuring the MCP server, you need to authenticate. In a regular terminal (not the\n           IDE extension) run:\n         </p>\n-        <CodeBlock value=\"claude /mcp\" language=\"bash\" focusable={false} className=\"block\" />\n+        <CodeBlock\n+          value=\"claude /mcp\"\n+          language=\"bash\"\n+          focusable={false}\n+          className=\"block\"\n+          onCopyCallback={() => onCopy?.('command')}\n+        />\n         <p className=\"text-xs text-foreground-light\">\n           Select the \"supabase\" server, then \"Authenticate\" to begin the authentication flow.\n         </p>\ndiff --git a/packages/ui-patterns/src/McpUrlBuilder/types.ts b/packages/ui-patterns/src/McpUrlBuilder/types.ts\nindex bf24a7ddc8c86..02f867a600294 100644\n--- a/packages/ui-patterns/src/McpUrlBuilder/types.ts\n+++ b/packages/ui-patterns/src/McpUrlBuilder/types.ts\n@@ -13,8 +13,14 @@ export interface McpClient {\n   configFile?: string\n   generateDeepLink?: (config: McpClientConfig) => string | null\n   transformConfig?: (config: McpClientBaseConfig) => McpClientConfig\n-  primaryInstructions?: (config: McpClientConfig) => React.ReactNode\n-  alternateInstructions?: (config: McpClientConfig) => React.ReactNode\n+  primaryInstructions?: (\n+    config: McpClientConfig,\n+    onCopy?: (type?: 'url' | 'json' | 'command') => void\n+  ) => React.ReactNode\n+  alternateInstructions?: (\n+    config: McpClientConfig,\n+    onCopy?: (type?: 'url' | 'json' | 'command') => void\n+  ) => React.ReactNode\n }\n \n export interface McpUrlBuilderConfig {\ndiff --git a/packages/ui/src/components/SimpleCodeBlock/SimpleCodeBlock.tsx b/packages/ui/src/components/SimpleCodeBlock/SimpleCodeBlock.tsx\nindex 109a9590dbfa7..154715866c10e 100644\n--- a/packages/ui/src/components/SimpleCodeBlock/SimpleCodeBlock.tsx\n+++ b/packages/ui/src/components/SimpleCodeBlock/SimpleCodeBlock.tsx\n@@ -8,12 +8,15 @@\n \n import { useTheme } from 'next-themes'\n import { Highlight, Language, Prism, themes } from 'prism-react-renderer'\n-import { PropsWithChildren, useEffect, useRef, useState } from 'react'\n+import { PropsWithChildren, createContext, useContext, useEffect, useRef, useState } from 'react'\n import { copyToClipboard } from '../../lib/utils'\n import { cn } from './../../lib/utils/cn'\n import { Button } from './../Button'\n import { dart } from './prism'\n \n+// Context for copy callback - can be provided by parent components\n+export const CopyCallbackContext = createContext<(() => void) | undefined>(undefined)\n+\n dart(Prism)\n \n const prism = {\n@@ -41,6 +44,7 @@ export const SimpleCodeBlock = ({\n   const { resolvedTheme } = useTheme()\n   const [showCopied, setShowCopied] = useState(false)\n   const target = useRef(null)\n+  const contextOnCopy = useContext(CopyCallbackContext)\n   let highlightLines: any = []\n \n   useEffect(() => {\n@@ -62,7 +66,9 @@ export const SimpleCodeBlock = ({\n       copyToClipboard(code)\n     }\n     setShowCopied(true)\n-    onCopy?.()\n+    // Use prop onCopy if provided, otherwise fall back to context\n+    const copyCallback = onCopy || contextOnCopy\n+    copyCallback?.()\n   }\n \n   return (\n",
			"diffSize": 26546,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		},
		{
			"sha": "e75282c0dce05d9525e28a8021314e6d6f9a2b26",
			"message": "docs: add `Ruan Maia` to humans.txt (#40615)",
			"user": "ruanmaia",
			"timestamp": "2025-11-20T01:06:06Z",
			"author": {
				"name": "Ruan Maia",
				"email": "ruan.maia@supabase.io",
				"username": "ruanmaia"
			},
			"files": {
				"added": [],
				"modified": ["apps/docs/public/humans.txt"],
				"removed": []
			},
			"diff": "diff --git a/apps/docs/public/humans.txt b/apps/docs/public/humans.txt\nindex 4db31f999f8ab..dce66077a6be6 100644\n--- a/apps/docs/public/humans.txt\n+++ b/apps/docs/public/humans.txt\n@@ -135,6 +135,7 @@ Rodrigo Mansueli\n Ronan Lehane\n Rory Wilding\n Ryan Goulet\n+Ruan Maia\n Sam Meech-Ward\n Sam Rome\n Sam Rose\n",
			"diffSize": 306,
			"diffTruncated": false,
			"filterResult": {
				"included": true
			}
		}
	]
}
